// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define(["dojo/_base/declare","dojo/_base/lang","dojo/Deferred","jimu/dijit/LayerChooserFromMap","jimu/dijit/FeaturelayerChooserFromMap"],function(f,d,e,g,h){return f([h],{postMixInProperties:function(){this.inherited(arguments);this.filter=d.hitch(this,g.andCombineFilters([this.filter,d.hitch(this,this._customFilter)]))},_customFilter:function(c){var a=new e;c.getLayerObject().then(d.hitch(this,function(b){"esri.layers.FeatureLayer"===b.declaredClass?a.resolve(!0):"esri.layers.ArcGISDynamicMapServiceLayer"===
b.declaredClass?a.resolve(10<=b.version):a.resolve(!1)}),d.hitch(this,function(b){console.error(b);a.resolve(!1)}));return a},_customFilter2:function(c){var a=new e;c.parentLayerInfo?this._getAncestorLayerInfo(c).getLayerObject().then(d.hitch(this,function(b){a.resolve("esri.layers.ArcGISDynamicMapServiceLayer"===b.declaredClass)}),d.hitch(this,function(b){console.error(b);a.resolve(!1)})):"esri.layers.FeatureLayer"===c.declaredClass?a.resolve(!0):"esri.layers.ArcGISDynamicMapServiceLayer"===c.declaredClass?
(c.getLayerObject().then(d.hitch(this,function(b){a.resolve(10<=b.version)}),d.hitch(this,function(b){console.error(b);a.resolve(!1)})),a.resolve(!0)):a.resolve(!1);return a},_getAncestorLayerInfo:function(c){for(;c.parentLayerInfo;)c=c.parentLayerInfo;return c}})});