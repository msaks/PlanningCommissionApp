// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/Filter/setting/SingleFilterSetting":function(){define("dojo/on dojo/query dojo/Evented dojo/_base/lang dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./SingleFilterSetting.html jimu/utils jimu/dijit/Filter jimu/dijit/Message jimu/dijit/LayerChooserFromMapWithDropbox ./CustomFeaturelayerChooserFromMap jimu/dijit/ImageChooser dijit/form/ValidationTextBox".split(" "),function(l,g,r,n,f,c,d,q,k,p,e,b,m,a){return f([c,d,q,r],
{baseClass:"jimu-widget-singlefilter-setting",templateString:k,jimuNls:null,_defaultTaskIcon:null,map:null,nls:null,target:null,layerInfosObj:null,folderUrl:"",appConfig:null,postMixInProperties:function(){this.inherited(arguments);this._defaultTaskIcon=this.folderUrl+"css/images/default_task_icon.png";this.jimuNls=window.jimuNls},postCreate:function(){this.inherited(arguments);this._recreateLayerChooserSelect(!0);this.filter=new e({enableAskForValues:!0,noFilterTip:this.nls.noFilterTip,style:"width:100%;"});
this.filter.placeAt(this.filterDiv);this._setDefaultTaskIcon()},_recreateLayerChooserSelect:function(b){this.layerChooserSelect&&this.layerChooserSelect.destroy();this.layerChooserSelect=null;var e=new a({showLayerFromFeatureSet:!1,showTable:!1,onlyShowVisible:!1,createMapResponse:this.map.webMapResponse});this.layerChooserSelect=new m({layerChooser:e});this.layerChooserSelect.placeAt(this.layerTd);b&&this._bindEventForLayerChooserSelect(this.layerChooserSelect)},showLayerChooserPopup:function(){this.layerChooserSelect.showLayerChooser()},
destroy:function(){this.target=null;this.emit("before-destroy");this.inherited(arguments)},setConfig:function(a){var b=n.clone(a);this._showLoading();this.reset();this._recreateLayerChooserSelect(!1);var h=n.hitch(this,function(){this.domNode&&(this._bindEventForLayerChooserSelect(this.layerChooserSelect),this._hideLoading())});this.layerInfosObj.getLayerInfoById(b.layerId).getLayerObject().then(n.hitch(this,function(a){this.domNode&&this.layerChooserSelect.setSelectedLayer(a).then(n.hitch(this,function(h){this.domNode&&
(this._hideLoading(),h&&(b.icon?this.imageChooser.setDefaultSelfSrc(b.icon):this._setDefaultTaskIcon(),this.nameTextBox.set("value",b.name),h=this._getLayerDefinitionForFilterDijit(a),this.filter.buildByFilterObj(a.url,b.filter,h),this._bindEventForLayerChooserSelect(this.layerChooserSelect)))}),n.hitch(this,function(a){console.error(a);h()}))}),n.hitch(this,function(a){console.error(a);h()}))},getConfig:function(){var a={layerId:null,url:null,name:null,filter:null,icon:null},b=this.layerChooserSelect.getSelectedItem();
if(!b)return this._showMessage(this.nls.selectLayerTip),!1;b=b.layerInfo.layerObject;a.layerId=b.id;a.url=b.url;a.name=this.nameTextBox.get("value");if(!a.name)return this._showMessage(this.nls.setTitleTip),!1;b=this.imageChooser.getImageData();b===this._defaultTaskIcon&&(b="");a.icon=b;a.filter=this.filter.toJson();return!a.filter?(this._showMessage(window.jimuNls.filterBuilder.setFilterTip),!1):this.target.singleConfig=a},reset:function(){this._setDefaultTaskIcon();this.nameTextBox.set("value",
"");this.filter.reset()},_setDefaultTaskIcon:function(){this.imageChooser.setDefaultSelfSrc(this._defaultTaskIcon)},_onNameTextBoxChanged:function(){var a=g(".label",this.target)[0],b=this.nameTextBox.get("value");a.innerHTML=b;a.title=b},_bindEventForLayerChooserSelect:function(a){a.isBindEvent||(this.own(l(a,"selection-change",n.hitch(this,this._onLayerChanged))),a.isBindEvent=!0)},_showMessage:function(a){new b({message:a})},_onLayerChanged:function(){this.reset();var a=this.layerChooserSelect.getSelectedItem();
if(a){var b=a.layerInfo,a=b.layerObject;this.nameTextBox.set("value",b.title);b=this._getLayerDefinitionForFilterDijit(a);this.filter.buildByExpr(a.url,"1\x3d1",b)}},_getLayerDefinitionForFilterDijit:function(a){var b=p.getFeatureLayerDefinition(a);b||(b={currentVersion:a.currentVersion,fields:n.clone(a.fields)});return b},_showLoading:function(){this.emit("loading")},_hideLoading:function(){this.emit("unloading")},_onImageChooserDivClicked:function(a){this.imageChooser.mask&&(a=a.target||a.srcElement,
a!==this.imageChooser.mask&&a!==this.imageChooser.fileInput&&p.simulateClickEvent(this.imageChooser.mask))}})})},"jimu/dijit/Filter":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/Filter.html jimu/filterUtils jimu/utils dijit/registry dojo/_base/lang dojo/_base/html dojo/_base/array dojo/aspect dojo/query dojo/Deferred esri/request ./_SingleFilter ./_FilterSet ./LoadingIndicator".split(" "),function(l,g,r,n,f,c,d,q,
k,p,e,b,m,a,v,s,h){return l([g,r,n,c],{templateString:f,baseClass:"jimu-filter",declaredClass:"jimu.dijit.Filter",nls:null,_validOptions:!1,_layerDefinition:null,_def:null,noFilterTip:"",enableAskForValues:!1,postMixInProperties:function(){this.nls=window.jimuNls.filterBuilder;var a=this.nls.matchMsg.split("${any_or_all}");this.nls.strMatchMsgPart1=a[0]||"";this.nls.strMatchMsgPart2=a[1]||"";this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.noFilterTip&&"string"===typeof this.noFilterTip&&
(this.noFilterTipSection.innerHTML=this.noFilterTip)},reset:function(){this.isBuilding()||(this.removeAllFilters(),this.url=null,this.isHosted=!1,this.partsObj=this.expr=this._layerDefinition=null)},isBuilding:function(){return this._def&&!this._def.isFulfilled()},buildByExpr:function(h,b,e){var c=new a;this.isBuilding()?c.reject("Filter is already building."):(this._def=null,this.reset(),this.url=h,this.isHosted=d.isHostedService(this.url),this.expr=b||"1\x3d1",this._layerDefinition=e,c=this._def=
this._init("expr"));return c},buildByFilterObj:function(h,b,e){var c=new a;this.isBuilding()?c.reject("Filter is already building."):(this._def=null,this.reset(),this.url=h,this.isHosted=d.isHostedService(this.url),this.partsObj=b,this._layerDefinition=e,c=this._def=this._init("partsObj"));return c},removeAllFilters:function(){this._destroyAllFilters()},_validateLayerDefinition:function(a){return this._isObject(a)},_init:function(h){var b=new a;if(!this._isString(this.url))return b.reject(),b;var c=
k.hitch(this,function(){setTimeout(k.hitch(this,function(){b.resolve()}),1500)}),d=k.hitch(this,function(){p.setStyle(this.contentSection,"display","block");p.setStyle(this.errorSection,"display","none");this.removeAllFilters();var a=this._layerDefinition.fields;a&&0<a.length?(a=e.filter(a,k.hitch(this,function(a){return 0<=this._supportFieldTypes.indexOf(a.type)})))&&0<a.length?(this._validOptions=!0,p.removeClass(this.btnAddSet,"jimu-state-disabled"),p.removeClass(this.btnAddExp,"jimu-state-disabled"),
p.removeClass(this.iconAddExp,"jimu-state-disabled"),p.removeClass(this.iconAddSet,"jimu-state-disabled"),this.createFieldsStore(),"expr"===h?this._isString(this.expr)?("1\x3d1"===this.expr.replace(/\s/gi,"")&&this.removeAllFilters(),this._parseExpr(this.expr)?c():b.reject()):b.reject():"partsObj"===h?this._validatePartsObj(this.partsObj)?(this._parsePartsObj(this.partsObj),c()):b.reject():this._validatePartsObj(this.partsObj)?(this._parsePartsObj(this.partsObj),c()):this._isString(this.expr)?this._parseExpr(this.expr)?
c():b.reject():(this.removeAllFilters(),c())):(this._showErrorOptions(this.nls.error.noFilterFields),b.reject()):b.reject()});this._validateLayerDefinition(this._layerDefinition)?d():(this.loading.show(),v({url:this.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(k.hitch(this,function(a){this.domNode?(this.loading.hide(),this._layerDefinition=a,d()):b.reject()}),k.hitch(this,function(a){console.error(a);b.reject();this.domNode&&this.loading.hide()})));return b},toJson:function(){var a=
{logicalOperator:this.allAnySelect.value,parts:[]},h=this._getAllSingleFiltersAndFilterSets();if(0===h.length)return a.expr="1\x3d1",a;e.forEach(h,k.hitch(this,function(h){h=h.toJson();a.parts.push(h)}));return e.every(a.parts,k.hitch(this,function(a){return!!a}))&&0<a.parts.length?(a.expr=this.getExprByFilterObj(a),a):null},createFieldsStore:function(){if(!this._layerDefinition.fields||0===this._layerDefinition.fields.length)this._showErrorOptions(this.nls.error.noFilterFields);else{var a=k.clone(this._layerDefinition).fields;
0===this.setFieldsStoreByFieldInfos(a)&&this._showErrorOptions(this.nls.error.noFilterFields)}},_parsePartsObj:function(a){this._validatePartsObj(a)&&(this.removeAllFilters(),this._buildEditUIByPartsObj(a))},_parseExpr:function(a){this._destroyAllFilters();var h=null;if(!this._validateLayerDefinition(this._layerDefinition))return h;if(!a||"string"!==typeof a)return this._showErrorOptions(this.nls.error.invalidSQL),h;if("1\x3d1"===this.expr.replace(/\s/gi,""))return h={expr:"1\x3d1",parts:[],logicalOperator:"AND"};
try{h=this.getFilterObjByExpr(a)}catch(b){h=null,console.error(b)}h?this._buildEditUIByPartsObj(h):this._showErrorOptions(this.nls.error.cantParseSQL);return h},_buildEditUIByPartsObj:function(a){a&&(this._destroyAllFilters(),this.allAnySelect.value=a.logicalOperator,e.forEach(a.parts,k.hitch(this,function(a){a.parts?this._addFilterSet(a):a.fieldObj&&(a.operator&&a.valueObj)&&this._addSingleFilter(a)})))},_addSingleFilter:function(a){a={url:this.url,layerInfo:this._layerDefinition,stringFieldType:this._stringFieldType,
dateFieldType:this._dateFieldType,numberFieldTypes:this._numberFieldTypes,part:a,OPERATORS:k.mixin({},this.OPERATORS),enableAskForValues:this.enableAskForValues,isHosted:this.isHosted};a=new s(a);a.placeAt(this.allExpsBox);a.startup();this.own(b.after(a,"_destroySelf",k.hitch(this,this._checkFilterNumbers)));this._checkFilterNumbers()},_addFilterSet:function(a){a={url:this.url,layerInfo:this._layerDefinition,stringFieldType:this._stringFieldType,dateFieldType:this._dateFieldType,numberFieldTypes:this._numberFieldTypes,
partsObj:a,OPERATORS:k.mixin({},this.OPERATORS),enableAskForValues:this.enableAskForValues,isHosted:this.isHosted};a=new h(a);a.placeAt(this.allExpsBox);a.startup();this.own(b.after(a,"_destroySelf",k.hitch(this,this._checkFilterNumbers)));this._checkFilterNumbers()},_destroyAllFilters:function(){for(var a=this._getAllSingleFiltersAndFilterSets();0<a.length;)a[0].destroy(),a.splice(0,1);this._checkFilterNumbers()},_getAllSingleFiltersAndFilterSetsDoms:function(){return m(".allExpsBox\x3e.jimu-single-filter,.allExpsBox\x3e.jimu-filter-set",
this.contentSection)},_getAllSingleFiltersAndFilterSets:function(){var a=this._getAllSingleFiltersAndFilterSetsDoms();return e.map(a,k.hitch(this,function(a){return q.byNode(a)}))},_checkFilterNumbers:function(){var a=this._getAllSingleFiltersAndFilterSetsDoms();1<a.length?p.setStyle(this.matchMsg,"display","block"):p.setStyle(this.matchMsg,"display","none");0<a.length?p.setStyle(this.noFilterTipSection,"display","none"):p.setStyle(this.noFilterTipSection,"display","block");e.forEach(a,k.hitch(this,
function(a,h){p.removeClass(a,"even-filter");p.removeClass(a,"odd-filter");p.addClass(a,0===(h+1)%2?"even-filter":"odd-filter")}))},_showErrorOptions:function(a){console.error(a);p.setStyle(this.errorSection,"display","none");this.errorTip.innerHTML=a;this.loading.hide()},_onBtnAddSetClick:function(){this._layerDefinition&&this._validOptions&&this._addFilterSet()},_onBtnAddExpClick:function(){this._layerDefinition&&this._validOptions&&this._addSingleFilter()}})})},"jimu/dijit/_SingleFilter":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_SingleFilter.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/json dojo/on dojo/store/Memory esri/request jimu/utils jimu/dijit/CheckBox dijit/form/Select dijit/form/FilteringSelect dijit/form/ValidationTextBox dijit/form/DateTextBox dijit/form/NumberTextBox".split(" "),
function(l,g,r,n,f,c,d,q,k,p,e,b,m){return l([g,r,n],{templateString:f,baseClass:"jimu-single-filter",declaredClass:"jimu.dijit._SingleFilter",nls:null,url:null,layerInfo:null,stringFieldType:"",dateFieldType:"",numberFieldTypes:[],supportFieldTypes:[],part:null,OPERATORS:null,enableAskForValues:!1,isHosted:!1,postMixInProperties:function(){this.supportFieldTypes=[];this.supportFieldTypes.push(this.stringFieldType);this.supportFieldTypes.push(this.dateFieldType);this.supportFieldTypes=this.supportFieldTypes.concat(this.numberFieldTypes);
this.nls=window.jimuNls.filterBuilder;this.nls.caseSensitive||(this.nls.caseSensitive="Case Sensitive")},postCreate:function(){this.inherited(arguments);this._initSelf()},toJson:function(){var a=null,b=this._isUseAskForValues(),e=this._getSelectedFilteringItem(this.fieldsSelect);if(!e)return null;a={fieldObj:"",operator:"",valueObj:"",interactiveObj:"",caseSensitive:!1};if(b){if(!this.promptTB.validate())return this._showValidationErrorTip(this.promptTB),null;a.interactiveObj={prompt:this.promptTB.get("value"),
hint:this.hintTB.get("value")}}a.fieldObj={name:e.name,label:e.name,shortType:e.shortType,type:e.type};if("none"===this.operatorsSelect.get("value"))return null;a.operator=this.operatorsSelect.get("value");a.valueObj={isValid:!0,type:""};var h=e.shortType;if(this.valueRadio.checked)if(a.valueObj.type="value","string"===h)if(a.operator===this.OPERATORS.stringOperatorIsBlank||a.operator===this.OPERATORS.stringOperatorIsNotBlank)a.valueObj.value=null;else if(this._isFieldCoded(e)&&a.operator===this.OPERATORS.stringOperatorIs){if(!this.stringCodedValuesFS.validate())return this._showValidationErrorTip(this.stringCodedValuesFS),
null;b=this._getSelectedFilteringItem(this.stringCodedValuesFS);a.valueObj.value=b?b.code:""}else{if(!this.stringTextBox.validate())return this._showValidationErrorTip(this.stringTextBox),null;a.valueObj.value=this.stringTextBox.get("value")}else if("number"===h)if(a.operator===this.OPERATORS.numberOperatorIsBlank||a.operator===this.OPERATORS.numberOperatorIsNotBlank)a.valueObj.value=null;else if(a.operator===this.OPERATORS.numberOperatorIsBetween||a.operator===this.OPERATORS.numberOperatorIsNotBetween){if(!this.numberTextBox1.validate())return this._showValidationErrorTip(this.numberTextBox1),
null;if(!this.numberTextBox2.validate())return this._showValidationErrorTip(this.numberTextBox2),null;a.valueObj.value1=this._getValueForNumberTextBox(this.numberTextBox1);a.valueObj.value2=this._getValueForNumberTextBox(this.numberTextBox2);a.valueObj.isValid=m.isValidNumber(a.valueObj.value1)&&m.isValidNumber(a.valueObj.value2)}else{if(this._isFieldCoded(e)&&a.operator===this.OPERATORS.numberOperatorIs){if(!this.numberCodedValuesFS.validate())return this._showValidationErrorTip(this.numberCodedValuesFS),
null;b=this._getSelectedFilteringItem(this.numberCodedValuesFS);a.valueObj.value=b?parseFloat(b.code):null}else{if(!this.numberTextBox.validate())return this._showValidationErrorTip(this.numberTextBox),null;a.valueObj.value=this._getValueForNumberTextBox(this.numberTextBox)}a.valueObj.isValid=m.isValidNumber(a.valueObj.value)}else{if("date"===h)if(a.operator===this.OPERATORS.dateOperatorIsBlank||a.operator===this.OPERATORS.dateOperatorIsNotBlank)a.valueObj.value=null;else if(a.operator===this.OPERATORS.dateOperatorIsBetween||
a.operator===this.OPERATORS.dateOperatorIsNotBetween){if(!this.dateTextBox1.validate())return this._showValidationErrorTip(this.dateTextBox1),null;if(!this.dateTextBox2.validate())return this._showValidationErrorTip(this.dateTextBox2),null;a.valueObj.value1=this.dateTextBox1.get("value").toDateString();a.valueObj.value2=this.dateTextBox2.get("value").toDateString()}else{if(!this.dateTextBox.validate())return this._showValidationErrorTip(this.dateTextBox),null;a.valueObj.value=this.dateTextBox.get("value").toDateString()}}else if(this.fieldRadio.checked){b=
this._getSelectedFilteringItem(this.fieldsSelect2);if(!b)return this._showValidationErrorTip(this.fieldsSelect2),null;a.valueObj.value=b.name;a.valueObj.label=b.name;a.valueObj.type="field"}else if(this.uniqueRadio&&this.uniqueRadio.checked)if(a.valueObj.type="unique",e=this._getSelectedFilteringItem(this.uniqueValuesSelect))"string"===h?a.valueObj.value=e.value:"number"===h&&(a.valueObj.value=parseFloat(e.value));else if(b)"string"===h?a.valueObj.value="":"number"===h&&(a.valueObj.value=null,a.valueObj.isValid=
!1);else return this._showValidationErrorTip(this.uniqueValuesSelect),null;if("string"===h)switch(a.operator){case this.OPERATORS.stringOperatorStartsWith:case this.OPERATORS.stringOperatorEndsWith:case this.OPERATORS.stringOperatorContains:case this.OPERATORS.stringOperatorDoesNotContain:a.caseSensitive=this.cbxCaseSensitive.getValue()}return a},showDelteIcon:function(){d.setStyle(this.btnDelete,"display","inline-block")},hideDeleteIcon:function(){d.setStyle(this.btnDelete,"display","none")},_showCaseSensitive:function(){d.setStyle(this.cbxCaseSensitive.domNode,
"display","inline-block")},_hideCaseSensitive:function(){d.setStyle(this.cbxCaseSensitive.domNode,"display","none")},_getProcessedString:function(a){return m.isNotEmptyString(a,!0)?a:""},_getProcessedNumber:function(a){return m.isValidNumber(a)?a:null},_setValueForStringTextBox:function(a,b){b=this._getProcessedString(b);a.set("value",b)},_setValueForNumberTextBox:function(a,b){m.isValidNumber(b)&&a.set("value",b)},_getValueForNumberTextBox:function(a){a=a.get("value");return this._getProcessedNumber(a)},
_initSelf:function(){this.isHosted&&(this.cbxCaseSensitive.setValue(!1),this.cbxCaseSensitive.setStatus(!1),this.cbxCaseSensitive.domNode.title=this.nls.notSupportCaseSensitiveTip);this.own(p(this.cbxAskValues,"status-change",c.hitch(this,this._onCbxAskValuesStatusChanged)));this.cbxAskValues.onChange=c.hitch(this,this._onCbxAskValuesClicked);this.own(p(this.fieldsSelect,"MouseEnter",c.hitch(this,this._updateFieldsSelectTitle)));this.own(p(this.operatorsSelect,"MouseEnter",c.hitch(this,this._updateOperatorsSelectTitle)));
this.own(p(this.dateTextBox1,"MouseEnter",c.hitch(this,this._updateDateTextBox1Title)));this.own(p(this.dateTextBox2,"MouseEnter",c.hitch(this,this._updateDateTextBox2Title)));var a=new e({idProperty:"id",data:[]});this.uniqueValuesSelect.set("store",a);this.enableAskForValues?(d.setStyle(this.cbxAskValues.domNode,"display","inline-block"),d.setStyle(this.promptSection,"display","block")):(d.setStyle(this.cbxAskValues.domNode,"display","none"),d.setStyle(this.promptSection,"display","none"));this.layerInfo=
c.mixin({},this.layerInfo);this._initRadios();a=0;this.layerInfo.currentVersion&&(a=parseFloat(this.layerInfo.currentVersion));if(10.1>a||this._isStreamServer(this.url))d.destroy(this.uniqueTd),this.uniqueRadio=null;if((a=this.layerInfo.fields)&&0<a.length)a=q.filter(a,c.hitch(this,function(a){return 0<=this.supportFieldTypes.indexOf(a.type)})),this._enableRadios(),this._initFieldsSelect(a)},_isStreamServer:function(a){a=(a||"").replace(/\/*$/g,"");return/\/StreamServer$/gi.test(a)},_updateFieldsSelectTitle:function(){this.fieldsSelect.domNode.title=
"";var a=this._getSelectedFilteringItem(this.fieldsSelect);a&&(this.fieldsSelect.domNode.title=a.displayName||a.alias||a.name)},_updateOperatorsSelectTitle:function(){this.operatorsSelect.domNode.title="";var a=this.operatorsSelect.get("value");a&&(a=this.operatorsSelect.getOptions(a),this.operatorsSelect.domNode.title=a.label)},_updateDateTextBox1Title:function(){var a=this.dateTextBox1.get("displayedValue")||"";this.dateTextBox1.domNode.title=a},_updateDateTextBox2Title:function(){var a=this.dateTextBox2.get("displayedValue")||
"";this.dateTextBox2.domNode.title=a},_showValidationErrorTip:function(a){try{!a.validate()&&a.domNode&&a.focusNode&&(a.focusNode.focus(),a.focusNode.blur())}catch(b){console.error(b)}},_focusValidationTextBox:function(a){try{a&&a.focusNode&&a.focusNode.focus()}catch(b){console.error(b)}},_isFieldCoded:function(a){return(a=a.domain)&&"codedValue"===a.type&&a.codedValues&&0<a.codedValues.length},_getSelectedFilteringItem:function(a){if(a.validate()){var b=a.get("item");if(b)return b}this._showValidationErrorTip(a);
return null},_getShortTypeByFieldType:function(a){return a===this.stringFieldType?"string":a===this.dateFieldType?"date":0<=this.numberFieldTypes.indexOf(a)?"number":null},_getOperatorsByShortType:function(a){var b=[];"string"===a?b=[this.OPERATORS.stringOperatorIs,this.OPERATORS.stringOperatorIsNot,this.OPERATORS.stringOperatorStartsWith,this.OPERATORS.stringOperatorEndsWith,this.OPERATORS.stringOperatorContains,this.OPERATORS.stringOperatorDoesNotContain,this.OPERATORS.stringOperatorIsBlank,this.OPERATORS.stringOperatorIsNotBlank]:
"number"===a?b=[this.OPERATORS.numberOperatorIs,this.OPERATORS.numberOperatorIsNot,this.OPERATORS.numberOperatorIsAtLeast,this.OPERATORS.numberOperatorIsLessThan,this.OPERATORS.numberOperatorIsAtMost,this.OPERATORS.numberOperatorIsGreaterThan,this.OPERATORS.numberOperatorIsBetween,this.OPERATORS.numberOperatorIsNotBetween,this.OPERATORS.numberOperatorIsBlank,this.OPERATORS.numberOperatorIsNotBlank]:"date"===a&&(b=[this.OPERATORS.dateOperatorIsOn,this.OPERATORS.dateOperatorIsNotOn,this.OPERATORS.dateOperatorIsBefore,
this.OPERATORS.dateOperatorIsAfter,this.OPERATORS.dateOperatorIsBetween,this.OPERATORS.dateOperatorIsNotBetween,this.OPERATORS.dateOperatorIsBlank,this.OPERATORS.dateOperatorIsNotBlank]);return b},_initFieldsSelect:function(a){a=q.map(a,c.hitch(this,function(a,b){var e=c.mixin({},a);e.id=b;e.shortType=this._getShortTypeByFieldType(a.type);e.alias||(e.alias=e.name);var d="";"string"===e.shortType?d=this.nls.string:"number"===e.shortType?d=this.nls.number:"date"===e.shortType&&(d=this.nls.date);e.displayName=
e.alias+" ("+d+")";return e}));if(0<a.length){var b=new e({data:a});this.fieldsSelect.set("store",b);this.fieldsSelect.set("value",a[0].id)}this.fieldsSelect.focusNode.focus();this.fieldsSelect.focusNode.blur();this._onFieldsSelectChange();this.part&&this._showPart(this.part)},_showPart:function(a){if((this.part=a)&&this.part.fieldObj&&this.part.operator&&this.part.valueObj){a=this.part.fieldObj.name;var b=this.part.operator;this.part.caseSensitive=!!this.part.caseSensitive;a=this.fieldsSelect.store.query({name:a});
if(0!==a.length&&(a=a[0]))this.fieldsSelect.set("value",a.id),setTimeout(c.hitch(this,function(){this.domNode&&(this._onFieldsSelectChange(),this.operatorsSelect.set("value",b),setTimeout(c.hitch(this,function(){this.domNode&&this._resetByFieldAndOperation(this.part)}),50),setTimeout(c.hitch(this,function(){if(this.domNode){var a=this.part.interactiveObj;a&&(this.cbxAskValues.check(),this._updatePrompt(),this.promptTB.set("value",a.prompt||""),this.hintTB.set("value",a.hint||""))}}),100))}),0)}},
_onFieldsSelectChange:function(){this._updateFieldsSelectTitle();this.operatorsSelect.removeOption(this.operatorsSelect.getOptions());this.operatorsSelect.addOption({value:"none",label:this.nls.none});this.valueRadio.checked=!0;var a=this._getSelectedFilteringItem(this.fieldsSelect);a&&(this.operatorsSelect.shortType=a.shortType,a=this._getOperatorsByShortType(a.shortType),this.operatorsSelect.removeOption(this.operatorsSelect.getOptions()),q.forEach(a,c.hitch(this,function(a){this.operatorsSelect.addOption({value:a,
label:this.nls[a]})})));this._onOperatorsSelectChange()},_onOperatorsSelectChange:function(){this._updateOperatorsSelectTitle();this.valueRadio.checked=!0;this._resetByFieldAndOperation()},_onRangeNumberBlur:function(){if(this.numberTextBox1.validate()&&this.numberTextBox2.validate()){var a=this._getValueForNumberTextBox(this.numberTextBox1),b=this._getValueForNumberTextBox(this.numberTextBox2);m.isValidNumber(a)&&m.isValidNumber(b)&&a>b&&(this._setValueForNumberTextBox(this.numberTextBox1,b),this._setValueForNumberTextBox(this.numberTextBox2,
a))}},_onRangeDateBlur:function(){if(this.dateTextBox1.validate()&&this.dateTextBox2.validate()){var a=this.dateTextBox1.get("value"),b=a.getTime(),e=this.dateTextBox2.get("value"),h=e.getTime();b>h&&(this.dateTextBox1.set("value",e),this.dateTextBox2.set("value",a))}},_initRadios:function(){var a="radio_"+m.getRandomString();this.valueRadio.name=a;this.fieldRadio.name=a;m.combineRadioCheckBoxWithLabel(this.valueRadio,this.valueLabel);m.combineRadioCheckBoxWithLabel(this.fieldRadio,this.fieldLabel);
this.own(p(this.valueRadio,"click",c.hitch(this,function(){this._resetByFieldAndOperation()})));this.own(p(this.fieldRadio,"click",c.hitch(this,function(){this._resetByFieldAndOperation()})));this.uniqueRadio&&(this.uniqueRadio.name=a,m.combineRadioCheckBoxWithLabel(this.uniqueRadio,this.uniqueLabel),this.own(p(this.uniqueRadio,"click",c.hitch(this,function(){this._resetByFieldAndOperation()}))));this._resetByFieldAndOperation()},_enableRadios:function(){this.valueRadio.disabled=!1;this.fieldRadio.disabled=
!1;this.uniqueRadio&&(this.uniqueRadio.disabled=!1)},_disableRadios:function(){this.valueRadio.disabled=!0;this.fieldRadio.disabled=!0;this.uniqueRadio&&(this.uniqueRadio.disabled=!0)},_resetByFieldAndOperation:function(a){var b=a&&a.valueObj;d.setStyle(this.attributeValueContainer,"display","block");this._enableRadios();this._hideCaseSensitive();b&&("value"===b.type?this.valueRadio.checked=!0:"field"===b.type?this.fieldRadio.checked=!0:"unique"===b.type&&this.uniqueRadio&&(this.uniqueRadio.checked=
!0));var e=this._getSelectedFilteringItem(this.fieldsSelect),h=e&&e.shortType,c=this.operatorsSelect.get("value");if(e)if("string"===h)switch(c){case this.OPERATORS.stringOperatorStartsWith:case this.OPERATORS.stringOperatorEndsWith:case this.OPERATORS.stringOperatorContains:case this.OPERATORS.stringOperatorDoesNotContain:this.valueRadio.checked=!0,this._disableRadios(),this._showCaseSensitive(),a&&this.cbxCaseSensitive.setValue(a.caseSensitive)}else if("number"===h)switch(c){case this.OPERATORS.numberOperatorIsBetween:case this.OPERATORS.numberOperatorIsNotBetween:this.valueRadio.checked=
!0,this._disableRadios()}else if("date"===h){switch(c){case this.OPERATORS.dateOperatorIsBetween:case this.OPERATORS.dateOperatorIsNotBetween:this.valueRadio.checked=!0,this._disableRadios()}this.uniqueRadio&&(this.uniqueRadio.disabled=!0,this.uniqueRadio.checked&&(this.valueRadio.checked=!0))}this._updateUIOfAttrValueContainer(e,c,b)},_updateUIOfAttrValueContainer:function(a,b,k){this._updatePrompt();var h=a&&a.shortType;if("string"===h||"number"===h||"date"===h)if(d.setStyle(this.attributeValueContainer,
"display","block"),this.valueRadio.checked)if(d.setStyle(this.fieldsSelect2.domNode,"display","none"),d.setStyle(this.uniqueValuesSelect.domNode,"display","none"),this._showAllValueBoxContainer(),this._resetValueTextBox(),"string"===h)d.setStyle(this.stringTextBoxContainer,"display","block"),d.setStyle(this.numberTextBoxContainer,"display","none"),d.setStyle(this.dateTextBoxContainer,"display","none"),this._isFieldCoded(a)&&b===this.OPERATORS.stringOperatorIs?(d.setStyle(this.stringCodedValuesFS.domNode,
"display","inline-block"),d.setStyle(this.stringTextBox.domNode,"display","none"),a=q.map(a.domain.codedValues,c.hitch(this,function(a,b){var h=c.mixin({},a);h.id=b;return h})),h=new e({data:a}),this.stringCodedValuesFS.set("store",h),k?(h=q.filter(a,c.hitch(this,function(a){return a.code===k.value})),0<h.length?this.stringCodedValuesFS.set("value",h[0].id):this.stringCodedValuesFS.set("value",a[0].id)):this.stringCodedValuesFS.set("value",a[0].id)):(d.setStyle(this.stringTextBox.domNode,"display",
"inline-block"),d.setStyle(this.stringCodedValuesFS.domNode,"display","none"),k&&this._setValueForStringTextBox(this.stringTextBox,k.value)),(b===this.OPERATORS.stringOperatorIsBlank||b===this.OPERATORS.stringOperatorIsNotBlank)&&d.setStyle(this.attributeValueContainer,"display","none");else if("number"===h){d.setStyle(this.stringTextBoxContainer,"display","none");d.setStyle(this.numberTextBoxContainer,"display","block");d.setStyle(this.dateTextBoxContainer,"display","none");if(b===this.OPERATORS.numberOperatorIsBetween||
b===this.OPERATORS.numberOperatorIsNotBetween){if(d.setStyle(this.numberTextBox.domNode,"display","none"),d.setStyle(this.numberRangeTable,"display","table"),d.setStyle(this.numberCodedValuesFS.domNode,"display","none"),k){var f;a=m.isValidNumber(k.value1);h=m.isValidNumber(k.value2);a&&h?(h=parseFloat(k.value1),f=parseFloat(k.value2),a=Math.min(h,f),h=Math.max(h,f),this.numberTextBox1.set("value",a),this.numberTextBox2.set("value",h)):a&&!h?(h=parseFloat(k.value1),this.numberTextBox1.set("value",
h)):!a&&h&&(f=parseFloat(k.value2),this.numberTextBox2.set("value",f))}}else if(d.setStyle(this.numberRangeTable,"display","none"),this._isFieldCoded(a)&&b===this.OPERATORS.numberOperatorIs)if(d.setStyle(this.numberTextBox.domNode,"display","none"),d.setStyle(this.numberCodedValuesFS.domNode,"display","inline-block"),a=q.map(a.domain.codedValues,c.hitch(this,function(a,b){var h=c.mixin({},a);h.id=b;return h})),h=new e({data:a}),this.numberCodedValuesFS.set("store",h),k&&!isNaN(k.value)){var t=parseFloat(k.value),
h=q.filter(a,c.hitch(this,function(a){return parseFloat(a.code)===t}));0<h.length?this.numberCodedValuesFS.set("value",h[0].id):this.numberCodedValuesFS.set("value",a[0].id)}else this.numberCodedValuesFS.set("value",a[0].id);else d.setStyle(this.numberTextBox.domNode,"display","inline-block"),d.setStyle(this.numberCodedValuesFS.domNode,"display","none"),k&&this._setValueForNumberTextBox(this.numberTextBox,k.value);(b===this.OPERATORS.numberOperatorIsBlank||b===this.OPERATORS.numberOperatorIsNotBlank)&&
d.setStyle(this.attributeValueContainer,"display","none")}else"date"===h&&(d.setStyle(this.stringTextBoxContainer,"display","none"),d.setStyle(this.numberTextBoxContainer,"display","none"),d.setStyle(this.dateTextBoxContainer,"display","block"),b===this.OPERATORS.dateOperatorIsBetween||b===this.OPERATORS.dateOperatorIsNotBetween?(d.setStyle(this.dateTextBox.domNode,"display","none"),d.setStyle(this.dateRangeTable,"display","table"),k&&(k.value1&&k.value2)&&(this.dateTextBox1.set("value",new Date(k.value1)),
this.dateTextBox2.set("value",new Date(k.value2)))):(d.setStyle(this.dateTextBox.domNode,"display","inline-block"),d.setStyle(this.dateRangeTable,"display","none"),k&&k.value&&this.dateTextBox.set("value",new Date(k.value))),(b===this.OPERATORS.dateOperatorIsBlank||b===this.OPERATORS.dateOperatorIsNotBlank)&&d.setStyle(this.attributeValueContainer,"display","none"));else this.fieldRadio.checked?(this._hideAllValueBoxContainer(),d.setStyle(this.uniqueValuesSelect.domNode,"display","none"),d.setStyle(this.fieldsSelect2.domNode,
"display","inline-block"),this._resetFieldsSelect2(),k&&k.value&&(b=this.fieldsSelect2.store.query({name:k.value}),0<b.length&&(b=b[0])&&this.fieldsSelect2.set("value",b.id))):this.uniqueRadio&&this.uniqueRadio.checked&&(this._hideAllValueBoxContainer(),d.setStyle(this.fieldsSelect2.domNode,"display","none"),d.setStyle(this.uniqueValuesSelect.domNode,"display","inline-block"),this._resetUniqueValuesSelect(k));else d.setStyle(this.attributeValueContainer,"display","none")},_showAllValueBoxContainer:function(){d.setStyle(this.allValueBoxContainer,
"display","block")},_hideAllValueBoxContainer:function(){d.setStyle(this.allValueBoxContainer,"display","none")},_resetValueTextBox:function(){this.stringTextBox.set("value","");this.numberTextBox.set("value","");this.dateTextBox.set("value",new Date)},_resetFieldsSelect2:function(){this.fieldsSelect2.set("displayedValue","");var a=new e({data:[]});this.fieldsSelect2.set("store",a);if(this.fieldsSelect.validate()){var b=this._getSelectedFilteringItem(this.fieldsSelect);if(b){var a=this.fieldsSelect.store.query({shortType:b.shortType}),
d=q.filter(a,c.hitch(this,function(a){return a.id!==b.id})),a=new e({data:d});this.fieldsSelect2.set("store",a);0<d.length&&this.fieldsSelect2.set("value",d[0].id)}}},_tryLocaleNumber:function(a){var b=m.localizeNumber(a);if(null===b||void 0===b)b=a;return b},_resetUniqueValuesSelect:function(a){this.uniqueValuesSelect.reset();this.uniqueValuesSelect.store.setData([]);if(this.layerInfo&&10.1<=parseFloat(this.layerInfo.currentVersion)){var e=this._getSelectedFilteringItem(this.fieldsSelect);if(e){var d=
this.url+"/generateRenderer",h=k.stringify({type:"uniqueValueDef",uniqueValueFields:[e.name]});b({url:d,content:{classificationDef:h,f:"json"},handleAs:"json",callbackParamName:"callback",timeout:15E3}).then(c.hitch(this,function(b){if(this.domNode){b=b&&b.uniqueValueInfos;var h=this._getSelectedFilteringItem(this.fieldsSelect);if(b&&h&&e.id===h.id){this.uniqueValuesSelect.store.setData([]);var d=-1,k=this._hasCodedValues(h);b=q.map(b,c.hitch(this,function(b,e){var c=b.value,m=c;"number"===h.shortType&&
(c=parseFloat(c),m=this._tryLocaleNumber(c));k&&(m=this._getDisplayNameOfCodedValues(c,h));m={id:e,value:c,label:m};a&&a.value===c&&(d=m.id);return m}));this.uniqueValuesSelect.store.setData(b);0<b.length&&0<=d&&(b=this.uniqueValuesSelect.store.get(d))&&this.uniqueValuesSelect.set("item",b)}}}),c.hitch(this,function(a){console.error(a)}))}}},_hasCodedValues:function(a){var b=!1;a.domain&&(a=a.domain.codedValues)&&0<a.length&&(b=!0);return b},_getDisplayNameOfCodedValues:function(a,b){var e=a;q.some(b.domain.codedValues,
function(b){return b.code===a?(e=b.name,!0):!1});return e},_onCbxAskValuesClicked:function(){this._updateRequiredProperty();this._updatePrompt()},_onCbxAskValuesStatusChanged:function(){this._updateRequiredProperty()},_isUseAskForValues:function(){return this.cbxAskValues.status&&this.cbxAskValues.checked},_isValueRequired:function(){return!this._isUseAskForValues()},_updateRequiredProperty:function(){var a=this._isValueRequired();this.stringTextBox.set("required",a);this.stringCodedValuesFS.set("required",
a);this.numberTextBox.set("required",a);this.numberTextBox1.set("required",a);this.numberTextBox2.set("required",a);this.numberCodedValuesFS.set("required",a);this.uniqueValuesSelect.set("required",a)},_updatePrompt:function(){this.promptTB.set("value","");this.hintTB.set("value","");this.cbxAskValues.setStatus(!0);d.setStyle(this.promptTable,"display","table");var a=this.operatorsSelect.get("value"),b=this.nls[a];this.fieldRadio.checked&&this.cbxAskValues.setStatus(!1);a===this.OPERATORS.stringOperatorIsBlank&&
this.cbxAskValues.setStatus(!1);a===this.OPERATORS.stringOperatorIsNotBlank&&this.cbxAskValues.setStatus(!1);a===this.OPERATORS.numberOperatorIsBlank&&this.cbxAskValues.setStatus(!1);a===this.OPERATORS.numberOperatorIsNotBlank&&this.cbxAskValues.setStatus(!1);a===this.OPERATORS.dateOperatorIsBlank&&this.cbxAskValues.setStatus(!1);a===this.OPERATORS.dateOperatorIsNotBlank&&this.cbxAskValues.setStatus(!1);if(this.cbxAskValues.status&&this.cbxAskValues.checked){d.setStyle(this.promptTable,"display",
"table");var e=this._getSelectedFilteringItem(this.fieldsSelect);e&&"none"!==a&&this.promptTB.set("value",(e.alias||e.name)+" "+b)}else d.setStyle(this.promptTable,"display","none")},_destroySelf:function(){this.destroy()}})})},"dijit/form/FilteringSelect":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],function(l,g,r,n,f){return l("dijit.form.FilteringSelect",[n,f],{required:!0,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened},
isValid:function(){return!!this.item||!this.required&&""==this.get("displayedValue")},_refreshState:function(){this.searchTimer||this.inherited(arguments)},_callbackSetLabel:function(c,d,f,k){d&&d[this.searchAttr]!==this._lastQuery||!d&&c.length&&this.store.getIdentity(c[0])!=this._lastQuery||(c.length?this.set("item",c[0],k):this.set("value","",k||void 0===k&&!this.focused,this.textbox.value,null))},_openResultList:function(c,d,f){d[this.searchAttr]===this._lastQuery&&(this.inherited(arguments),
void 0===this.item&&this.validate(!0))},_getValueAttr:function(){return this.valueNode.value},_getValueField:function(){return"value"},_setValueAttr:function(c,d,f,k){this._onChangeActive||(d=null);if(void 0===k){if(null===c||""===c)if(c="",!g.isString(f)){this._setDisplayedValueAttr(f||"",d);return}var p=this;this._lastQuery=c;r(this.store.get(c),function(e){p._callbackSetLabel(e?[e]:[],void 0,void 0,d)})}else this.valueNode.value=c,this.inherited(arguments,[c,d,f,k])},_setItemAttr:function(c,d,
f){this.inherited(arguments);this._lastDisplayedValue=this.textbox.value},_getDisplayQueryString:function(c){return c.replace(/([\\\*\?])/g,"\\$1")},_setDisplayedValueAttr:function(c,d){null==c&&(c="");if(!this._created){if(!("displayedValue"in this.params))return;d=!1}if(this.store){this.closeDropDown();var f=g.clone(this.query),k=this._getDisplayQueryString(c),p;this.store._oldAPI?p=k:(p=this._patternToRegExp(k),p.toString=function(){return k});this._lastQuery=f[this.searchAttr]=p;this._lastDisplayedValue=
this.textbox.value=c;this._set("displayedValue",c);var e=this,b={queryOptions:{ignoreCase:this.ignoreCase,deep:!0}};g.mixin(b,this.fetchProperties);this._fetchHandle=this.store.query(f,b);r(this._fetchHandle,function(c){e._fetchHandle=null;e._callbackSetLabel(c||[],f,b,d)},function(b){e._fetchHandle=null;e._cancelingQuery||console.error("dijit.form.FilteringSelect: "+b.toString())})}},undo:function(){this.set("displayedValue",this._lastDisplayedValue)}})})},"dijit/form/DateTextBox":function(){define(["dojo/_base/declare",
"../Calendar","./_DateTimeTextBox"],function(l,g,r){return l("dijit.form.DateTextBox",r,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:g,_selector:"date",maxHeight:Infinity,value:new Date("")})})},"dijit/Calendar":function(){define("dojo/_base/array dojo/date dojo/date/locale dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff ./CalendarLite ./_Widget ./_CssStateMixin ./_TemplatedMixin ./form/DropDownButton".split(" "),
function(l,g,r,n,f,c,d,q,k,p,e,b,m,a,v,s,h){var u=n("dijit.Calendar",[m,a,v],{baseClass:"dijitCalendar",cssStateNodes:{decrementMonth:"dijitCalendarArrow",incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},setValue:function(a){q.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",a)},_createMonthWidget:function(){return new u._MonthDropDownButton({id:this.id+"_mddb",
tabIndex:-1,onMonthSelect:p.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},postCreate:function(){this.inherited(arguments);this.own(e(this.domNode,"keydown",p.hitch(this,"_onKeyDown")),e(this.dateRowsNode,"mouseover",p.hitch(this,"_onDayMouseOver")),e(this.dateRowsNode,"mouseout",p.hitch(this,"_onDayMouseOut")),e(this.dateRowsNode,"mousedown",p.hitch(this,"_onDayMouseDown")),e(this.dateRowsNode,"mouseup",p.hitch(this,"_onDayMouseUp")))},_onMonthSelect:function(a){var b=
new this.dateClassObj(this.currentFocus);b.setDate(1);b.setMonth(a);a=this.dateModule.getDaysInMonth(b);var h=this.currentFocus.getDate();b.setDate(Math.min(h,a));this._setCurrentFocusAttr(b)},_onDayMouseOver:function(a){if((a=c.contains(a.target,"dijitCalendarDateLabel")?a.target.parentNode:a.target)&&(a.dijitDateValue&&!c.contains(a,"dijitCalendarDisabledDate")||a==this.previousYearLabelNode||a==this.nextYearLabelNode))c.add(a,"dijitCalendarHoveredDate"),this._currentNode=a},_onDayMouseOut:function(a){this._currentNode&&
!(a.relatedTarget&&a.relatedTarget.parentNode==this._currentNode)&&(a="dijitCalendarHoveredDate",c.contains(this._currentNode,"dijitCalendarActiveDate")&&(a+=" dijitCalendarActiveDate"),c.remove(this._currentNode,a),this._currentNode=null)},_onDayMouseDown:function(a){if((a=a.target.parentNode)&&a.dijitDateValue&&!c.contains(a,"dijitCalendarDisabledDate"))c.add(a,"dijitCalendarActiveDate"),this._currentNode=a},_onDayMouseUp:function(a){(a=a.target.parentNode)&&a.dijitDateValue&&c.remove(a,"dijitCalendarActiveDate")},
handleKey:function(a){var b=-1,h,e=this.currentFocus;switch(a.keyCode){case k.RIGHT_ARROW:b=1;case k.LEFT_ARROW:h="day";this.isLeftToRight()||(b*=-1);break;case k.DOWN_ARROW:b=1;case k.UP_ARROW:h="week";break;case k.PAGE_DOWN:b=1;case k.PAGE_UP:h=a.ctrlKey||a.altKey?"year":"month";break;case k.END:e=this.dateModule.add(e,"month",1),h="day";case k.HOME:e=new this.dateClassObj(e);e.setDate(1);break;default:return!0}h&&(e=this.dateModule.add(e,h,b));this._setCurrentFocusAttr(e);return!1},_onKeyDown:function(a){this.handleKey(a)||
(a.stopPropagation(),a.preventDefault())},onValueSelected:function(){},onChange:function(a){this.onValueSelected(a)},getClassForDate:function(){}});u._MonthDropDownButton=n("dijit.Calendar._MonthDropDownButton",h,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new u._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect})},_setMonthAttr:function(a){var h=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.dropDown.set("months",
h);this.containerNode.innerHTML=(6==b("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+this.dropDown.domNode.innerHTML+"\x3c/div\x3e")+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+h[a.getMonth()]+"\x3c/div\x3e"}});u._MonthDropDown=n("dijit.Calendar._MonthDropDown",[a,s,v],{months:[],baseClass:"dijitCalendarMonthMenu dijitMenu",templateString:"\x3cdiv data-dojo-attach-event\x3d'ondijitclick:_onClick'\x3e\x3c/div\x3e",_setMonthsAttr:function(a){this.domNode.innerHTML=
"";l.forEach(a,function(a,b){d.create("div",{className:"dijitCalendarMonthLabel",month:b,innerHTML:a},this.domNode)._cssState="dijitCalendarMonthLabel"},this)},_onClick:function(a){this.onChange(f.get(a.target,"month"))},onChange:function(){}});return u})},"dijit/CalendarLite":function(){define("dojo/_base/array dojo/_base/declare dojo/cldr/supplemental dojo/date dojo/date/locale dojo/date/stamp dojo/dom dojo/dom-class dojo/_base/lang dojo/on dojo/sniff dojo/string ./_WidgetBase ./_TemplatedMixin dojo/text!./templates/Calendar.html ./a11yclick ./hccss".split(" "),
function(l,g,r,n,f,c,d,q,k,p,e,b,m,a,v){var s=g("dijit.CalendarLite",[m,a],{templateString:v,dowTemplateString:'\x3cth class\x3d"dijitReset dijitCalendarDayLabelTemplate" role\x3d"columnheader" scope\x3d"col"\x3e\x3cspan class\x3d"dijitCalendarDayLabel"\x3e${d}\x3c/span\x3e\x3c/th\x3e',dateTemplateString:'\x3ctd class\x3d"dijitReset" role\x3d"gridcell" data-dojo-attach-point\x3d"dateCells"\x3e\x3cspan class\x3d"dijitCalendarDateLabel" data-dojo-attach-point\x3d"dateLabels"\x3e\x3c/span\x3e\x3c/td\x3e',
weekTemplateString:'\x3ctr class\x3d"dijitReset dijitCalendarWeekTemplate" role\x3d"row"\x3e${d}${d}${d}${d}${d}${d}${d}\x3c/tr\x3e',value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",dayOffset:-1,currentFocus:new Date,_setSummaryAttr:"gridNode",baseClass:"dijitCalendar dijitCalendarLite",_isValidDate:function(a){return a&&!isNaN(a)&&"object"==typeof a&&a.toString()!=this.constructor.prototype.value.toString()},_getValueAttr:function(){var a=this._get("value");if(a&&!isNaN(a)){var b=
new this.dateClassObj(a);b.setHours(0,0,0,0);b.getDate()<a.getDate()&&(b=this.dateModule.add(b,"hour",1));return b}return null},_setValueAttr:function(a,b){"string"==typeof a&&(a=c.fromISOString(a));a=this._patchDate(a);if(this._isValidDate(a)&&!this.isDisabledDate(a,this.lang)){if(this._set("value",a),this.set("currentFocus",a),this._markSelectedDates([a]),this._created&&(b||"undefined"==typeof b))this.onChange(this.get("value"))}else this._set("value",null),this._markSelectedDates([])},_patchDate:function(a){a&&
(a=new this.dateClassObj(a),a.setHours(1,0,0,0));return a},_setText:function(a,b){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(a.ownerDocument.createTextNode(b))},_populateGrid:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);var a=this._patchDate(a),b=a.getDay(),e=this.dateModule.getDaysInMonth(a),c=this.dateModule.getDaysInMonth(this.dateModule.add(a,"month",-1)),d=new this.dateClassObj,k=0<=this.dayOffset?this.dayOffset:r.getFirstDayOfWeek(this.lang);k>b&&
(k-=7);if(!this.summary){var m=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.gridNode.setAttribute("summary",m[a.getMonth()])}this._date2cell={};l.forEach(this.dateCells,function(m,f){var q=f+k,p=new this.dateClassObj(a),g="dijitCalendar",l=0;q<b?(q=c-b+q+1,l=-1,g+="Previous"):q>=b+e?(q=q-b-e+1,l=1,g+="Next"):(q=q-b+1,g+="Current");l&&(p=this.dateModule.add(p,"month",l));p.setDate(q);this.dateModule.compare(p,d,"date")||(g="dijitCalendarCurrentDate "+g);this.isDisabledDate(p,
this.lang)?(g="dijitCalendarDisabledDate "+g,m.setAttribute("aria-disabled","true")):(g="dijitCalendarEnabledDate "+g,m.removeAttribute("aria-disabled"),m.setAttribute("aria-selected","false"));(l=this.getClassForDate(p,this.lang))&&(g=l+" "+g);m.className=g+"Month dijitCalendarDateTemplate";g=p.valueOf();this._date2cell[g]=m;m.dijitDateValue=g;this._setText(this.dateLabels[f],p.getDateLocalized?p.getDateLocalized(this.lang):p.getDate())},this)},_populateControls:function(){var a=new this.dateClassObj(this.currentFocus);
a.setDate(1);this.monthWidget.set("month",a);var b=a.getFullYear()-1,e=new this.dateClassObj;l.forEach(["previous","current","next"],function(a){e.setFullYear(b++);this._setText(this[a+"YearLabelNode"],this.dateLocaleModule.format(e,{selector:"year",locale:this.lang}))},this)},goToToday:function(){this.set("value",new this.dateClassObj)},constructor:function(a){this.dateModule=a.datePackage?k.getObject(a.datePackage,!1):n;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=a.datePackage?
k.getObject(a.datePackage+".locale",!1):f},_createMonthWidget:function(){return s._MonthWidget({id:this.id+"_mddb",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},buildRendering:function(){var a=this.dowTemplateString,e=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),c=0<=this.dayOffset?this.dayOffset:r.getFirstDayOfWeek(this.lang);this.dayCellsHtml=b.substitute([a,a,a,a,a,a,a].join(""),{d:""},function(){return e[c++%7]});a=b.substitute(this.weekTemplateString,
{d:this.dateTemplateString});this.dateRowsHtml=[a,a,a,a,a,a].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);d.setSelectable(this.domNode,!1);a=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();this.set("currentFocus",a,!1)},postCreate:function(){this.inherited(arguments);this._connectControls()},_connectControls:function(){var a=k.hitch(this,function(a,b,e){this[a].dojoClick=!0;return p(this[a],"click",k.hitch(this,function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,
b,e))}))});this.own(a("incrementMonth","month",1),a("decrementMonth","month",-1),a("nextYearLabelNode","year",1),a("previousYearLabelNode","year",-1))},_setCurrentFocusAttr:function(a,b){var c=this.currentFocus,d=this._getNodeByDate(c);a=this._patchDate(a);this._set("currentFocus",a);if(!this._date2cell||0!=this.dateModule.difference(c,a,"month"))this._populateGrid(),this._populateControls(),this._markSelectedDates([this.value]);c=this._getNodeByDate(a);c.setAttribute("tabIndex",this.tabIndex);(this.focused||
b)&&c.focus();d&&d!=c&&(e("webkit")?d.setAttribute("tabIndex","-1"):d.removeAttribute("tabIndex"))},focus:function(){this._setCurrentFocusAttr(this.currentFocus,!0)},_onDayClick:function(a){a.stopPropagation();a.preventDefault();for(a=a.target;a&&!a.dijitDateValue;a=a.parentNode);a&&!q.contains(a,"dijitCalendarDisabledDate")&&this.set("value",a.dijitDateValue)},_getNodeByDate:function(a){return(a=this._patchDate(a))&&this._date2cell?this._date2cell[a.valueOf()]:null},_markSelectedDates:function(a){function b(a,
e){q.toggle(e,"dijitCalendarSelectedDate",a);e.setAttribute("aria-selected",a?"true":"false")}l.forEach(this._selectedCells||[],k.partial(b,!1));this._selectedCells=l.filter(l.map(a,this._getNodeByDate,this),function(a){return a});l.forEach(this._selectedCells,k.partial(b,!0))},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});s._MonthWidget=g("dijit.CalendarLite._MonthWidget",m,{_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",
this.lang,a),c=6==e("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+l.map(b,function(a){return"\x3cdiv\x3e"+a+"\x3c/div\x3e"}).join("")+"\x3c/div\x3e";this.domNode.innerHTML=c+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+b[a.getMonth()]+"\x3c/div\x3e"}});return s})},"dijit/form/_DateTimeTextBox":function(){define("dojo/date dojo/date/locale dojo/date/stamp dojo/_base/declare dojo/_base/lang ./RangeBoundTextBox ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),
function(l,g,r,n,f,c,d,q){new Date("X");return n("dijit.form._DateTimeTextBox",[c,d],{templateString:q,hasDownArrow:!0,cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_unboundedConstraints:{},pattern:g.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},compare:function(c,d){var e=this._isInvalidDate(c),b=this._isInvalidDate(d);if(e||b)return e&&b?0:!e?1:-1;var e=this.format(c,this._unboundedConstraints),b=this.format(d,this._unboundedConstraints),
m=this.parse(e,this._unboundedConstraints),a=this.parse(b,this._unboundedConstraints);return e==b?0:l.compare(m,a,this._selector)},autoWidth:!0,format:function(c,d){return!c?"":this.dateLocaleModule.format(c,d)},parse:function(c,d){return this.dateLocaleModule.parse(c,d)||(this._isEmpty(c)?null:void 0)},serialize:function(c,d){c.toGregorian&&(c=c.toGregorian());return r.toISOString(c,d)},dropDownDefaultValue:new Date,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(c){c=
c||{};this.dateModule=c.datePackage?f.getObject(c.datePackage,!1):l;this.dateClassObj=this.dateModule.Date||Date;this.dateClassObj instanceof Date||(this.value=new this.dateClassObj(this.value));this.dateLocaleModule=c.datePackage?f.getObject(c.datePackage+".locale",!1):g;this._set("pattern",this.dateLocaleModule.regexp);this._invalidDate=this.constructor.prototype.value.toString()},buildRendering:function(){this.inherited(arguments);this.hasDownArrow||(this._buttonNode.style.display="none");this.hasDownArrow||
(this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick")},_setConstraintsAttr:function(c){c.selector=this._selector;c.fullYear=!0;var d=r.fromISOString;"string"==typeof c.min&&(c.min=d(c.min),this.dateClassObj instanceof Date||(c.min=new this.dateClassObj(c.min)));"string"==typeof c.max&&(c.max=d(c.max),this.dateClassObj instanceof Date||(c.max=new this.dateClassObj(c.max)));this.inherited(arguments);this._unboundedConstraints=f.mixin({},this.constraints,{min:null,max:null})},_isInvalidDate:function(c){return!c||
isNaN(c)||"object"!=typeof c||c.toString()==this._invalidDate},_setValueAttr:function(c,d,e){void 0!==c&&("string"==typeof c&&(c=r.fromISOString(c)),this._isInvalidDate(c)&&(c=null),c instanceof Date&&!(this.dateClassObj instanceof Date)&&(c=new this.dateClassObj(c)));this.inherited(arguments,[c,d,e]);this.value instanceof Date&&(this.filterString="");!1!==d&&this.dropDown&&this.dropDown.set("value",c,!1)},_set:function(c,d){if("value"==c){d instanceof Date&&!(this.dateClassObj instanceof Date)&&
(d=new this.dateClassObj(d));var e=this._get("value");if(e instanceof this.dateClassObj&&0==this.compare(d,e))return}this.inherited(arguments)},_setDropDownDefaultValueAttr:function(c){this._isInvalidDate(c)&&(c=new this.dateClassObj);this._set("dropDownDefaultValue",c)},openDropDown:function(c){this.dropDown&&this.dropDown.destroy();var d=f.isString(this.popupClass)?f.getObject(this.popupClass,!1):this.popupClass,e=this,b=this.get("value");this.dropDown=new d({onChange:function(b){e.set("value",
b,!0)},id:this.id+"_popup",dir:e.dir,lang:e.lang,value:b,textDir:e.textDir,currentFocus:!this._isInvalidDate(b)?b:this.dropDownDefaultValue,constraints:e.constraints,filterString:e.filterString,datePackage:e.datePackage,isDisabledDate:function(b){return!e.rangeCheck(b,e.constraints)}});this.inherited(arguments)},_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(c,d){this._setValueAttr(this.parse(c,this.constraints),d,c)}})})},"jimu/dijit/_FilterSet":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_FilterSet.html dijit/registry dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/aspect dojo/query ./_SingleFilter".split(" "),
function(l,g,r,n,f,c,d,q,k,p,e,b,m){return l([g,r,n],{templateString:f,baseClass:"jimu-filter-set",nls:null,url:null,layerInfo:null,stringFieldType:"",dateFieldType:"",numberFieldTypes:[],partsObj:null,OPERATORS:null,enableAskForValues:!1,isHosted:!1,postMixInProperties:function(){this.nls=window.jimuNls.filterBuilder;var a=this.nls.matchMsgSet.split("${any_or_all}");this.nls.strMatchMsgPart1=a[0]||"";this.nls.strMatchMsgPart2=a[1]||"";this.inherited(arguments)},postCreate:function(){this.inherited(arguments);
this._initSelf()},toJson:function(){var a=b(".jimu-single-filter",this.allExpsBox),a=k.map(a,d.hitch(this,function(a){return c.byNode(a).toJson()}));return k.every(a,d.hitch(this,function(a){return!!a}))&&0<a.length?{logicalOperator:this.allAnySelect.value,parts:a}:null},showDelteIcon:function(){q.setStyle(this.btnDelete,"display","block")},hideDeleteIcon:function(){q.setStyle(this.btnDelete,"display","none")},_initSelf:function(){this.own(p(this.btnAdd,"click",d.hitch(this,this._addSingleFilter)));
if(this.partsObj){this.allAnySelect.value=this.partsObj.logicalOperator;var a=this.partsObj.parts||[];0===a.length?(this._addSingleFilter(),this._addSingleFilter()):1===a.length?(this._addSingleFilter(a[0]),this._addSingleFilter()):k.forEach(a,d.hitch(this,function(a){this._addSingleFilter(a)}))}else this._addSingleFilter(),this._addSingleFilter()},_addSingleFilter:function(a){a=new m({url:this.url,layerInfo:this.layerInfo,stringFieldType:this.stringFieldType,dateFieldType:this.dateFieldType,numberFieldTypes:this.numberFieldTypes,
part:a,OPERATORS:this.OPERATORS,enableAskForValues:this.enableAskForValues,isHosted:this.isHosted,style:{margin:"15px auto 0 auto",border:0,background:"inherit"}});a.placeAt(this.allExpsBox);a.startup();this.own(e.after(a,"_destroySelf",d.hitch(this,this._checkFilterNumbers)));this._checkFilterNumbers()},_checkFilterNumbers:function(){var a=b(".jimu-single-filter",this.allExpsBox),e=2<a.length;k.forEach(a,d.hitch(this,function(a){a=c.byNode(a);e?a.showDelteIcon():a.hideDeleteIcon()}))},_destroySelf:function(){this.destroy()}})})},
"jimu/dijit/LayerChooserFromMapWithDropbox":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on dojo/Evented dojo/Deferred dijit/popup dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/LayerChooserFromMapWithDropbox.html jimu/LayerInfos/LayerInfos".split(" "),function(l,g,r,n,f,c,d,q,k,p,e){return l([q,k,f],{templateString:p,baseClass:"jimu-layer-chooser-from-map-withdropbox",declaredClass:"jimu.dijit.LayerChooserFromMapWithDropbox",_selectedItem:null,_isLayerChooserShow:!1,
layerInfosObj:null,layerChooser:null,postCreate:function(){this.inherited(arguments);this.layerInfosObj=e.getInstanceSync();r.addClass(this.layerChooser.domNode,"jimu-layer-chooser-from-map-withdropbox-popup");this.layerChooser.domNode.style.zIndex=1;this.layerChooser.tree.domNode.style.borderTop="0";this.own(n(this.layerChooser,"tree-click",g.hitch(this,this._onTreeClick)));this.own(n(this.layerChooser,"update",g.hitch(this,this._onLayerChooserUpdate)));this.own(n(document.body,"click",g.hitch(this,
this._onBodyClicked)))},destroy:function(){this.hideLayerChooser();this.layerChooser&&this.layerChooser.destroy();this.layerChooser=null;this.inherited(arguments)},getLayerChooser:function(){return this.layerChooser},setSelectedLayer:function(b){var e=new c;if(b){var a=this.layerInfosObj.getLayerInfoById(b.id);a?this.layerChooser.filter(a).then(g.hitch(this,function(c){c?(this._onSelectNewItem({layerInfo:a,name:a.title,url:b.url}),e.resolve(!0)):e.resolve(!1)}),g.hitch(this,function(){e.resolve(!1)})):
e.resolve(!1)}else this._onSelectNewItem(null),e.resolve(!0);return e},getSelectedItem:function(){return this._selectedItem},getSelectedItems:function(){return[this._selectedItem]},_onBodyClicked:function(b){b=b.target||b.srcElement;b===this.domNode||r.isDescendant(b,this.domNode)||b===this.layerChooser.domNode||r.isDescendant(b,this.layerChooser.domNode)||this.hideLayerChooser()},_onDropDownClick:function(b){b.stopPropagation();b.preventDefault();this._isLayerChooserShow?this.hideLayerChooser():
this.showLayerChooser()},_getSelectedItems:function(){return this.layerChooser.getSelectedItems()},showLayerChooser:function(){var b=this.domNode.clientWidth;200>b&&(b=200);this.layerChooser.domNode.style.width=b+2+"px";d.open({parent:this,popup:this.layerChooser,around:this.domNode});(b=this.layerChooser.domNode.parentNode)&&r.addClass(b,"jimu-layer-chooser-from-map-withdropbox-popup");this._isLayerChooserShow=!0},hideLayerChooser:function(){d.close(this.layerChooser);this._isLayerChooserShow=!1},
_onLayerChooserUpdate:function(){this._selectedItem&&this.layerChooser.onlyShowVisible&&!this._selectedItem.layerInfo.isShowInMap()&&(this._selectedItem=null,this.emit("selection-change",[]))},_onSelectNewItem:function(b){var c=g.getObject("layerInfo.id",!1,this._selectedItem)||-1,a=g.getObject("layerInfo.id",!1,b)||-1,c=c!==a;this._selectedItem=b;this.hideLayerChooser();b=g.getObject("layerInfo.title",!1,this._selectedItem)||"";this.layerNameNode.innerHTML=b;b=g.getObject("layerInfo.layerObject",
!1,this._selectedItem);c&&this.emit("selection-change",[b])},_onTreeClick:function(){var b=this._getSelectedItems();this._onSelectNewItem(0<b.length?b[0]:null)}})})},"widgets/Filter/setting/CustomFeaturelayerChooserFromMap":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/Deferred","jimu/dijit/LayerChooserFromMap","jimu/dijit/FeaturelayerChooserFromMap"],function(l,g,r,n,f){return l([f],{postMixInProperties:function(){this.inherited(arguments);this.filter=g.hitch(this,n.andCombineFilters([this.filter,
g.hitch(this,this._customFilter)]))},_customFilter:function(c){var d=new r;c.getLayerObject().then(g.hitch(this,function(c){"esri.layers.FeatureLayer"===c.declaredClass?d.resolve(!0):"esri.layers.ArcGISDynamicMapServiceLayer"===c.declaredClass?d.resolve(10<=c.version):d.resolve(!1)}),g.hitch(this,function(c){console.error(c);d.resolve(!1)}));return d},_customFilter2:function(c){var d=new r;c.parentLayerInfo?this._getAncestorLayerInfo(c).getLayerObject().then(g.hitch(this,function(c){d.resolve("esri.layers.ArcGISDynamicMapServiceLayer"===
c.declaredClass)}),g.hitch(this,function(c){console.error(c);d.resolve(!1)})):"esri.layers.FeatureLayer"===c.declaredClass?d.resolve(!0):"esri.layers.ArcGISDynamicMapServiceLayer"===c.declaredClass?(c.getLayerObject().then(g.hitch(this,function(c){d.resolve(10<=c.version)}),g.hitch(this,function(c){console.error(c);d.resolve(!1)})),d.resolve(!0)):d.resolve(!1);return d},_getAncestorLayerInfo:function(c){for(;c.parentLayerInfo;)c=c.parentLayerInfo;return c}})})},"jimu/dijit/LayerChooserFromMap":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/on dojo/store/Memory dojo/Deferred dojo/store/Observable dijit/tree/ObjectStoreModel dojo/promise/all dojo/_base/lang dojo/_base/html dojo/_base/array jimu/utils jimu/dijit/_Tree jimu/LayerInfos/LayerInfos jimu/dijit/LoadingIndicator".split(" "),
function(l,g,r,n,f,c,d,q,k,p,e,b,m,a,v,s,h,u){var t=l([g,r,n,f],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"errorTipSection" class\x3d"error-tip-section"\x3e\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\x3cspan class\x3d"jimu-state-error-text" data-dojo-attach-point\x3d"errTip"\x3e${nls.noLayersTip}\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_treeClass:"layer-chooser-tree",createMapResponse:null,multiple:!1,onlyShowVisible:!1,
updateWhenLayerInfosIsShowInMapChanged:!1,postMixInProperties:function(){this.nls=window.jimuNls.basicLayerChooserFromMap},postCreate:function(){this.inherited(arguments);m.addClass(this.domNode,"jimu-basic-layer-chooser-from-map");this.multiple=!!this.multiple;this.shelter=new u({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup();this._createTree();this.basicFilter=b.hitch(this,this.basicFilter);this.filter=t.andCombineFilters([this.basicFilter,this.filter]);this.createMapResponse&&
this.setCreateMapResponse(this.createMapResponse)},basicFilter:function(a){var b=new q;this.onlyShowVisible?b.resolve(a.isShowInMap()):b.resolve(!0);return b},filter:function(a){a=new q;a.resolve(!0);return a},getSelectedItems:function(){var c=this.tree.getSelectedItems();return a.map(c,b.hitch(this,function(a){return this.getHandledItem(a)}))},getAllItems:function(){var c=this.tree.getAllItems(),e=[];a.forEach(c,b.hitch(this,function(a){"root"!==a.id&&(a=this.getHandledItem(a),e.push(a))}));return e},
getHandledItem:function(a){return{name:a.name,layerInfo:a.layerInfo}},_isLeafItem:function(a){return a.isLeaf},setCreateMapResponse:function(a){this.createMapResponse=a;h.getInstance(this.createMapResponse.map,this.createMapResponse.itemInfo).then(b.hitch(this,function(a){this.layerInfosObj=a;this.own(c(this.layerInfosObj,"layerInfosChanged",b.hitch(this,this._onLayerInfosChanged)));this.updateWhenLayerInfosIsShowInMapChanged&&this.own(c(this.layerInfosObj,"layerInfosIsShowInMapChanged",b.hitch(this,
this._onLayerInfosIsShowInMapChanged)));this._buildTree(this.layerInfosObj)}))},_onLayerInfosChanged:function(a,b){this._buildTree(this.layerInfosObj);this.emit("update")},_onLayerInfosIsShowInMapChanged:function(a){this._buildTree(this.layerInfosObj);this.emit("update")},_buildTree:function(c){this._clear();m.setStyle(this.errorTipSection,"display","block");var e=c.getLayerInfoArray(),e=e.concat(c.getTableInfoArray());0!==e.length&&(m.setStyle(this.errorTipSection,"display","none"),a.forEach(e,b.hitch(this,
function(a){this._addDirectLayerInfo(a)})))},_addDirectLayerInfo:function(a){a&&a.getLayerObject().then(b.hitch(this,function(){this._addItem("root",a)}),b.hitch(this,function(a){console.error(a)}))},_clear:function(){var c=this._store.query({parent:"root"});a.forEach(c,b.hitch(this,function(a){a&&"root"!==a.id&&this._store.remove(a.id)}))},_addItem:function(c,d){var h=null,m=d.getLayerType(),f=this.filter(d);e({layerType:m,valid:f}).then(b.hitch(this,function(m){if(m.valid){var f=b.hitch(this,function(a,
b){this._id++;h={name:d.title||"",parent:c,layerInfo:d,type:m.layerType,layerClass:d.layerObject.declaredClass,id:this._id.toString(),isLeaf:a,hasChildren:b};this._store.add(h)}),k=d.getSubLayers(),g=0===k.length;g?f(g,!1):(k=a.map(k,b.hitch(this,function(a){return this.filter(a)})),e(k).then(b.hitch(this,function(b){(b=a.some(b,function(a){return a}))&&f(g,b)})))}}))},_getRootItem:function(){return{id:"root",name:"Map Root",type:"root",isLeaf:!1,hasChildren:!0}},_createTree:function(){var a=this._getRootItem(),
a=new d({data:[a],getChildren:function(a){return this.query({parent:a.id})}});this._store=new k(a);a=new p({store:this._store,query:{id:"root"},mayHaveChildren:b.hitch(this,this._mayHaveChildren)});this.tree=new s({multiple:this.multiple,model:a,showRoot:!1,isLeafItem:b.hitch(this,this._isLeafItem),style:{width:"100%"},onOpen:b.hitch(this,function(a,b){"root"!==a.id&&this._onTreeOpen(a,b)}),onClick:b.hitch(this,function(a,b,c){this._onTreeClick(a,b,c);this.emit("tree-click",a,b,c)}),getIconStyle:b.hitch(this,
function(a,b){var c=null;if(!a||"root"===a.id)return null;var e={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},d=window.location.protocol+"//"+window.location.host+require.toUrl("jimu"),h=this._getIconImageName(a,b);h&&(e.backgroundImage="url("+d+"/css/images/"+h+")",c=e);return c})});m.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.shelter.domNode,"before")},_mayHaveChildren:function(a){return a.hasChildren},_getIconImageName:function(a,
b){var c="";if("ArcGISDynamicMapServiceLayer"===a.type||"ArcGISTiledMapServiceLayer"===a.type)c=b?"mapserver_open.png":"mapserver_close.png";else if("GroupLayer"===a.type)c=b?"group_layer2.png":"group_layer1.png";else if("FeatureLayer"===a.type){var e=v.getTypeByGeometryType(a.layerInfo.layerObject.geometryType);"point"===e?c="point_layer1.png":"polyline"===e?c="line_layer1.png":"polygon"===e&&(c="polygon_layer1.png")}else c="Table"===a.type?"table.png":"ArcGISImageServiceLayer"===a.type||"ArcGISImageServiceVectorLayer"===
a.type?"image_layer.png":b?"mapserver_open.png":"mapserver_close.png";return c},_onTreeOpen:function(c,d){if("root"!==c.id){var h=[],m=[],h=c.layerInfo.getSubLayers();c.checked||(this.shelter.show(),m=a.map(h,b.hitch(this,function(a){return a.getLayerObject()})),e(m).then(b.hitch(this,function(){this.domNode&&(a.forEach(h,b.hitch(this,function(a){this._addItem(c.id,a)})),c.checked=!0,this.shelter.hide())}),b.hitch(this,function(a){console.error(a);this.shelter.hide()})))}},_onTreeClick:function(a,
b,c){},destroy:function(){this.shelter&&this.shelter.destroy();this.tree&&this.tree.destroy();this.shelter=null;this.tree.destroy();this.inherited(arguments)}});t.createFilterByLayerType=function(a){b.isArrayLike(a)||(a=[]);return function(b){var c=new q;if(0===a.length)c.resolve(!0);else{var d=[];b.traversal(function(a){d.push(a.getLayerType())});e(d).then(function(b){for(var e=0;e<b.length;e++)for(var d=0;d<a.length;d++)if(b[e]===a[d]){c.resolve(!0);return}c.resolve(!1)},function(a){console.error(a);
c.reject(a)})}return c}};t.createFeaturelayerFilter=function(b,c,d){var h=["point","polyline","polygon"];b&&0<b.length?(b=a.filter(b,function(a){return 0<=h.indexOf(a)}),0===b.length&&(b=h)):b=h;return function(h){var m=new q,f=h.getLayerType();h=h.getLayerObject();e({layerType:f,layerObject:h}).then(function(e){var h=e.layerType;e=e.layerObject;"ArcGISDynamicMapServiceLayer"===h?m.resolve(!0):"ArcGISTiledMapServiceLayer"===h?m.resolve(!0):"GroupLayer"===h?m.resolve(!0):"FeatureCollection"===h?m.resolve(!0):
"FeatureLayer"===h?(h=v.getTypeByGeometryType(e.geometryType),h=0<=a.indexOf(b,h),e.url?(e=v.isFeaturelayerUrlSupportQuery(e.url,e.capabilities),m.resolve(h&&e)):m.resolve(c&&h)):"Table"===h?(e=v.isFeaturelayerUrlSupportQuery(e.url,e.capabilities),m.resolve(d&&e)):m.resolve(!1)},function(a){console.log(a);m.reject(a)});return m}};t.createImageServiceLayerFilter=function(a){return function(b){var c=new q,d=b.getLayerType();b=b.getLayerObject();e({layerType:d,layerObject:b}).then(function(b){var e=
b.layerType;"ArcGISImageServiceLayer"===e||"ArcGISImageServiceVectorLayer"===e?a?v.isImageServiceSupportQuery(b.layerObject.capabilities)?c.resolve(!0):c.resolve(!1):c.resolve(!0):c.resolve(!1)},function(a){console.log(a);c.reject(a)});return c}};t.createQueryableLayerFilter=function(){var a=t.createFeaturelayerFilter(["point","polyline","polygon"],!1,!0),b=t.createImageServiceLayerFilter(!0);return t.orCombineFilters([a,b])};t.andCombineFilters=function(a){return t._combineFilters(a,!0)};t.orCombineFilters=
function(a){return t._combineFilters(a,!1)};t._combineFilters=function(b,c){return function(d){var h=new q,m=a.map(b,function(a){return a(d)});e(m).then(function(b){var e=!1,e=c?a.every(b,function(a){return a}):a.some(b,function(a){return a});h.resolve(e)},function(a){console.error(a);h.reject(a)});return h}};return t})},"dojo/store/Observable":function(){define(["../_base/kernel","../_base/lang","../when","../_base/array"],function(l,g,r,n){l=function(f){function c(c,b){var d=f[c];d&&(f[c]=function(a){var k;
"put"===c&&(k=f.getIdentity(a));if(p)return d.apply(this,arguments);p=!0;try{var g=d.apply(this,arguments);r(g,function(c){b("object"==typeof c&&c||a,k)});return g}finally{p=!1}})}var d=[],q=0;f=g.delegate(f);f.notify=function(c,b){q++;for(var m=d.slice(),a=0,f=m.length;a<f;a++)m[a](c,b)};var k=f.query;f.query=function(c,b){b=b||{};var m=k.apply(this,arguments);if(m&&m.forEach){var a=g.mixin({},b);delete a.start;delete a.count;var p=f.queryEngine&&f.queryEngine(c,a),l=q,h=[],u;m.observe=function(a,
c){1==h.push(a)&&d.push(u=function(a,e){r(m,function(d){var m=d.length!=b.count,k,g;if(++l!=q)throw Error("Query is out of date, you must observe() the query prior to any data modifications");var r,u=-1,t=-1;if(void 0!==e){var y=[].concat(d);p&&!a&&(y=p(d));k=0;for(g=d.length;k<g;k++){var A=d[k];if(f.getIdentity(A)==e&&!(0>y.indexOf(A))){r=A;u=k;(p||!a)&&d.splice(k,1);break}}}if(p){if(a&&(p.matches?p.matches(a):p([a]).length))k=-1<u?u:d.length,d.splice(k,0,a),t=n.indexOf(p(d),a),d.splice(k,1),b.start&&
0==t||!m&&t==d.length?t=-1:d.splice(t,0,a)}else a&&(void 0!==e?t=u:b.start||(t=f.defaultIndex||0,d.splice(t,0,a)));if((-1<u||-1<t)&&(c||!p||u!=t)){m=h.slice();for(k=0;d=m[k];k++)d(a||r,u,t)}})});var e={};e.remove=e.cancel=function(){var b=n.indexOf(h,a);-1<b&&(h.splice(b,1),h.length||d.splice(n.indexOf(d,u),1))};return e}}return m};var p;c("put",function(c,b){f.notify(c,b)});c("add",function(c){f.notify(c)});c("remove",function(c){f.notify(void 0,c)});return f};g.setObject("dojo.store.Observable",
l);return l})},"dijit/tree/ObjectStoreModel":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/when ../Destroyable".split(" "),function(l,g,r,n,f,c,d){return r("dijit.tree.ObjectStoreModel",d,{store:null,labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(c){f.mixin(this,c);this.childrenCache={}},getRoot:function(d,k){if(this.root)d(this.root);else{var g=this.store.query(this.query);g.then&&this.own(g);c(g,f.hitch(this,function(c){if(1!=
c.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+c.length+" items, but must return exactly one");this.root=c[0];d(this.root);g.observe&&g.observe(f.hitch(this,function(b){this.onChange(b)}),!0)}),k)}},mayHaveChildren:function(){return!0},getChildren:function(d,k,g){var e=this.store.getIdentity(d);if(this.childrenCache[e])c(this.childrenCache[e],k,g);else{var b=this.childrenCache[e]=this.store.getChildren(d);b.then&&this.own(b);b.observe&&this.own(b.observe(f.hitch(this,function(e,
a,k){this.onChange(e);a!=k&&c(b,f.hitch(this,"onChildrenChange",d))}),!0));c(b,k,g)}},isItem:function(){return!0},getIdentity:function(c){return this.store.getIdentity(c)},getLabel:function(c){return c[this.labelAttr]},newItem:function(c,d,f,e){return this.store.put(c,{parent:d,before:e})},pasteItem:function(c,d,g,e,b,m){var a=new n;if(d===g&&!e&&!m)return a.resolve(!0),a;d&&!e?this.getChildren(d,f.hitch(this,function(b){b=[].concat(b);var e=l.indexOf(b,c);b.splice(e,1);this.onChildrenChange(d,b);
a.resolve(this.store.put(c,{overwrite:!0,parent:g,oldParent:d,before:m}))})):a.resolve(this.store.put(c,{overwrite:!0,parent:g,oldParent:d,before:m}));return a},onChange:function(){},onChildrenChange:function(){},onDelete:function(){}})})},"jimu/dijit/_Tree":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_TreeNode.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/event dojo/query dojo/aspect dojo/on dojo/Evented dijit/registry dijit/Tree jimu/utils".split(" "),
function(l,g,r,n,f,c,d,q,k,p,e,b,m,a,v){var s=l([a._TreeNode,b],{templateString:n,declaredClass:"jimu._TreeNode",isLeaf:!1,groupId:"",postCreate:function(){this.inherited(arguments);c.addClass(this.domNode,"jimu-tree-node");this.isLeaf=!!this.isLeaf;this.groupId?(this.checkNode=c.toDom('\x3cinput type\x3d"radio" /\x3e'),this.checkNode.name=this.groupId):this.checkNode=c.toDom('\x3cinput type\x3d"checkbox" /\x3e');c.addClass(this.checkNode,"jimu-tree-check-node");c.place(this.checkNode,this.contentNode,
"first");this.own(e(this.checkNode,"click",f.hitch(this,this._onClick)));this.isLeaf?this.groupId?c.setStyle(this.checkNode,"display","none"):c.setStyle(this.checkNode,"display","inline"):c.setStyle(this.checkNode,"display","none");this.isLeaf?c.addClass(this.domNode,"jimu-tree-leaf-node"):c.addClass(this.domNode,"jimu-tree-not-leaf-node")},select:function(){this.isLeaf&&(this.checkNode.checked=!0,c.addClass(this.domNode,"jimu-tree-selected-leaf-node"))},unselect:function(){this.isLeaf&&(this.checkNode.checked=
!1,c.removeClass(this.domNode,"jimu-tree-selected-leaf-node"))},toggleSelect:function(){this.isLeaf&&(this.checkNode.checked?this.unselect():this.select())},_onClick:function(a){(a.target||a.srcElement)===this.checkNode?this.tree._onCheckNodeClick(this,this.checkNode.checked,a):this.tree._onClick(this,a)},_onChange:function(){this.isLeaf&&setTimeout(f.hitch(this,function(){this.checkNode.checked?this.emit("tn-select",this):this.emit("tn-unselect",this)}),100)},destroy:function(){delete this.tree;
this.inherited(arguments)}});return l([a,b],{declaredClass:"jimu._Tree",openOnClick:!0,multiple:!0,uniqueId:"",showRoot:!1,postMixInProperties:function(){this.inherited(arguments);this.uniqueId="tree_"+v.getRandomString()},postCreate:function(){this.inherited(arguments);c.addClass(this.domNode,"jimu-tree");this.own(p.before(this,"onClick",f.hitch(this,this._jimuBeforeClick)));this.rootLoadingIndicator&&c.setStyle(this.rootLoadingIndicator,"display","none");this.dndController.singular=!0},removeItem:function(a){this.model.store.remove(a)},
getAllItems:function(){var a=this.getAllTreeNodeWidgets();return d.map(a,f.hitch(this,function(a){var b=a.item;b.selected=a.checkNode.checked;return b}))},getSelectedItems:function(){var a=this.getAllTreeNodeWidgets(),a=d.filter(a,f.hitch(this,function(a){return a.checkNode.checked}));return d.map(a,f.hitch(this,function(a){return a.item}))},getFilteredItems:function(a){var b=this.getAllTreeNodeWidgets(),b=d.map(b,f.hitch(this,function(a){var b=a.item;b.selected=a.checkNode.checked;return b}));return d.filter(b,
f.hitch(this,function(b){return a(b)}))},getTreeNodeByItemId:function(a){for(var b=this._getAllTreeNodeDoms(),c=0;c<b.length;c++){var e=m.byNode(b[c]);if(e.item.id.toString()===a.toString())return e}return null},selectItem:function(a){(a=this.getTreeNodeByItemId(a))&&a.isLeaf&&this.selectNodeWidget(a)},unselectItem:function(a){(a=this.getTreeNodeByItemId(a))&&a.isLeaf&&a.unselect()},getAllLeafTreeNodeWidgets:function(){var a=this.getAllTreeNodeWidgets();return d.filter(a,f.hitch(this,function(a){return a.isLeaf}))},
getAllTreeNodeWidgets:function(){var a=this._getAllTreeNodeDoms();return d.map(a,f.hitch(this,function(a){return m.byNode(a)}))},isLeafItem:function(a){return a&&a.isLeaf},_getAllTreeNodeDoms:function(){return k(".dijitTreeNode",this.domNode)},_createTreeNode:function(a){a.isLeaf=this.isLeafItem(a.item);this.multiple||(a.groupId=this.uniqueId);return new s(a)},_onTreeNodeSelect:function(a){this.emit("item-select",{item:a.item,treeNode:a})},_onTreeNodeUnselect:function(a){this.emit("item-unselect",
{item:a.item,treeNode:a})},selectNodeWidget:function(a){this.multiple||this.unselectAllLeafNodeWidgets();a.select()},_jimuBeforeClick:function(a,b,e){b.isLeaf&&(c.hasClass(e.target||e.srcElement,"jimu-tree-check-node")||(this.multiple?b.toggleSelect():this.selectNodeWidget(b)));return arguments},_onCheckNodeClick:function(a,b,c){!this.multiple&&b&&this.unselectAllLeafNodeWidgets();q.stop(c);this.focusNode(a);setTimeout(f.hitch(this,function(){b?this.selectNodeWidget(a):a.unselect();this.onClick(a.item,
a,c)}),0)},unselectAllLeafNodeWidgets:function(){var a=this.getAllLeafTreeNodeWidgets();d.forEach(a,f.hitch(this,function(a){a.unselect()}))}})})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(l,g,r,n,f,c,d,q,k,p,e,b,m,a,v,s,h,u,t,H,y,I,z,C,D,E,F,J,G,K,L,A,O,M,N){function w(a){return s.delegate(a.promise||a,{addCallback:function(a){this.then(a)},addErrback:function(a){this.otherwise(a)}})}var B=n("dijit._TreeNode",[D,E,F,J,G],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(a){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=a;this._set("label",a);m("dojo-bidi")&&this.applyTextDir(this.labelNode)},labelType:"text",
isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:L,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(a){var b=Math.max(a,0)*this.tree._nodePixelIndent+"px";p.set(this.domNode,
"backgroundPosition",b+" 0px");p.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",b);l.forEach(this.getChildren(),function(b){b.set("indent",a+1)});this._set("indent",a)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(a){var b=this.tree,c=b.model;b._v10Compat&&a===c.root&&(a=null);this._applyClassAndStyle(a,"icon","Icon");this._applyClassAndStyle(a,"label","Label");this._applyClassAndStyle(a,
"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(a,b,c){var e="_"+b+"Class";b+="Node";var d=this[e];this[e]=this.tree["get"+c+"Class"](a,this.isExpanded);q.replace(this[b],this[e]||"",d||"");p.set(this[b],this.tree["get"+c+"Style"](a,this.isExpanded)||{})},_updateLayout:function(){var a=this.getParent(),a=!a||!a.rowNode||"none"==a.rowNode.style.display;q.toggle(this.domNode,"dijitTreeIsRoot",a);q.toggle(this.domNode,"dijitTreeIsLast",!a&&!this.getNextSibling())},_setExpando:function(a){var b=
["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];a=a?0:this.isExpandable?this.isExpanded?1:2:3;q.replace(this.expandoNode,b[a],b);this.expandoNodeText.innerHTML=["*","-","+","*"][a]},expand:function(){if(this._expandDeferred)return w(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&
this.containerNode.setAttribute("role","group");q.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var a=b.wipeIn({node:this.containerNode,duration:C.defaultDuration}),c=this._expandDeferred=new f(function(){a.stop()});g.after(a,"onEnd",function(){c.resolve(!0)},!0);a.play();return w(c)},collapse:function(){if(this._collapseDeferred)return w(this._collapseDeferred);
this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");q.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var a=b.wipeOut({node:this.containerNode,duration:C.defaultDuration}),c=this._collapseDeferred=new f(function(){a.stop()});g.after(a,"onEnd",
function(){c.resolve(!0)},!0);a.play();return w(c)},indent:0,setChildItems:function(a){var b=this.tree,e=b.model,h=[],m=b.focusedChild,f=this.getChildren();l.forEach(f,function(a){F.prototype.removeChild.call(this,a)},this);this.defer(function(){l.forEach(f,function(a){if(!a._destroyed&&!a.getParent()){b.dndController.removeTreeNode(a);var c=function(a){var d=e.getIdentity(a.item),h=b._itemNodesMap[d];1==h.length?delete b._itemNodesMap[d]:(d=l.indexOf(h,a),-1!=d&&h.splice(d,1));l.forEach(a.getChildren(),
c)};c(a);if(b.persist){var h=l.map(a.getTreePath(),function(a){return b.model.getIdentity(a)}).join("/"),f;for(f in b._openedNodes)f.substr(0,h.length)==h&&delete b._openedNodes[f];b._saveExpandedNodes()}b.lastFocusedChild&&!d.isDescendant(b.lastFocusedChild,b.domNode)&&delete b.lastFocusedChild;m&&!d.isDescendant(m,b.domNode)&&b.focus();a.destroyRecursive()}})});this.state="Loaded";a&&0<a.length?(this.isExpandable=!0,l.forEach(a,function(a){var c=e.getIdentity(a),d=b._itemNodesMap[c],m;if(d)for(var f=
0;f<d.length;f++)if(d[f]&&!d[f].getParent()){m=d[f];m.set("indent",this.indent+1);break}m||(m=this.tree._createTreeNode({item:a,tree:b,isExpandable:e.mayHaveChildren(a),label:b.getLabel(a),labelType:b.model&&b.model.labelType||"text",tooltip:b.getTooltip(a),ownerDocument:b.ownerDocument,dir:b.dir,lang:b.lang,textDir:b.textDir,indent:this.indent+1}),d?d.push(m):b._itemNodesMap[c]=[m]);this.addChild(m);(this.tree.autoExpand||this.tree._state(m))&&h.push(b._expandNode(m))},this),l.forEach(this.getChildren(),
function(a){a._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);a=c(h);this.tree._startPaint(a);return w(a)},getTreePath:function(){for(var a=this,b=[];a&&a!==this.tree.rootNode;)b.unshift(a.item),a=a.getParent();b.unshift(this.tree.rootNode.item);return b},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(a){this.inherited(arguments);var b=this.getChildren();0==b.length&&(this.isExpandable=!1,
this.collapse());l.forEach(b,function(a){a._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(a){this.labelNode.setAttribute("aria-selected",a?"true":"false");q.toggle(this.rowNode,"dijitTreeRowSelected",a)},focus:function(){I.focus(this.focusNode)}});m("dojo-bidi")&&B.extend({_setTextDirAttr:function(a){if(a&&(this.textDir!=a||!this._created))this._set("textDir",a),this.applyTextDir(this.labelNode),l.forEach(this.getChildren(),function(b){b.set("textDir",
a)},this)}});var x=n("dijit.Tree",[D,K,E,G],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:A,persist:!1,autoExpand:!1,dndController:N,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,
dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(a,b){u.publish(this.id,s.mixin({tree:this,event:a},b||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new f;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var a=this;this.own(h(this.containerNode,
h.selector(".dijitTreeNode",t.enter),function(b){a._onNodeMouseEnter(z.byNode(this),b)}),h(this.containerNode,h.selector(".dijitTreeNode",t.leave),function(b){a._onNodeMouseLeave(z.byNode(this),b)}),h(this.containerNode,h.selector(".dijitTreeRow",y.press),function(b){a._onNodePress(z.getEnclosingWidget(this),b)}),h(this.containerNode,h.selector(".dijitTreeRow",y),function(b){a._onClick(z.getEnclosingWidget(this),b)}),h(this.containerNode,h.selector(".dijitTreeRow","dblclick"),function(b){a._onDblClick(z.getEnclosingWidget(this),
b)}));this.model||this._store2model();this.own(g.after(this.model,"onChange",s.hitch(this,"_onItemChange"),!0),g.after(this.model,"onChildrenChange",s.hitch(this,"_onItemChildrenChange"),!0),g.after(this.model,"onDelete",s.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){s.isString(this.dndController)&&(this.dndController=s.getObject(this.dndController));for(var b={},c=0;c<this.dndParams.length;c++)this[this.dndParams[c]]&&(b[this.dndParams[c]]=this[this.dndParams[c]]);
this.dndController=new this.dndController(this,b)}this._load();this.onLoadDeferred=w(this.pendingCommandsPromise);this.onLoadDeferred.then(s.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;a.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var b={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(b.mayHaveChildren=s.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&
(b.getChildren=s.hitch(this,function(a,b,c){this.getItemChildren(this._v10Compat&&a===this.model.root?null:a,b,c)}));this.model=new M(b);this.showRoot=Boolean(this.label)},onLoad:function(){},_load:function(){this.model.getRoot(s.hitch(this,function(a){var b=this.rootNode=this.tree._createTreeNode({item:a,tree:this,isExpandable:!0,label:this.label||this.getLabel(a),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",
!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(b.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(b.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(b.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),
b.labelNode.setAttribute("role","presentation"),b.labelNode.removeAttribute("aria-selected"),b.containerNode.setAttribute("role","tree"),b.containerNode.setAttribute("aria-expanded","true"),b.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(b.domNode);a=this.model.getIdentity(a);this._itemNodesMap[a]?this._itemNodesMap[a].push(b):this._itemNodesMap[a]=[b];b._updateLayout();this._expandNode(b).then(s.hitch(this,function(){this._destroyed||
(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),s.hitch(this,function(a){console.error(this,": error loading root: ",a)}))},getNodesByItem:function(a){if(!a)return[];a=s.isString(a)?a:this.model.getIdentity(a);return[].concat(this._itemNodesMap[a])},_setSelectedItemAttr:function(a){this.set("selectedItems",[a])},_setSelectedItemsAttr:function(a){var b=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(s.hitch(this,function(){var c=
l.map(a,function(a){return!a||s.isString(a)?a:b.model.getIdentity(a)}),e=[];l.forEach(c,function(a){e=e.concat(b._itemNodesMap[a]||[])});this.set("selectedNodes",e)}))},_setPathAttr:function(a){return a.length?w(this.set("paths",[a]).then(function(a){return a[0]})):w(this.set("paths",[]).then(function(a){return a[0]}))},_setPathsAttr:function(a){function b(a,c){var d=a.shift(),m=l.filter(c,function(a){return a.getIdentity()==d})[0];if(m)return a.length?e._expandNode(m).then(function(){return b(a,
m.getChildren())}):m;throw new x.PathError("Could not expand path at "+d);}var e=this;return w(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return c(l.map(a,function(a){a=l.map(a,function(a){return a&&s.isObject(a)?e.model.getIdentity(a):a});if(a.length)return b(a,[e.rootNode]);throw new x.PathError("Empty path");}))}).then(function(a){e.set("selectedNodes",a);return e.paths}))},_setSelectedNodeAttr:function(a){this.set("selectedNodes",[a])},_setSelectedNodesAttr:function(a){this.dndController.setSelection(a)},
expandAll:function(){function a(e){return b._expandNode(e).then(function(){var b=l.filter(e.getChildren()||[],function(a){return a.isExpandable});return c(l.map(b,a))})}var b=this;return w(a(this.rootNode))},collapseAll:function(){function a(e){var d=l.filter(e.getChildren()||[],function(a){return a.isExpandable}),d=c(l.map(d,a));return!e.isExpanded||e==b.rootNode&&!b.showRoot?d:d.then(function(){return b._collapseNode(e)})}var b=this;return w(a(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},
getLabel:function(a){return this.model.getLabel(a)},getIconClass:function(a,b){return!a||this.model.mayHaveChildren(a)?b?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(a,b){var c=this._getNext(b);c&&c.isTreeNode&&this.focusNode(c)},_onUpArrow:function(a,b){var c=b.getPreviousSibling();if(c)for(b=c;b.isExpandable&&
b.isExpanded&&b.hasChildren();)c=b.getChildren(),b=c[c.length-1];else if(c=b.getParent(),this.showRoot||c!==this.rootNode)b=c;b&&b.isTreeNode&&this.focusNode(b)},_onRightArrow:function(a,b){b.isExpandable&&!b.isExpanded?this._expandNode(b):b.hasChildren()&&(b=b.getChildren()[0])&&b.isTreeNode&&this.focusNode(b)},_onLeftArrow:function(a,b){if(b.isExpandable&&b.isExpanded)this._collapseNode(b);else{var c=b.getParent();c&&(c.isTreeNode&&(this.showRoot||c!==this.rootNode))&&this.focusNode(c)}},focusLastChild:function(){var a=
this._getLast();a&&a.isTreeNode&&this.focusNode(a)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var a=this.rootNode;a.isExpanded;){var b=a.getChildren();if(!b.length)break;a=b[b.length-1]}return a},_getNext:function(a){if(a.isExpandable&&a.isExpanded&&a.hasChildren())return a.getChildren()[0];for(;a&&a.isTreeNode;){var b=a.getNextSibling();if(b)return b;a=a.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(a,
b){return d.isDescendant(a,b.expandoNode)||d.isDescendant(a,b.expandoNodeText)},_onNodePress:function(a,b){this.focusNode(a)},__click:function(a,b,c,e){var d=this.isExpandoNode(b.target,a);a.isExpandable&&(c||d)?this._onExpandoClick({node:a}):(this._publish("execute",{item:a.item,node:a,evt:b}),this[e](a.item,a,b),this.focusNode(a));b.stopPropagation();b.preventDefault()},_onClick:function(a,b){this.__click(a,b,this.openOnClick,"onClick")},_onDblClick:function(a,b){this.__click(a,b,this.openOnDblClick,
"onDblClick")},_onExpandoClick:function(a){a=a.node;this.focusNode(a);a.isExpanded?this._collapseNode(a):this._expandNode(a)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(b){a.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(b)},_getRootOrFirstNode:function(){a.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","",
"2.0");return this._getFirst()},_collapseNode:function(a){a._expandNodeDeferred&&delete a._expandNodeDeferred;if("Loading"!=a.state&&a.isExpanded){var b=a.collapse();this.onClose(a.item,a);this._state(a,!1);this._startPaint(b);return b}},_expandNode:function(a){if(a._expandNodeDeferred)return a._expandNodeDeferred;var b=this.model,c=a.item,e=this;a._loadDeferred||(a.markProcessing(),a._loadDeferred=new f,b.getChildren(c,function(b){a.unmarkProcessing();a.setChildItems(b).then(function(){a._loadDeferred.resolve(b)})},
function(b){console.error(e,": error loading "+a.label+" children: ",b);a._loadDeferred.reject(b)}));b=a._loadDeferred.then(s.hitch(this,function(){var b=a.expand();this.onOpen(a.item,a);this._state(a,!0);return b}));this._startPaint(b);return b},focusNode:function(a){var b=this.domNode.scrollLeft;this.focusChild(a);this.domNode.scrollLeft=b},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(a){var b=this.model.getIdentity(a);if(b=this._itemNodesMap[b]){var c=this.getLabel(a),
e=this.getTooltip(a);l.forEach(b,function(b){b.set({item:a,label:c,tooltip:e});b._updateItemClasses(a)})}},_onItemChildrenChange:function(a,b){var c=this.model.getIdentity(a);(c=this._itemNodesMap[c])&&l.forEach(c,function(a){a.setChildItems(b)})},_onItemDelete:function(a){a=this.model.getIdentity(a);var b=this._itemNodesMap[a];b&&(l.forEach(b,function(a){this.dndController.removeTreeNode(a);var b=a.getParent();b&&b.removeChild(a);this.lastFocusedChild&&!d.isDescendant(this.lastFocusedChild,this.domNode)&&
delete this.lastFocusedChild;this.focusedChild&&!d.isDescendant(this.focusedChild,this.domNode)&&this.focus();a.destroyRecursive()},this),delete this._itemNodesMap[a])},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var a=r(this.cookieName);a&&l.forEach(a.split(","),function(a){this._openedNodes[a]=!0},this)}},_state:function(a,b){if(!this.persist)return!1;var c=l.map(a.getTreePath(),function(a){return this.model.getIdentity(a)},this).join("/");if(1===arguments.length)return this._openedNodes[c];
b?this._openedNodes[c]=!0:delete this._openedNodes[c];this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var a=[],b;for(b in this._openedNodes)a.push(b);r(this.cookieName,a.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!s.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},
destroyRecursive:function(){this.destroy()},resize:function(a){a&&k.setMarginBox(this.domNode,a);this._nodePixelIndent=k.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(s.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(a){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var b=s.hitch(this,
function(){this._outstandingPaintOperations--;0>=this._outstandingPaintOperations&&(!this._adjustWidthsTimer&&this._started)&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});H(a,b,b)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(a){return new B(a)},focus:function(){this.lastFocusedChild?
this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});m("dojo-bidi")&&x.extend({_setTextDirAttr:function(a){a&&this.textDir!=a&&(this._set("textDir",a),this.rootNode.set("textDir",a))}});x.PathError=e("TreePathError");x._TreeNode=B;return x})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(l,g,r,n){return r("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",
root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(f){n.mixin(this,f);this.connects=[];f=this.store;if(!f.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");f.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([g.after(f,"onNew",n.hitch(this,"onNewItem"),!0),g.after(f,"onDelete",n.hitch(this,"onDeleteItem"),!0),g.after(f,"onSet",n.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var f;f=
this.connects.pop();)f.remove()},getRoot:function(f,c){this.root?f(this.root):this.store.fetch({query:this.query,onComplete:n.hitch(this,function(c){if(1!=c.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+c.length+" items, but must return exactly one");this.root=c[0];f(this.root)}),onError:c})},mayHaveChildren:function(f){return l.some(this.childrenAttrs,function(c){return this.store.hasAttribute(f,c)},this)},getChildren:function(f,c,d){var g=this.store;if(g.isItemLoaded(f)){for(var k=
[],p=0;p<this.childrenAttrs.length;p++)var e=g.getValues(f,this.childrenAttrs[p]),k=k.concat(e);var b=0;this.deferItemLoadingUntilExpand||l.forEach(k,function(a){g.isItemLoaded(a)||b++});0==b?c(k):l.forEach(k,function(a,e){g.isItemLoaded(a)||g.loadItem({item:a,onItem:function(a){k[e]=a;0==--b&&c(k)},onError:d})})}else{var m=n.hitch(this,arguments.callee);g.loadItem({item:f,onItem:function(a){m(a,c,d)},onError:d})}},isItem:function(f){return this.store.isItem(f)},fetchItemByIdentity:function(f){this.store.fetchItemByIdentity(f)},
getIdentity:function(f){return this.store.getIdentity(f)},getLabel:function(f){return this.labelAttr?this.store.getValue(f,this.labelAttr):this.store.getLabel(f)},newItem:function(f,c,d){var g={parent:c,attribute:this.childrenAttrs[0]},k;this.newItemIdAttr&&f[this.newItemIdAttr]?this.fetchItemByIdentity({identity:f[this.newItemIdAttr],scope:this,onItem:function(l){l?this.pasteItem(l,null,c,!0,d):(k=this.store.newItem(f,g))&&void 0!=d&&this.pasteItem(k,c,c,!1,d)}}):(k=this.store.newItem(f,g))&&void 0!=
d&&this.pasteItem(k,c,c,!1,d)},pasteItem:function(f,c,d,g,k){var p=this.store,e=this.childrenAttrs[0];c&&l.forEach(this.childrenAttrs,function(b){if(p.containsValue(c,b,f)){if(!g){var a=l.filter(p.getValues(c,b),function(a){return a!=f});p.setValues(c,b,a)}e=b}});if(d)if("number"==typeof k){var b=p.getValues(d,e).slice();b.splice(k,0,f);p.setValues(d,e,b)}else p.setValues(d,e,p.getValues(d,e).concat(f))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(f,
c){c&&this.getChildren(c.item,n.hitch(this,function(d){this.onChildrenChange(c.item,d)}))},onDeleteItem:function(f){this.onDelete(f)},onSetItem:function(f,c){if(-1!=l.indexOf(this.childrenAttrs,c))this.getChildren(f,n.hitch(this,function(c){this.onChildrenChange(f,c)}));else this.onChange(f)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(l,g,r,n,f){return g("dijit.tree.ForestStoreModel",
f,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(c){this.root={store:this,root:!0,id:c.rootId,label:c.rootLabel,children:c.rootChildren}},mayHaveChildren:function(c){return c===this.root||this.inherited(arguments)},getChildren:function(c,d,f){c===this.root?this.root.children?d(this.root.children):this.store.fetch({query:this.query,onComplete:n.hitch(this,function(c){this.root.children=c;d(c)}),onError:f}):this.inherited(arguments)},isItem:function(c){return c===this.root?!0:this.inherited(arguments)},
fetchItemByIdentity:function(c){if(c.identity==this.root.id){var d=c.scope||r.global;c.onItem&&c.onItem.call(d,this.root)}else this.inherited(arguments)},getIdentity:function(c){return c===this.root?this.root.id:this.inherited(arguments)},getLabel:function(c){return c===this.root?this.root.label:this.inherited(arguments)},newItem:function(c,d,f){return d===this.root?(this.onNewRootItem(c),this.store.newItem(c)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(c,d,f,g,l){if(d===
this.root&&!g)this.onLeaveRoot(c);this.inherited(arguments,[c,d===this.root?null:d,f===this.root?null:f,g,l]);if(f===this.root)this.onAddToRoot(c)},onAddToRoot:function(c){console.log(this,": item ",c," added to root")},onLeaveRoot:function(c){console.log(this,": item ",c," removed from root")},_requeryTop:function(){var c=this.root.children||[];this.store.fetch({query:this.query,onComplete:n.hitch(this,function(d){this.root.children=d;if(c.length!=d.length||l.some(c,function(c,f){return d[f]!=c}))this.onChildrenChange(this.root,
d)})})},onNewItem:function(c,d){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(c){-1!=l.indexOf(this.root.children,c)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(c,d,f,g){this._requeryTop();this.inherited(arguments)}})})},"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dnd/common dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),function(l,g,r,n,f,c,d,q,
k,p,e){return g("dijit.tree._dndSelector",e,{constructor:function(){this.selection={};this.anchor=null;this.events.push(q(this.tree.domNode,k.press,n.hitch(this,"onMouseDown")),q(this.tree.domNode,k.release,n.hitch(this,"onMouseUp")),q(this.tree.domNode,k.move,n.hitch(this,"onMouseMove")),q(this.tree.domNode,p.press,n.hitch(this,"onClickPress")),q(this.tree.domNode,p.release,n.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var b=[],c=this.selection,a;for(a in c)b.push(c[a]);
return b},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(b,c){this.setSelection(this.getSelectedTreeNodes().concat([b]));c&&(this.anchor=b);return b},removeTreeNode:function(b){var e=l.filter(this.getSelectedTreeNodes(),function(a){return!c.isDescendant(a.domNode,b.domNode)});this.setSelection(e);return b},isTreeNodeSelected:function(b){return b.id&&!!this.selection[b.id]},setSelection:function(b){var c=
this.getSelectedTreeNodes();l.forEach(this._setDifference(c,b),n.hitch(this,function(a){a.setSelected(!1);this.anchor==a&&delete this.anchor;delete this.selection[a.id]}));l.forEach(this._setDifference(b,c),n.hitch(this,function(a){a.setSelected(!0);this.selection[a.id]=a}));this._updateSelectionProperties()},_setDifference:function(b,c){l.forEach(c,function(a){a.__exclude__=!0});var a=l.filter(b,function(a){return!a.__exclude__});l.forEach(c,function(a){delete a.__exclude__});return a},_updateSelectionProperties:function(){var b=
this.getSelectedTreeNodes(),c=[],a=[];l.forEach(b,function(b){var e=b.getTreePath();a.push(b);c.push(e)},this);b=l.map(a,function(a){return a.item});this.tree._set("paths",c);this.tree._set("path",c[0]||[]);this.tree._set("selectedNodes",a);this.tree._set("selectedNode",a[0]||null);this.tree._set("selectedItems",b);this.tree._set("selectedItem",b[0]||null)},onClickPress:function(b){if(!this.current||!this.current.isExpandable||!this.tree.isExpandoNode(b.target,this.current)){"mousedown"==b.type&&
d.isLeft(b)&&b.preventDefault();var c="keydown"==b.type?this.tree.focusedChild:this.current;if(c){var a=f.getCopyKeyState(b),e=c.id;!this.singular&&!b.shiftKey&&this.selection[e]?this._doDeselect=!0:(this._doDeselect=!1,this.userSelect(c,a,b.shiftKey))}}},onClickRelease:function(b){this._doDeselect&&(this._doDeselect=!1,this.userSelect("keyup"==b.type?this.tree.focusedChild:this.current,f.getCopyKeyState(b),b.shiftKey))},onMouseMove:function(){this._doDeselect=!1},onMouseDown:function(){},onMouseUp:function(){},
_compareNodes:function(b,c){if(b===c)return 0;if("sourceIndex"in document.documentElement)return b.sourceIndex-c.sourceIndex;if("compareDocumentPosition"in document.documentElement)return b.compareDocumentPosition(c)&2?1:-1;if(document.createRange){var a=doc.createRange();a.setStartBefore(b);var e=doc.createRange();e.setStartBefore(c);return a.compareBoundaryPoints(a.END_TO_END,e)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");},userSelect:function(b,
c,a){if(this.singular)this.anchor==b&&c?this.selectNone():(this.setSelection([b]),this.anchor=b);else if(a&&this.anchor){c=this._compareNodes(this.anchor.rowNode,b.rowNode);a=this.anchor;0>c?c=a:(c=b,b=a);for(a=[];c!=b;)a.push(c),c=this.tree._getNext(c);a.push(b);this.setSelection(a)}else this.selection[b.id]&&c?this.removeTreeNode(b):c?this.addTreeNode(b,!0):(this.setSelection([b]),this.anchor=b)},getItem:function(b){return{data:this.selection[b],type:["treeNode"]}},forInSelectedItems:function(b,
c){c=c||r.global;for(var a in this.selection)b.call(c,this.getItem(a),a,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(l,g,r,n,f,c){return g("dijit.tree._dndContainer",null,{constructor:function(d,g){this.tree=d;this.node=d.domNode;n.mixin(this,g);this.containerState="";r.add(this.node,"dojoDndContainer");this.events=[f(this.node,c.enter,n.hitch(this,"onOverEvent")),f(this.node,c.leave,
n.hitch(this,"onOutEvent")),l.after(this.tree,"_onNodeMouseEnter",n.hitch(this,"onMouseOver"),!0),l.after(this.tree,"_onNodeMouseLeave",n.hitch(this,"onMouseOut"),!0),f(this.node,"dragstart, selectstart",function(c){c.preventDefault()})]},destroy:function(){for(var c;c=this.events.pop();)c.remove();this.node=this.parent=null},onMouseOver:function(c){this.current=c},onMouseOut:function(){this.current=null},_changeState:function(c,f){var g="dojoDnd"+c,l=c.toLowerCase()+"State";r.replace(this.node,g+
f,g+this[l]);this[l]=f},_addItemClass:function(c,f){r.add(c,"dojoDndItem"+f)},_removeItemClass:function(c,f){r.remove(c,"dojoDndItem"+f)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"jimu/dijit/FeaturelayerChooserFromMap":function(){define(["dojo/_base/declare","dojo/Deferred","dojo/_base/html","dojo/_base/lang","./LayerChooserFromMap"],function(l,g,r,n,f){return l([f],{baseClass:"jimu-featurelayer-chooser-from-map",declaredClass:"jimu.dijit.FeaturelayerChooserFromMap",
types:null,showLayerFromFeatureSet:!1,showTable:!1,onlyShowVisible:!1,postMixInProperties:function(){this.inherited(arguments);this.basicFilter=n.hitch(this,this.basicFilter);this.filter=f.createFeaturelayerFilter(this.types,this.showLayerFromFeatureSet,this.showTable)},postCreate:function(){this.inherited(arguments);r.addClass(this.domNode,"jimu-basic-layer-chooser-from-map")},basicFilter:function(c){var d=new g;this.onlyShowVisible&&"Table"!==c.getLayerType()?d.resolve(c.isShowInMap()):d.resolve(!0);
return d},getHandledItem:function(c){var d=this.inherited(arguments),f=c&&c.layerInfo,f=f&&f.layerObject;d.url=f&&f.url||"";return d}})})},"jimu/dijit/ImageChooser":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/_base/lang dojo/_base/html dojo/on dojo/text!./templates/ImageChooser.html dojo/sniff dojo/request esri/lang ../utils ./_CropImage jimu/dijit/Popup jimu/dijit/Message jimu/dijit/LoadingShelter".split(" "),function(l,g,r,n,f,c,d,q,k,p,e,b,m,a,v){var s=0;
l=l([g,r],{templateString:d,declaredClass:"jimu.dijit.ImageChooser",cropImage:!0,displayImg:null,defaultSelfSrc:null,showSelfImg:!1,label:null,showTip:!0,goldenWidth:400,goldenHeight:400,maxSize:1024,format:null,imageData:null,postMixInProperties:function(){this.inherited(arguments);this.nls=window.jimuNls.imageChooser;this.nls.common=window.jimuNls.common;this.nls.readError=this.nls.readError||"Failed to read the file."},postCreate:function(){this._initial();!e.file.supportHTML5()&&(!q("safari")&&
e.file.isEnabledFlash())&&e.file.loadFileAPI().then(n.hitch(this,function(){f.setStyle(this.mask,"zIndex",1)}))},setImageSize:function(a){this.goldenWidth=a.width;this.goldenHeight=a.height},disableChooseImage:function(){f.setStyle(this.fileForm,"display","none");this.label&&"string"===typeof this.label&&f.addClass(this.displayText,"disable-label");f.removeAttr(this.domNode,"title")},enableChooseImage:function(){f.setStyle(this.fileForm,"display","block");this.label&&"string"===typeof this.label&&
f.removeClass(this.displayText,"disable-label");this._addTip()},setDefaultSelfSrc:function(a){this.defaultSelfSrc=a;this.imageData=this.selfImg.src=a},getImageData:function(){return this.imageData},_initial:function(){this._processProperties();this._porcessMaskClick();this._setupFileInput();this._addTip()},_processProperties:function(){this.label&&"string"===typeof this.label&&(this.displayText.innerHTML=this.label,f.setStyle(this.hintText,"display","block"));this.showSelfImg&&f.setStyle(this.hintImage,
"display","block");this.defaultSelfSrc&&(this.imageData=this.selfImg.src=this.defaultSelfSrc);if(this.format){var a="image/*";"string"===typeof this.format&&/^image\/./.test(this.format)?a=this.format:"[object Array]"===Object.prototype.toString.call(this.format)&&0<this.format.length&&(a=this.format.join(","));f.setAttr(this.fileInput,"accept",a)}!e.file.supportHTML5()&&(!q("safari")&&e.file.isEnabledFlash())&&f.setStyle(this.fileInput,{width:"100%",height:"100%",position:"absolute",left:0,top:0,
opacity:0,zIndex:9})},_porcessMaskClick:function(){f.setAttr(this.fileInput,"id","imageChooser_"+s);f.setAttr(this.mask,"for","imageChooser_"+s);s++;this.maskHandle=c(this.mask,"click",n.hitch(this,function(b){b.stopPropagation();if(q("safari")&&7>q("safari"))new a({message:this.nls.unsupportReaderAPI}),b.preventDefault();else{if(!e.file.supportHTML5()){if(!e.file.isEnabledFlash()){var c=f.create("a",{href:"http://helpx.adobe.com/flash-player.html",innerHTML:this.nls.enableFlash,target:"_blank"});
new a({message:c});b.preventDefault();return}if(!e.file.supportFileAPI()){new a({message:this.nls.unsupportReaderAPI});b.preventDefault();return}}f.setStyle(this.fileInput,"display","none");setTimeout(n.hitch(this,function(){f.setStyle(this.fileInput,"display","block")}),200)}}))},_addTip:function(){if(this.showTip){var a=p.substitute({width:this.goldenWidth||40,height:this.goldenHeight||40},this.nls.toolTip);f.setAttr(this.domNode,"title",a)}else f.setAttr(this.domNode,"title","")},_setupFileInput:function(){if(9>=
q("ie"))this.own(c(this.fileInput,"change",n.hitch(this,this._onFileInputChange)));else c.once(this.fileInput,"change",n.hitch(this,this._onFileInputChange))},_onFileInputChange:function(b){var c=b.target.files&&b.target.files[0]||b.files&&b.files[0];if(this.format&&-1===this.format.indexOf(c.type))new a({message:this.nls.invalidType}),(!q("ie")||9<q("ie"))&&this._recreateFileForm();else{var d=9>q("ie")?23552:1024*this.maxSize;e.file.readFile(b,"image/*",d,n.hitch(this,function(b,e,f){b?(e=this.nls[b.errCode],
"exceed"===b.errCode&&(e=e.replace("1024",d/1024)),new a({message:e})):window.isXT&&this.cropImage&&"image/gif"!==c.type?this._cropImageByUser(f):this._readFileData(f);(!q("ie")||9<q("ie"))&&this._recreateFileForm()}))}},_recreateFileForm:function(){var a=n.clone(this.mask),b=n.clone(this.fileInput);f.destroy(this.mask);f.destroy(this.fileInput);var c=n.clone(this.fileForm);f.place(a,c);f.place(b,c);f.place(c,this.fileForm,"replace");this.maskHandle.remove();this.mask=a;this.fileInput=b;f.destroy(this.fileForm);
this.fileForm=c;this._porcessMaskClick();this._setupFileInput()},_readFileData:function(a){this.onImageChange(a);this.displayImg&&f.setAttr(this.displayImg,"src",a);this.showSelfImg&&(this.selfImg?f.setAttr(this.selfImg,"src",a):this.selfImg.src=a)},_cropImageByUser:function(c){var e=new b({imageSrc:c,nls:n.clone(this.nls),realWidth:this.goldenWidth,realHeight:this.goldenHeight}),d=new v({hidden:!0}),g=new m({titleLabel:this.nls.cropImage,content:e,width:500,height:480,buttons:[{label:this.nls.common.ok,
onClick:n.hitch(this,function(){var b=e.getImageSize(),f=e.getCropSize();d.show();k("/webappbuilder/rest/cropimage",{data:{imageData:c,imageDisplaySize:b.w+","+b.h,cropRectangle:f.w+","+f.h+","+f.t+","+f.l},method:"POST",handleAs:"json",headers:{"X-Requested-With":null}}).then(n.hitch(this,function(b){b.success?(this._readFileData(b.imageData),g.close()):(new a({message:this.nls.unknowError}),d.hide())}),n.hitch(this,function(b){console.error(b);new a({message:this.nls.unknowError});d.hide()}))})}]});
d.placeAt(g.domNode);e.startup();f.addClass(g.domNode,"image-chooser-crop-popup")},onImageChange:function(a){this.imageData=a}});l.GIF="image/gif";l.JPEG="image/jpeg";l.PNG="image/png";return l})},"jimu/dijit/_CropImage":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/on dojo/query dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_CropImage.html jimu/dijit/Message esri/lang dojo/NodeList-dom".split(" "),function(l,g,r,n,f,c,d,q,k,p){return l([c,d],{templateString:q,
inDrag:!1,inSlider:!1,realWidth:30,realHeight:30,ratio:null,imageSrc:null,_currentX:null,_currentY:null,_currentTop:0,_currentLeft:0,postCreate:function(){this._dragingHandlers=[];this.setImageSrc(this.imageSrc);this.own(n(this.ownerDocument,"mousemove",r.hitch(this,"_onMouseMove")));this.own(n(this.ownerDocument,"mouseup",r.hitch(this,"_onMouseUp")));this.loadingImg.src=require.toUrl("jimu")+"/images/loading.gif";this.own(n(this.baseImage,"load",r.hitch(this,function(){this._init();g.setStyle(this.loadingImg,
"display","none")})))},setImageSrc:function(c){g.setAttr(this.viewerImage,"src",c);g.setAttr(this.baseImage,"src",c)},getImageSize:function(){return{w:this._currentImageWidth,h:this._currentImageHeight}},getCropSize:function(){return{l:-this._currentLeft,t:-this._currentTop,w:this.idealWidth,h:this.idealHeight}},_init:function(){var c=this._getComputedStyle(this.cropSection),b=g.getContentBox(this.cropSection),d=this._getComputedStyle(this.baseImage),a=parseFloat(d.width)||this.baseImage.offsetWidth,
d=parseFloat(d.height)||this.baseImage.offsetHeight,l=a/d;this._maxImageWidth=a;this._maxImageHeight=d;if(d<this.realHeight&&a<this.realWidth)c=p.substitute({width:this.realWidth,height:this.realHeight},this.nls.cropWaining),setTimeout(r.hitch(this,function(){this.popup.close()}),50),new k({message:c});else{this.idealWidth=this.realWidth;this.idealHeight=this.realHeight;var n=this.ratio=this.ratio?this.ratio:this.realWidth/this.realHeight;1<=this.ratio?b.h*this.ratio<=b.w?(this.idealHeight=b.h,this.idealWidth=
b.h*this.ratio):(this.idealHeight=this._findProperlyValue(0,b.h,b.w-5,function(a){return a*n}),this.idealWidth=this.idealHeight*this.ratio):b.w/this.ratio<=b.h?(this.idealWidth=b.w,this.idealHeight=b.w/this.ratio):(this.idealWidth=this._findProperlyValue(0,b.w,b.h-5,function(a){return a/n}),this.idealHeight=this.idealWidth/this.ratio);g.setStyle(this.viewerBox,{width:this.idealWidth+"px",height:this.idealHeight+"px"});c=Math.abs((parseFloat(c.height)-this.idealHeight)/2);g.setStyle(this.cropSection,
{paddingTop:c+"px",paddingBottom:c+"px"});1<=l?this.idealHeight*l>=this.idealWidth?(g.setStyle(this.viewerImage,"height",this.idealHeight+"px"),g.setStyle(this.baseImage,"height",this.idealHeight+"px")):(c=this._findProperlyValue(0,this.idealWidth,this.idealWidth,function(a){return a*l}),g.setStyle(this.viewerImage,"height",c+"px"),g.setStyle(this.baseImage,"height",c+"px")):this.idealWidth/l>=this.idealHeight?(g.setStyle(this.viewerImage,"width",this.idealWidth+"px"),g.setStyle(this.baseImage,"width",
this.idealWidth+"px")):(c=this._findProperlyValue(0,this.idealHeight,this.idealHeight,function(a){return a/l}),g.setStyle(this.viewerImage,"width",c+"px"),g.setStyle(this.baseImage,"width",c+"px"));f(".hide-status",this.domNode).removeClass("hide-status");d=this._getComputedStyle(this.baseImage);a=parseFloat(d.width)||this.baseImage.offsetWidth;d=parseFloat(d.height)||this.baseImage.offsetHeight;this._minImageWidth=a;this._minImageHeight=d;this._currentImageWidth=a;this._currentImageHeight=d;this._currentTop=
-(d-this.idealHeight)/2;this._currentLeft=-(a-this.idealWidth)/2;g.setStyle(this.baseImage,{top:this._currentTop+"px",left:this._currentLeft+"px"});g.setStyle(this.viewerImage,{top:this._currentTop+"px",left:this._currentLeft+"px"});this._zoomRatio=this._maxImageWidth/this._minImageWidth;1>=this._zoomRatio&&g.addClass(this.zoomInBtn,"disable-zoom");g.addClass(this.zoomOutBtn,"disable-zoom");this._latestPercentage=window.isRTL?100:0}},_findProperlyValue:function(c,b,d,a,f){f=isFinite(f)?parseFloat(f):
1;d=0>d-f||0>d+f?f:d;var g=(c+b)/2,h=a(g);if(h<=d+f&&h>=d-f)return g;if(h>d)return this._findProperlyValue(c,g,d,a);if(h<d)return this._findProperlyValue(g,b,d,a)},_getComputedStyle:function(c){c=g.getMarginBox(c);return{width:c.w,height:c.h,left:c.l,top:c.t}},_onViewerMouseDown:function(c){var b=this._getComputedStyle(this.baseImage),d=this._getComputedStyle(this.viewerContent);this._maxOffsetLeft=parseFloat(d.width)-parseFloat(b.width);this._maxOffsetTop=parseFloat(d.height)-parseFloat(b.height);
this._maxOffsetLeft=0<this._maxOffsetLeft?0:this._maxOffsetLeft;this._maxOffsetTop=0<this._maxOffsetTop?0:this._maxOffsetTop;this.inDrag=!0;this._currentX=c.clientX;this._currentY=c.clientY;this._stopSelect()},_stopSelect:function(){this._dragingHandlers=this._dragingHandlers.concat([n(this.ownerDocument,"dragstart",function(c){c.stopPropagation();c.preventDefault()}),n(this.ownerDocumentBody,"selectstart",function(c){c.stopPropagation();c.preventDefault()})])},_removeStopSelect:function(){for(var c=
this._dragingHandlers.pop();c;)c.remove(),c=this._dragingHandlers.pop()},_onViewerMouseUp:function(c){this.inDrag&&(this.inDrag=!1,this._resetImagePosition(c.clientX,c.clientY),this._removeStopSelect(),c.stopPropagation())},_onSliderMouseDown:function(c){if(!(1>=this._zoomRatio)){this.inSlider=!0;this._currentX=c.clientX;this._currentY=c.clientY;var b=g.position(this.sliderNode);this._startSliderLeft=b.x;this._sliderWidth=b.w;this._stopSelect();c.stopPropagation()}},_onSliderMouseUp:function(c){if(!(1>=
this._zoomRatio)&&this.inSlider){this.inSlider=!1;this._resetSliderButtonPosition(c.clientX);var b=this._getComputedStyle(this.baseImage);this._currentLeft=parseFloat(b.left);this._currentTop=parseFloat(b.top);this._latestPercentage=100*((c.clientX-this._startSliderLeft)/this._sliderWidth);this._latestPercentage=this._normalizePercentage(this._latestPercentage);this._removeStopSelect();c.stopPropagation()}},_onMouseMove:function(c){this.inDrag&&this._resetImagePosition(c.clientX,c.clientY);this.inSlider&&
!(1>=this._zoomRatio)&&this._resetSliderButtonPosition(c.clientX,c.clientY)},_onMouseUp:function(c){this.inDrag&&this._onViewerMouseUp(c);this.inSlider&&this._onSliderMouseUp(c)},_onZoomOutClick:function(){1>=this._zoomRatio||this._zoomImage("out")},_onZoomInClick:function(){1>=this._zoomRatio||this._zoomImage("in")},_zoomImage:function(c){var b=0;this._latestPercentage=this._normalizePercentage(this._latestPercentage);"in"===c?b=window.isRTL?this._latestPercentage-20:this._latestPercentage+20:"out"===
c&&(b=window.isRTL?this._latestPercentage+20:this._latestPercentage-20);c=this._normalizePercentage(b);this._moveSliderButton(c,this._latestPercentage);this._latestPercentage=c;c=this._getComputedStyle(this.baseImage);this._currentLeft=parseFloat(c.left);this._currentTop=parseFloat(c.top)},_resetImagePosition:function(c,b){var d=c-this._currentX,a=b-this._currentY;0<=this._currentTop+a?(g.setStyle(this.baseImage,"top",0),g.setStyle(this.viewerImage,"top",0),this._currentY=b,this._currentTop=0):this._currentTop+
a<=this._maxOffsetTop?(g.setStyle(this.baseImage,"top",this._maxOffsetTop+"px"),g.setStyle(this.viewerImage,"top",this._maxOffsetTop+"px"),this._currentY=b,this._currentTop=this._maxOffsetTop):(g.setStyle(this.baseImage,"top",this._currentTop+a+"px"),g.setStyle(this.viewerImage,"top",this._currentTop+a+"px"),this._currentY=b,this._currentTop+=a);0<=this._currentLeft+d?(g.setStyle(this.baseImage,"left",0),g.setStyle(this.viewerImage,"left",0),this._currentX=c,this._currentLeft=0):this._currentLeft+
d<=this._maxOffsetLeft?(g.setStyle(this.baseImage,"left",this._maxOffsetLeft+"px"),g.setStyle(this.viewerImage,"left",this._maxOffsetLeft+"px"),this._currentX=c,this._currentLeft=this._maxOffsetLeft):(g.setStyle(this.baseImage,"left",this._currentLeft+d+"px"),g.setStyle(this.viewerImage,"left",this._currentLeft+d+"px"),this._currentX=c,this._currentLeft+=d)},_normalizePercentage:function(c){c=0>c?0:c;return 100<c?100:c},_resetSliderButtonPosition:function(c){c=100*((c-this._startSliderLeft)/this._sliderWidth);
c=this._normalizePercentage(c);this._moveSliderButton(c,this._latestPercentage)},_moveSliderButton:function(c,b){0>=c?g.addClass(this.zoomOutBtn,"disable-zoom"):g.removeClass(this.zoomOutBtn,"disable-zoom");100<=c?g.addClass(this.zoomInBtn,"disable-zoom"):g.removeClass(this.zoomInBtn,"disable-zoom");g.setStyle(this.sliderButton,"left",c+"%");window.isRTL&&(c=100-c,b=100-b);var d=this._minImageWidth*(this._zoomRatio-1)*c/100,a=this._minImageHeight*(this._zoomRatio-1)*c/100,f=this._getComputedStyle(this.baseImage);
this._currentLeft=parseFloat(f.left);this._currentTop=parseFloat(f.top);var f=(Math.abs(this._currentLeft)+this.idealWidth/2)*((this._minImageWidth+d)/this._currentImageWidth-1),k=(Math.abs(this._currentTop)+this.idealHeight/2)*((this._minImageWidth+d)/this._currentImageWidth-1);g.setStyle(this.baseImage,{width:this._minImageWidth+d+"px",height:this._minImageHeight+a+"px"});g.setStyle(this.viewerImage,{width:this._minImageWidth+d+"px",height:this._minImageHeight+a+"px"});this._currentImageWidth=this._minImageWidth+
d;this._currentImageHeight=this._minImageHeight+a;if(0<=c-b)g.setStyle(this.baseImage,{top:this._currentTop-k+"px",left:this._currentLeft-f+"px"}),g.setStyle(this.viewerImage,{top:this._currentTop-k+"px",left:this._currentLeft-f+"px"});else{var h=0,l=0,h=0<=this._currentTop-k?0:this._currentTop-k+this._minImageHeight+a<=this.idealHeight?this.idealHeight-this._minImageHeight-a:this._currentTop-k,l=0<=this._currentLeft-f?0:this._currentLeft-f+this._minImageWidth+d<=this.idealWidth?this.idealWidth-this._minImageWidth-
d:this._currentLeft-f;g.setStyle(this.baseImage,{top:h+"px",left:l+"px"});g.setStyle(this.viewerImage,{top:h+"px",left:l+"px"})}this._latestPercentage=c}})})},"widgets/Filter/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/Filter/setting/SingleFilterSetting.html":'\x3cdiv\x3e\r\n\t\x3ctable\x3e\r\n\t\t\x3ccolgroup\x3e\r\n\t\t\t\x3ccol width\x3d"100"\x3e\x3c/col\x3e\r\n\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\x3c/colgroup\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd\x3e${jimuNls.common.layer}\x3c/td\x3e\r\n\t\t\t\t\x3ctd data-dojo-attach-point\x3d"layerTd"\x3e\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd\x3e${jimuNls.common.title}\x3c/td\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"nameTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-event\x3d"change:_onNameTextBoxChanged" data-dojo-props\x3d\'required:true,trim:true\' style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd\x3e${jimuNls.common.icon}\x3c/td\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"click-picker" data-dojo-attach-event\x3d"click:_onImageChooserDivClicked"\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/ImageChooser" data-dojo-attach-point\x3d"imageChooser" data-dojo-props\x3d"cropImage:true,showSelfImg:true,goldenWidth:16,goldenHeight:16,format:[\'image/gif\',\'image/png\',\'image/jpeg\']" class\x3d"jimu-float-leading" style\x3d"width:16px;height:16px;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"separator jimu-float-leading"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"jimu-icon jimu-icon-down-arrow-8 jimu-float-leading"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv style\x3d"margin-top:20px;"\x3e\r\n\t\t\x3cdiv\x3e${nls.filterExpression}\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"filterDiv"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/Filter.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"contentSection" class\x3d"content-section"\x3e\r\n\t\t\x3cdiv class\x3d"add-btn-section"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnAddExp" data-dojo-attach-event\x3d"click:_onBtnAddExpClick"\r\n\t\t\t class\x3d"add-with-icon jimu-state-disabled add-expression jimu-float-leading"\x3e\r\n\t\t\t\t\x3cspan data-dojo-attach-point\x3d"iconAddExp" class\x3d"jimu-icon jimu-icon-add jimu-state-disabled"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"add-label"\x3e${nls.addAnotherExpression}\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnAddSet" data-dojo-attach-event\x3d"click:_onBtnAddSetClick"\r\n\t\t\t class\x3d"add-with-icon jimu-state-disabled add-set jimu-float-leading"\x3e\r\n\t\t\t\t\x3cspan data-dojo-attach-point\x3d"iconAddSet" class\x3d"jimu-icon jimu-icon-add jimu-state-disabled"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"add-label"\x3e${nls.addSet}\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"matchMsg" style\x3d"margin-top:11px;margin-bottom:11px;display:none;"\x3e\r\n\t\t\t\x3cspan\x3e${nls.strMatchMsgPart1}\x3c/span\x3e\r\n\t\t\t\x3cselect data-dojo-attach-point\x3d"allAnySelect"\x3e\r\n\t\t\t\t\x3coption value\x3d"AND" selected\x3e${nls.all}\x3c/option\x3e\r\n\t\t\t\t\x3coption value\x3d"OR"\x3e${nls.any}\x3c/option\x3e\r\n\t\t\t\x3c/select\x3e\r\n\t\t\t\x3cspan\x3e${nls.strMatchMsgPart2}\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\t\x3cdiv class\x3d"allExpsBox" data-dojo-attach-point\x3d"allExpsBox"\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"errorSection" style\x3d"display:none;"\x3e\r\n\t\t\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"errorTip" class\x3d"error-tip"\x3e\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"noFilterTipSection" class\x3d"no-filter-tip" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_SingleFilter.html":'\x3cdiv\x3e\r\n\t\x3ctable class\x3d"setting-table" cellpadding\x3d"0" cellspacing\x3d"0" cellpadding\x3d"10px" style\x3d"table-layout:fixed;"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd class\x3d"fields-td" nowrap\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"fieldsSelect" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-attach-event\x3d"change:_onFieldsSelectChange"  data-dojo-props\x3d\'searchAttr:"displayName",required:true,intermediateChanges:true\' class\x3d"dijit-form-FilteringSelect" style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"operators-td" nowrap\x3e\r\n\t\t\t\t\t\x3cselect data-dojo-attach-point\x3d"operatorsSelect" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-event\x3d"change:_onOperatorsSelectChange" style\x3d"width:100%;" class\x3d"dijit-form-Select restrict-select-width"\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"none"\x3e${nls.none}\x3c/option\x3e\r\n\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"value-td" nowrap\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"attributeValueContainer" class\x3d"value-container"\x3e\r\n\t\t\t\t\t\t\x3cdiv\x3e\r\n\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"allValueBoxContainer" style\x3d"width:100%;"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"stringTextBoxContainer" style\x3d"width:100%;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"stringTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true" style\x3d"width:100%;" class\x3d"dijit-form-ValidationTextBox" /\x3e\r\n\r\n\t\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"stringCodedValuesFS" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-props\x3d\'searchAttr:"name",required:true,intermediateChanges:true\' class\x3d"dijit-form-FilteringSelect" style\x3d"display:none;width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"numberTextBoxContainer" style\x3d"display:none;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"numberTextBox" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d\'"required":true,intermediateChanges:true,constraints: {pattern: "#####0.##########"}\' class\x3d"dijit-form-NumberTextBox" style\x3d"width:100%;" /\x3e\r\n\r\n\t\t\t\t\t\t\t\t\t\x3ctable data-dojo-attach-point\x3d"numberRangeTable" style\x3d"display:none;width:100%;border-collapse:collapse;table-layout:fixed;" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:40%;"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"numberTextBox1" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-event\x3d"blur:_onRangeNumberBlur" data-dojo-props\x3d\'"required":true,intermediateChanges:true,constraints: {pattern: "#####0.##########"}\' class\x3d"dijit-form-NumberTextBox" style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:20%;text-align:center;"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cspan\x3e${nls.and}\x3c/span\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:40%;"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"numberTextBox2" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-event\x3d"blur:_onRangeNumberBlur" data-dojo-props\x3d\'"required":true,intermediateChanges:true,constraints: {pattern: "#####0.##########"}\' class\x3d"dijit-form-NumberTextBox" style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/table\x3e\r\n\r\n\t\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"numberCodedValuesFS" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-props\x3d\'searchAttr:"name",required:true,intermediateChanges:true\' class\x3d"dijit-form-FilteringSelect" style\x3d"display:none;width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"dateTextBoxContainer" style\x3d"display:none;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"dateTextBox" data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-props\x3d\'value:new Date(),required:true,trim:true\' class\x3d"dijit-form-DateTextBox" style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\t\t\t\t\t\x3ctable data-dojo-attach-point\x3d"dateRangeTable" style\x3d"display:none;width:100%;border-collapse:collapse;table-layout:fixed;" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:40%;"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"dateTextBox1" data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-attach-event\x3d"change:_onRangeDateBlur" data-dojo-props\x3d\'value:new Date(),required:true,trim:true\' class\x3d"dijit-form-DateTextBox" style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:20%;text-align:center;"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cspan\x3e${nls.and}\x3c/span\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"dateTextBox2" data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-attach-event\x3d"change:_onRangeDateBlur" data-dojo-props\x3d\'value:new Date(),required:true,trim:true\' class\x3d"dijit-form-DateTextBox" style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"fieldsSelect2" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-props\x3d\'searchAttr:"name"\' class\x3d"dijit-form-FilteringSelect" style\x3d"display:none;width:100%;"\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"uniqueValuesSelect" data-dojo-type\x3d"dijit/form/FilteringSelect"  data-dojo-props\x3d\'searchAttr:"label"\' class\x3d"dijit-form-FilteringSelect" style\x3d"display:none;width:100%;"\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\t\t\x3cdiv class\x3d"radio-table-container"\x3e\r\n\t\t\t\t\t\t\t\x3ctable class\x3d"radio-table" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"valueRadio" checked\x3d"true" disabled  title\x3d"${nls.valueTooltip}" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"valueLabel" title\x3d"${nls.valueTooltip}"\x3e${nls.value}\x3c/label\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"fieldRadio" disabled title\x3d"${nls.fieldTooltip}" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"fieldLabel" title\x3d"${nls.fieldTooltip}"\x3e${nls.field}\x3c/label\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctd data-dojo-attach-point\x3d"uniqueTd"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"uniqueRadio" disabled title\x3d"${nls.uniqueValueTooltip}" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"uniqueLabel" title\x3d"${nls.uniqueValueTooltip}"\x3e${nls.unique}\x3c/label\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"delete-td" nowrap\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"jimu-icon jimu-icon-delete" data-dojo-attach-point\x3d"btnDelete"\r\n\t\t\t\t\t data-dojo-attach-event\x3d"click:_destroySelf"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"askvalues"\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"cbxAskValues" label\x3d"${nls.askForValues}" class\x3d"jimu-trailing-margin6"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"cbxCaseSensitive" label\x3d"${nls.caseSensitive}" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"promptSection" class\x3d"prompt"\x3e\r\n\t\t\x3ctable data-dojo-attach-point\x3d"promptTable" cellpadding\x3d"0" cellspacing\x3d"0" class\x3d"prompt-table"\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3e${nls.prompt}\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"second-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"promptTB" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true" style\x3d"width:100%;" class\x3d"dijit-form-ValidationTextBox" \x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3e${nls.hint}\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"second-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"hintTB" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"trim:true" style\x3d"width:100%;" class\x3d"dijit-form-ValidationTextBox" \x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/Calendar.html":'\x3cdiv class\x3d"dijitCalendarContainer dijitInline" role\x3d"presentation" aria-labelledby\x3d"${id}_mddb ${id}_year"\x3e\r\n\t\x3cdiv class\x3d"dijitReset dijitCalendarMonthContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d\'dijitReset dijitCalendarArrow dijitCalendarDecrementArrow\' data-dojo-attach-point\x3d"decrementMonth"\x3e\r\n\t\t\t\x3cimg src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitCalendarIncrementControl dijitCalendarDecrease" role\x3d"presentation"/\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"decreaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e-\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d\'dijitReset dijitCalendarArrow dijitCalendarIncrementArrow\' data-dojo-attach-point\x3d"incrementMonth"\x3e\r\n\t\t\t\x3cimg src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitCalendarIncrementControl dijitCalendarIncrease" role\x3d"presentation"/\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"increaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e+\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"monthNode" class\x3d"dijitInline"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3ctable cellspacing\x3d"0" cellpadding\x3d"0" role\x3d"grid" data-dojo-attach-point\x3d"gridNode"\x3e\r\n\t\t\x3cthead\x3e\r\n\t\t\t\x3ctr role\x3d"row"\x3e\r\n\t\t\t\t${!dayCellsHtml}\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/thead\x3e\r\n\t\t\x3ctbody data-dojo-attach-point\x3d"dateRowsNode" data-dojo-attach-event\x3d"ondijitclick: _onDayClick" class\x3d"dijitReset dijitCalendarBodyContainer"\x3e\r\n\t\t\t\t${!dateRowsHtml}\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"dijitReset dijitCalendarYearContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d"dijitCalendarYearLabel"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"previousYearLabelNode" class\x3d"dijitInline dijitCalendarPreviousYear" role\x3d"button"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"currentYearLabelNode" class\x3d"dijitInline dijitCalendarSelectedYear" role\x3d"button" id\x3d"${id}_year"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"nextYearLabelNode" class\x3d"dijitInline dijitCalendarNextYear" role\x3d"button"\x3e\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:jimu/dijit/templates/_FilterSet.html":'\x3cdiv\x3e\r\n\t\x3ctable class\x3d"header-table" cellspacing\x3d"0" cellpadding\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cdiv\x3e\r\n\t\t\t\t\t\t\x3cspan\x3e${nls.strMatchMsgPart1}\x3c/span\x3e\r\n\t\t\t\t\t\t\x3cselect data-dojo-attach-point\x3d"allAnySelect"\x3e\r\n\t\t\t\t\t\t\t\x3coption value\x3d"AND" selected\x3e${nls.all}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\x3coption value\x3d"OR"\x3e${nls.any}\x3c/option\x3e\r\n\t\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\t\t\x3cspan\x3e${nls.strMatchMsgPart2}\x3c/span\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:15px;padding-right:10px;"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnDelete" data-dojo-attach-event\x3d"onclick:_destroySelf"\r\n\t\t\t\t\t class\x3d"jimu-icon jimu-icon-delete"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:15px;padding-right:14px;"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnAdd" class\x3d"jimu-icon jimu-icon-add"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"allExpsBox"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/LayerChooserFromMapWithDropbox.html":'\x3cdiv\x3e\r\n  \x3ctable data-dojo-attach-event\x3d"onclick: _onDropDownClick"\x3e\r\n    \x3ccolgroup\x3e\r\n      \x3ccol width\x3d"10px"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"30px"\x3e\x3c/col\x3e\r\n    \x3c/colgroup\x3e\r\n    \x3ctbody\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd\x3e\x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"layer-name jimu-ellipsis" data-dojo-attach-point\x3d"layerNameNode"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"drop-select jimu-float-trailing" data-dojo-attach-point\x3d"dropArrowNode"\x3e\r\n            \x3cdiv class\x3d"jimu-icon jimu-icon-down-arrow-8"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/tbody\x3e\r\n  \x3c/table\x3e\r\n\x3c/div\x3e\r\n',
"url:jimu/dijit/templates/_TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"contentNode" class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\r\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\r\n\t\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\r\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:jimu/dijit/templates/ImageChooser.html":'\x3cdiv class\x3d"jimu-image-chooser js-fileapi-wrapper"\x3e\r\n  \x3cdiv class\x3d"hint" data-dojo-attach-point\x3d"hintText"\x3e\r\n\t\t\x3cspan class\x3d"display-text" data-dojo-attach-point\x3d"displayText"\x3e\x3c/span\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"hint" data-dojo-attach-point\x3d"hintImage"\x3e\r\n\t\t\x3cimg class\x3d"display-image" data-dojo-attach-point\x3d"selfImg"\x3e\r\n  \x3c/div\x3e\r\n  \x3cform data-dojo-attach-point\x3d"fileForm"\x3e\r\n    \x3clabel data-dojo-attach-point\x3d"mask"\x3e\x3c/label\x3e\r\n    \x3cinput type\x3d"file" data-dojo-attach-point\x3d"fileInput"\x3e\r\n  \x3c/form\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_CropImage.html":'\x3cdiv class\x3d"jimu-crop-image"\x3e\r\n\t\x3cdiv class\x3d"crop-section" data-dojo-attach-point\x3d"cropSection"\x3e\r\n\t\t\x3cdiv class\x3d"viewer-box hide-status" data-dojo-attach-point\x3d"viewerBox"\x3e\r\n\t\t\t\x3cdiv class\x3d"viewer-content" data-dojo-attach-point\x3d"viewerContent"\x3e\r\n\t\t\t\t\x3cimg class\x3d"viewer-image hide-status" data-dojo-attach-point\x3d"viewerImage" src\x3d""\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cimg class\x3d"base-image hide-status" data-dojo-attach-point\x3d"baseImage" data-dojo-attach-event\x3d"mousedown:_onViewerMouseDown,mouseup:_onViewerMouseUp"\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cimg class\x3d"loading-image" data-dojo-attach-point\x3d"loadingImg" src\x3d""\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"controller hide-status" data-dojo-attach-point\x3d"zoomController"\x3e\r\n\t\t\x3cdiv class\x3d"zoom-out" data-dojo-attach-point\x3d"zoomOutBtn" data-dojo-attach-event\x3d"click:_onZoomOutClick"\x3e-\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"slider" data-dojo-attach-point\x3d"sliderNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"button" data-dojo-attach-point\x3d"sliderButton" data-dojo-attach-event\x3d"mousedown:_onSliderMouseDown,mouseup:_onSliderMouseUp"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"horizontal"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"zoom-in" data-dojo-attach-point\x3d"zoomInBtn" data-dojo-attach-event\x3d"click:_onZoomInClick"\x3e+\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/Filter/setting/Setting.html":'\x3cdiv\x3e\r\n\t\x3cdiv\x3e${nls.addTaskTip}\x3c/div\x3e\r\n\t\x3cdiv class\x3d"content"\x3e\r\n\t\t\x3cdiv class\x3d"items-list jimu-not-selectable"\x3e\r\n\t\t\t\x3cdiv class\x3d"add-btn" data-dojo-attach-event\x3d"click:_onBtnAddItemClicked"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"tip"\x3e${nls.newFilter}\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"items-list-content" data-dojo-attach-point\x3d"listContent" data-dojo-attach-event\x3d"click:_onListContentClicked"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"separator not-visible" data-dojo-attach-point\x3d"separator"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"single-setting-content" data-dojo-attach-point\x3d"singleSettingContent"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Filter/setting/css/style.css":'.jimu-widget-filter-setting{width: 100%; height: 100%;}.jimu-widget-filter-setting .not-visible{display: none;}.jimu-widget-filter-setting .content{position: absolute; left: 0; right: 0; top: 40px; bottom: 0;}.jimu-widget-filter-setting .content \x3e div{position: absolute; top: 0; bottom: 0;}.jimu-widget-filter-setting .items-list{left: 0; width: 300px;}.jimu-widget-filter-setting \x3e .content \x3e .separator{left: 320px; width: 1px; background-color: #ccc;}.jimu-widget-filter-setting .single-setting-content{right: 0; width: 610px;}.jimu-rtl .jimu-widget-filter-setting .items-list{left: auto; right: 0;}.jimu-rtl .jimu-widget-filter-setting \x3e .content \x3e .separator{left: auto; right: 320px;}.jimu-rtl .jimu-widget-filter-setting .single-setting-content{right: auto; left: 0;}.jimu-widget-filter-setting .items-list-content{position: absolute; left: 0; right: 0; top: 50px; bottom: 0; overflow: auto;}.jimu-widget-filter-setting .items-list-content .item{position: relative; width: 100%; height: 40px; border-top: 1px solid #F3F3F3; cursor: pointer;}.jimu-widget-filter-setting .items-list-content .item:hover{background-color: #F9F9F9;}.jimu-widget-filter-setting .items-list-content .item.selected{background-color: #F3F3F3 !important; border-left: 4px solid #24B5CC;}.jimu-rtl .jimu-widget-filter-setting .items-list-content .item.selected{border-left: 0; border-right: 4px solid #24B5CC;}.jimu-widget-filter-setting .items-list-content .item \x3e *{cursor: pointer;}.jimu-widget-filter-setting .items-list-content .item:first-child{border-top: 0;}.jimu-widget-filter-setting .items-list-content .item .label{position: absolute; left: 8px; right: 8px; top: 0; bottom: 0; line-height: 40px; font-size: 12px; color: #353535;}.jimu-widget-filter-setting .items-list-content .item.selected .label{font-weight: bold; color: #000;}.jimu-widget-filter-setting .items-list-content .item .actions{position: relative; display: none; height: 100%; overflow: hidden; background-color: #F9F9F9;}.jimu-widget-filter-setting .items-list-content .item:hover .actions{display: block;}.jimu-widget-filter-setting .items-list-content .item.selected .actions{background-color: #F3F3F3 !important;}.jimu-widget-filter-setting .items-list-content .item .action{width: 12px; height: 12px; background-repeat: no-repeat; background-position: center center; position: relative; top: 14px; cursor: pointer; margin: 0 5px;}.jimu-widget-filter-setting .items-list-content .item .action.up{background-image: url("images/up_normal.png");}.jimu-widget-filter-setting .items-list-content .item .action.up:hover{background-image: url("images/up_hover.png");}.jimu-widget-filter-setting .items-list-content .item .action.down{background-image: url("images/down_normal.png");}.jimu-widget-filter-setting .items-list-content .item .action.down:hover{background-image: url("images/down_hover.png");}.jimu-widget-filter-setting .items-list-content .item .action.delete{background-image: url("images/delete_normal.png");}.jimu-widget-filter-setting .items-list-content .item .action.delete:hover{background-image: url("images/delete_hover.png");}.jimu-widget-filter-setting .items-list-content .item:first-child .action.up{display: none;}.jimu-widget-filter-setting .items-list-content .item:last-child .action.down{display: none;}.jimu-widget-filter-setting .add-btn{display: inline-block; width: 100%; height: 32px; background-color: #24B5CC; color: #ffffff; text-align: center; cursor: pointer;}.jimu-widget-filter-setting .add-btn:hover{background-color: #0090A7;}.jimu-widget-filter-setting .add-btn \x3e div{display: inline-block; cursor: pointer; height: 32px; line-height: 32px; font-size: 12px;}.jimu-widget-filter-setting .add-btn .icon{position: relative; top: 1px; width: 12px; height: 12px; background: url("images/add.png") center center no-repeat; background-size: contain;}.jimu-widget-filter-setting .add-btn .tip{margin-left: 8px;}.jimu-rtl .jimu-widget-filter-setting .add-btn .tip{margin-left: 0; margin-right: 8px;}html.hr .jimu-widget-filter-setting .items-list{width: 280px;}html.hr .jimu-widget-filter-setting \x3e .content \x3e .separator{left: 295px;}html.hr .jimu-widget-filter-setting .single-setting-content{width: 650px;}.jimu-widget-singlefilter-setting \x3e table{width: 100%; table-layout: fixed; border-collapse: collapse;}.jimu-widget-singlefilter-setting \x3e table \x3e tbody \x3e tr \x3e td{padding: 5px 0;}.jimu-widget-singlefilter-setting .jimu-filter .allExpsBox{max-height: 300px; overflow: auto;}.jimu-widget-singlefilter-setting .click-picker{display: inline-block; border: 1px solid #D7D7D7; height: 24px; overflow: hidden; padding: 0 4px; cursor: pointer;}.jimu-widget-singlefilter-setting .click-picker .jimu-image-chooser{position: relative; top: 4px;}.jimu-widget-singlefilter-setting .click-picker .separator{position: relative; top: 4px; width: 1px; height: 16px; background-color: #D7D7D7; margin: 0 5px;}.jimu-widget-singlefilter-setting .click-picker .jimu-icon{position: relative; top: 8px;}',
"*now":function(l){l(['dojo/i18n!*preload*widgets/Filter/setting/nls/Setting*["ar","cs","da","de","en","el","es","et","fi","fr","he","hr","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sr","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])}}});
define("dojo/on dojo/query dojo/_base/html dojo/_base/lang dojo/_base/array dojo/_base/declare dijit/_WidgetsInTemplateMixin jimu/utils jimu/BaseWidgetSetting ./SingleFilterSetting jimu/LayerInfos/LayerInfos jimu/dijit/LoadingShelter".split(" "),function(l,g,r,n,f,c,d,q,k,p,e){return c([k,d],{baseClass:"jimu-widget-filter-setting",singleSetting:null,layerChooserSelect:null,layerInfosObj:null,postMixInProperties:function(){this.jimuNls=window.jimuNls;this.layerInfosObj=e.getInstanceSync();this.config&&
(this.config=this._getConfigWithValidDataSource(this.config))},_getConfigWithValidDataSource:function(b){var c={filters:[]};c.filters=f.filter(b.filters,n.hitch(this,function(a){return a.layerId?!!this.layerInfosObj.getLayerInfoById(a.layerId):!0}));return c},postCreate:function(){this.inherited(arguments);this.config&&this.setConfig(this.config)},_onListContentClicked:function(b){b=b.target||b.srcElement;var c=q.getAncestorDom(b,function(a){return r.hasClass(a,"item")},3);c&&(r.hasClass(b,"action")?
r.hasClass(b,"up")?c.previousElementSibling&&r.place(c,c.previousElementSibling,"before"):r.hasClass(b,"down")?c.nextElementSibling&&r.place(c,c.nextElementSibling,"after"):r.hasClass(b,"delete")&&(this.singleSetting&&this.singleSetting.target===c&&(this.singleSetting.destroy(),this.singleSetting=null),r.destroy(c),b=g(".item",this.listContent),0<b.length&&this._createSingleSetting(b[0])):this.singleSetting?this.singleSetting.target!==c&&this.singleSetting.getConfig()&&(this.singleSetting.destroy(),
this.singleSetting=null,this._createSingleSetting(c)):this._createSingleSetting(c))},_onBtnAddItemClicked:function(){if(this.singleSetting)if(this.singleSetting.getConfig())this.singleSetting.destroy(),this.singleSetting=null;else return;var b=this._createTarget();this._createSingleSetting(b,null)},_createSingleSetting:function(b){g(".item",this.listContent).removeClass("selected");this.singleSetting&&this.singleSetting.destroy();this.singleSetting=null;this.singleSetting=new p({map:this.map,nls:this.nls,
target:b,folderUrl:this.folderUrl,layerInfosObj:this.layerInfosObj});this.singleSetting.placeAt(this.singleSettingContent);this.own(l(this.singleSetting,"loading",n.hitch(this,function(){this.shelter.show()})));this.own(l(this.singleSetting,"unloading",n.hitch(this,function(){this.shelter.hide()})));this.own(l(this.singleSetting,"before-destroy",n.hitch(this,function(){r.addClass(this.separator,"not-visible")})));r.addClass(b,"selected");b.singleConfig?this.singleSetting.setConfig(b.singleConfig):
setTimeout(n.hitch(this,function(){this.singleSetting.showLayerChooserPopup()}),50);r.removeClass(this.separator,"not-visible")},_createTarget:function(b){b=b||"";return r.create("div",{"class":"item",innerHTML:'\x3cdiv class\x3d"label jimu-ellipsis" title\x3d"'+b+'"\x3e'+b+'\x3c/div\x3e\x3cdiv class\x3d"actions jimu-float-trailing"\x3e\x3cdiv class\x3d"delete action jimu-float-trailing"\x3e\x3c/div\x3e\x3cdiv class\x3d"down action jimu-float-trailing"\x3e\x3c/div\x3e\x3cdiv class\x3d"up action jimu-float-trailing"\x3e\x3c/div\x3e\x3c/div\x3e'},
this.listContent)},setConfig:function(b){var c=null;f.forEach(b.filters,n.hitch(this,function(a,b){var d=this._createTarget(a.name);d.singleConfig=a;0===b&&(c=d)}));c&&this._createSingleSetting(c)},getConfig:function(){if(this.singleSetting&&!this.singleSetting.getConfig())return!1;var b=g(".item",this.listContent),c={filters:[]};c.filters=f.map(b,n.hitch(this,function(a){return a.singleConfig}));return c},destroy:function(){this.singleSetting&&this.singleSetting.destroy();this.singleSetting=null;
this.inherited(arguments)}})});