// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/NearMe/setting/SymbolChooserPopup":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/on dojo/text!./SymbolChooserPopup.html jimu/dijit/SymbolChooser jimu/dijit/Popup dojo/domReady!".split(" "),function(f,v,q,l,b,a,e,c,m,g){return f([v,q],{templateString:c,baseClass:"jimu-widget-nearme-setting",postCreate:function(){this.own(e(this.okButton,"click",l.hitch(this,this._onOKButtonClicked)));
this._initSymbolChooser();this._createSymbolChooserPopup()},_initSymbolChooser:function(){this.symbolChooser=new m(this.symbolParams,a.create("div",{},this.symbolData));this.symbolChooser.startup()},_createSymbolChooserPopup:function(){this.popup=new g({titleLabel:this.symbolChooserTitle,width:420,height:400,content:this.domNode})},_onOKButtonClicked:function(){if(!b.contains(this.okButton,"jimu-state-disabled"))this.onOkClick()},onOkClick:function(a){return a}})})},"widgets/NearMe/setting/NetworkServiceChooser":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/on dojo/dom-class dojo/text!./NetworkServiceChooser.html jimu/dijit/ItemSelector dijit/Tree dojo/query esri/request dojo/store/Memory dojo/dom-construct dijit/tree/ObjectStoreModel jimu/dijit/LoadingIndicator dojox/validate/regexp jimu/dijit/Message dojo/domReady!".split(" "),
function(f,v,q,l,b,a,e,c,m,g,k,d,n,p,r,t,u){return f([v,q],{baseClass:"jimu-widget-nearme-setting",templateString:e,selectRouteURL:null,agolFlag:!1,serviceFlag:!1,startup:function(){this.inherited(arguments)},postCreate:function(){var d;this.routeChooser=new c({portalUrl:this.portalUrl,itemTypes:["Network analysis service"]});this.routeChooser.placeAt(this.itemSelectDiv);this.own(b(this.okButton,"click",l.hitch(this,function(b){if(!a.contains(this.okButton,"jimu-state-disabled"))this.onOkClick(b)})));
this.own(b(this.cancelButton,"click",l.hitch(this,function(a){this.onCancelClick(a)})));this.own(b(this.routeChooser,"item-selected",l.hitch(this,function(){a.remove(this.btnNext,"jimu-state-disabled")})));this.own(b(this.routeChooser,"none-item-selected",l.hitch(this,function(){a.add(this.btnNext,"jimu-state-disabled")})));this.own(b(this.serviceURL,"keyup",l.hitch(this,function(){""===l.trim(this.serviceURL.get("value"))?a.add(this.validateRouteURL,"jimu-state-disabled"):a.remove(this.validateRouteURL,
"jimu-state-disabled")})));this.own(b(this.validateRouteURL,"click",l.hitch(this,function(){a.contains(this.validateRouteURL,"jimu-state-disabled")||(this.serviceFlag=!0,this._fetchRouteLayer(this.routeLayerList))})));this.own(b(this.btnNext,"click",l.hitch(this,function(){a.contains(this.btnNext,"jimu-state-disabled")||(this.agolFlag=!0,this._fetchRouteLayer(this.agolRouteLayerList))})));d=g(".routeSearchRadio",this.routeSearch);this.own(b(d,"change",l.hitch(this,function(){this.organizationRadio&&
this.organizationRadio.checked?(a.add(this.serviceUrlDiv,"esriCTHidden"),this.agolFlag?(a.add(this.itemSelectDiv,"esriCTHidden"),a.remove(this.agolRouteLayerList,"esriCTHidden"),a.add(this.btnBack,"esriCTHidden")):(a.remove(this.itemSelectDiv,"esriCTHidden"),a.add(this.agolRouteLayerList,"esriCTHidden"),a.remove(this.btnNext,"esriCTHidden"),a.add(this.okButton,"jimu-state-disabled"))):(a.add(this.itemSelectDiv,"esriCTHidden"),a.remove(this.serviceUrlDiv,"esriCTHidden"),a.add(this.btnNext,"esriCTHidden"),
a.add(this.btnBack,"esriCTHidden"),a.add(this.agolRouteLayerList,"esriCTHidden"))})));this._initLoading()},_initLoading:function(){this.loading=new r({hidden:!0});this.loading.placeAt(this.domNode);this.loading.startup()},onOkClick:function(a){return a},onCancelClick:function(a){return a},_fetchRouteLayer:function(b){var d;d=this._getValidRouteURL();this.loading.show();k({url:d,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(l.hitch(this,function(c){var u=!1;c.hasOwnProperty("routeLayers")&&
(null!==c.routeLayers&&0<c.routeLayers.length)&&(a.add(this.itemSelectDiv,"esriCTHidden"),this.serviceFlag?(a.remove(this.serviceUrlDiv,"esriCTHidden"),a.add(this.agolRouteLayerList,"esriCTHidden"),a.add(this.btnNext,"esriCTHidden"),a.add(this.btnBack,"esriCTHidden"),this.serviceFlag=!1):(a.add(this.serviceUrlDiv,"esriCTHidden"),a.remove(this.agolRouteLayerList,"esriCTHidden"),a.add(this.btnNext,"esriCTHidden"),a.remove(this.btnBack,"esriCTHidden"),this.agolFlag=!1),this._createTree(d,c.routeLayers,
b),u=!0);u||(this._resetRouteSearch(b,this.nls.networkServiceChooser.invalidRouteServiceURL),this.loading.hide())}),l.hitch(this,function(a){a&&"Rate limit exceeded. Please try again later."===a.message?this._resetRouteSearch(b,this.nls.networkServiceChooser.rateLimitExceeded):a&&"Error invoking service"===a.message?this._resetRouteSearch(b,this.nls.networkServiceChooser.errorInvokingService):this._resetRouteSearch(b,this.nls.networkServiceChooser.invalidRouteServiceURL);this.loading.hide()}))},_getValidRouteURL:function(){var a,
b,d,c;this.routeChooser&&this.agolFlag?(a=this.routeChooser.getSelectedItem(),b=a.url):b=this.serviceURL.value;d=b.lastIndexOf("/");c=b.substr(0,d+1);a=this._urlValidator(c);this.routeName="";a&&(this.routeName=b.substring(d+1,b.length+1),b=c);return b},_createTree:function(b,c,u){var e=this,k,h;n.empty(u);k={data:[{id:1,name:"Route Layers",url:b,root:!0}],getChildren:function(w){return this.query({parent:w.id})}};if(this.routeName)for(h=0;h<c.length;h++)this.routeName===c[h]&&k.data.push({id:c[h],
name:c[h],url:b+c[h],parent:1});else for(h=0;h<c.length;h++)k.data.push({id:c[h],name:c[h],url:b+"/"+c[h],parent:1});b=new d(k);b=new p({store:b,query:{root:!0}});b=new m({model:b,onClick:function(w){1===w.id?a.add(e.okButton,"jimu-state-disabled"):(a.remove(e.okButton,"jimu-state-disabled"),e.selectRouteURL=w.url)},getIconStyle:l.hitch(this,function(w){var a;if(!w||"root"===w.id)return null;a={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""};
a.backgroundImage="url("+this.folderUrl+"images/"+(1===w.id?"group-layer.png":"route-layer.png")+")";return a})});b.placeAt(u).startup();this.routeName&&1<k.data.length&&(b.set("paths",[["1",this.routeName]]),a.remove(this.okButton,"jimu-state-disabled"),this.selectRouteURL=k.data[1].url);this.loading.hide()},_resetRouteSearch:function(a,b){this._errorMessage(b);n.empty(a);this.loading.hide();this.serviceFlag=this.agolFlag=!1},_onBtnBackClicked:function(){a.remove(this.itemSelectDiv,"esriCTHidden");
a.add(this.serviceUrlDiv,"esriCTHidden");a.add(this.agolRouteLayerList,"esriCTHidden");a.remove(this.btnNext,"esriCTHidden");a.add(this.btnBack,"esriCTHidden")},_errorMessage:function(a){(new u({message:a})).message=a},_urlValidator:function(a){var b;b="^"+t.url({allowNamed:!0,allLocal:!1});b=RegExp(b,"g").test(a);a=/\/Route\/NAServer/gi.test(a);return b&&a}})})},"jimu/dijit/ItemSelector":function(){define("dojo/_base/declare dojo/topic dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/ItemSelector.html dojo/Evented dojo/_base/lang dojo/_base/config dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/promise/all dojo/query dojo/on jimu/utils jimu/portalUtils jimu/tokenUtils jimu/portalUrlUtils jimu/dijit/ViewStack jimu/dijit/Search jimu/dijit/TabContainer3 jimu/dijit/_ItemTable".split(" "),
function(f,v,q,l,b,a,e,c,m,g,k,d,n,p,r,t,u,y,s,E,C,A,h){return f([q,l,b,e],{templateString:a,declaredClass:"jimu.dijit.ItemSelector",baseClass:"jimu-item-selector",tab:null,_user:null,_group:null,_allPublicPortalQuery:null,_filterPublicPortalQuery:null,_allPublicOnlineQuery:null,_filterPublicOnlineQuery:null,_allOrganizationQuery:null,_filterOrganizationQuery:null,_allMyContentQuery:null,_filterMyContentQuery:null,_allGroupQuery:null,_filterGroupQuery:null,_isPublicTabShow:!1,_signIn:!1,_itemTypeQueryString:"",
_typeKeywordQueryString:"",portalUrl:null,itemTypes:"",typeKeywords:"",showOnlineItems:!0,onlyShowOnlineFeaturedItems:!1,postMixInProperties:function(){this.portalUrl=s.getStandardPortalUrl(this.portalUrl);this.showOnlineItems=!1===this.showOnlineItems?!1:!0;this.itemTypes&&0<this.itemTypes.length||(this.itemTypes=[]);this._itemTypes="";g.forEach(this.itemTypes,c.hitch(this,function(a,b){this._itemTypes+='"'+a+'"';b!==this.itemTypes.length-1&&(this._itemTypes+=",")}));this._itemTypes="["+this._itemTypes+
"]";this.typeKeywords&&0<this.typeKeywords.length||(this.typeKeywords=[]);this._typeKeywords="";g.forEach(this.typeKeywords,c.hitch(this,function(a,b){this._typeKeywords+='"'+a+'"';b!==this.typeKeywords.length-1&&(this._typeKeywords+=",")}));this._typeKeywords="["+this._typeKeywords+"]";this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);var a=this._getPortalUrl();this.portal=u.getPortal(a);this._initOptions();this._initSearchQuery();this._initTabs();this._initPortalRadio();
this._initItemTables();this._initPublic();this._initPrivate();this._updateUIbySignIn()},_initOptions:function(){this._itemTypeQueryString=t.getItemQueryStringByTypes(this.itemTypes);this._typeKeywordQueryString=t.getItemQueryStringByTypeKeywords(this.typeKeywords)},_initTabs:function(){this.tab=new A({tabs:[{title:this.nls.myContent,content:this.mycontentTabNode},{title:this.nls.myOrganization,content:this.organizationTabNode},{title:this.nls.myGroup,content:this.groupTabNode},{title:this.nls.publicMap,
content:this.publicTabNode}]},this.tabNode);this.own(r(this.tab,"tabChanged",c.hitch(this,function(a){k.setStyle(this.signinSection,"display","none");a!==this.nls.publicMap?(this._isPublicTabShow=!1,this._updateUIbySignIn()):this._isPublicTabShow=!0})))},_updateUIbySignIn:function(){k.setStyle(this.signinSection,"display","none");var a=p(".organization-tab-content-main,.group-tab-content-main,.mycontent-tab-content-main",this.domNode);y.userHaveSignInPortal(this._getPortalUrl())?a.style("display",
"block"):(a.style("display","none"),this._isPublicTabShow||k.setStyle(this.signinSection,"display","block"))},_initPortalRadio:function(){t.combineRadioCheckBoxWithLabel(this.portalPublicRaido,this.portalPublicLabel);t.combineRadioCheckBoxWithLabel(this.onlinePublicRaido,this.onlinePublicLabel);var a=this._getPortalUrl(),a=s.getServerByUrl(a);this.portalPublicRaido.disabled=!1;this.onlinePublicRaido.disabled=!1;this.portalPublicRaido.checked=!0;var b=!1;s.isArcGIScom(a)?(b=!0,this.portalPublicLabel.innerHTML=
"ArcGIS.com"):(this.portalPublicLabel.innerHTML=a,b=this.showOnlineItems?!1:!0);b&&(this.onlinePublicRaido.disabled=!0,k.setStyle(this.onlinePublicRaido,"display","none"),k.setStyle(this.onlinePublicLabel,"display","none"))},_initSearchQuery:function(){var a="esri_"+(m.locale&&m.locale.slice(0,2)||"en").toLowerCase(),b=g.filter("esri_he esri_fr esri_ja esri_nl esri_th esri_tr esri_nb esri_ro esri_it esri_pl esri_po esri_ru esri_pt esri_en esri_ar esri_et esri_es esri_ko esri_cs esri_da esri_zh esri_sv esri_lt esri_fi esri_lv esri_de esri_vi".split(" "),
c.hitch(this,function(b){return b!==a})),d="";g.forEach(b,c.hitch(this,function(a){d+=" -owner:"+a+" "}));b=" ";this.portal&&(this.portal.user&&this.portal.user.orgId)&&(b=" orgid:"+this.portal.user.orgId+" ");b=b+this._itemTypeQueryString+" AND access:public "+d+" "+this._typeKeywordQueryString;this._allPublicPortalQuery=this._getQuery({sortField:"numViews",sortOrder:"desc",q:b});this._filterPublicPortalQuery=this._getQuery({q:b,basicQ:b});this._allPublicOnlineQuery=this._getQuery({sortField:"numViews",
sortOrder:"desc",q:(this.onlyShowOnlineFeaturedItems?' (group:"c755678be14e4a0984af36a15f5b643e"  OR group:"b8787a74b4d74f7fb9b8fac918735153") ':" ")+this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._filterPublicOnlineQuery=this._getQuery({q:this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._allOrganizationQuery=this._getQuery();this._filterOrganizationQuery=this._getQuery();this._allMyContentQuery=this._getQuery();this._filterMyContentQuery=
this._getQuery();this._allGroupQuery=this._getQuery();this._filterGroupQuery=this._getQuery()},_getQuery:function(a){return c.mixin({start:1,num:16,f:"json"},a||{})},_getPortalUrl:function(){return s.getStandardPortalUrl(this.portalUrl)},_initItemTables:function(){"function"===typeof this.onCreateItemContent&&(this.mycontentItemTable.onCreateItemContent=this.onCreateItemContent,this.organizationItemTable.onCreateItemContent=this.onCreateItemContent,this.groupItemTable.onCreateItemContent=this.onCreateItemContent,
this.publicPortalItemTable.onCreateItemContent=this.onCreateItemContent,this.publicOnlineItemTable.onCreateItemContent=this.onCreateItemContent);this.own(r(this.publicPortalItemTable,"item-dom-clicked",c.hitch(this,this._onItemDomClicked)));this.own(r(this.publicOnlineItemTable,"item-dom-clicked",c.hitch(this,this._onItemDomClicked)));this.own(r(this.organizationItemTable,"item-dom-clicked",c.hitch(this,this._onItemDomClicked)));this.own(r(this.groupItemTable,"item-dom-clicked",c.hitch(this,this._onItemDomClicked)));
this.own(r(this.mycontentItemTable,"item-dom-clicked",c.hitch(this,this._onItemDomClicked)));this.own(r(this.publicPortalItemTable,"update",c.hitch(this,this._onItemTableUpdate)));this.own(r(this.publicOnlineItemTable,"update",c.hitch(this,this._onItemTableUpdate)));this.own(r(this.organizationItemTable,"update",c.hitch(this,this._onItemTableUpdate)));this.own(r(this.groupItemTable,"update",c.hitch(this,this._onItemTableUpdate)));this.own(r(this.mycontentItemTable,"update",c.hitch(this,this._onItemTableUpdate)));
var a=this._getPortalUrl();this.portalPublicRaido.disabled||(this.publicPortalItemTable.set("portalUrl",a),this.publicPortalItemTable.searchAllItems(this._allPublicPortalQuery),this.publicPortalItemTable.set("filteredQuery",this._filterPublicPortalQuery));this.onlinePublicRaido.disabled||(this.publicOnlineItemTable.set("portalUrl",window.location.protocol+"//www.arcgis.com"),this.publicOnlineItemTable.searchAllItems(this._allPublicOnlineQuery),this.publicOnlineItemTable.set("filteredQuery",this._filterPublicOnlineQuery))},
_initPublic:function(){this.own(r(this.portalPublicRaido,"click",c.hitch(this,this._onPublicRaidoClicked)));this.own(r(this.onlinePublicRaido,"click",c.hitch(this,this._onPublicRaidoClicked)));this._onPublicRaidoClicked()},_onPublicRaidoClicked:function(){this.portalPublicRaido.checked?(this.publicPortalItemTable.show(),this.publicOnlineItemTable.hide()):this.onlinePublicRaido.checked&&(this.publicPortalItemTable.hide(),this.publicOnlineItemTable.show())},_onPublicSearch:function(a){(a=a&&c.trim(a))?
(this.publicPortalItemTable.showFilterItemsSection(),this.publicOnlineItemTable.showFilterItemsSection(),this.portalPublicRaido.checked?(this._filterPublicPortalQuery.q=a+" "+this._filterPublicPortalQuery.basicQ,this._filterPublicPortalQuery.start=1,this.publicPortalItemTable.searchFilteredItems(this._filterPublicPortalQuery)):this.onlinePublicRaido.checked&&(this._filterPublicOnlineQuery.q=a+" "+this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString,this._filterPublicOnlineQuery.start=
1,this.publicOnlineItemTable.searchFilteredItems(this._filterPublicOnlineQuery))):(this.publicPortalItemTable.showAllItemsSection(),this.publicOnlineItemTable.showAllItemsSection())},_initPrivate:function(){this._resetPortalMaps();this.own(r(this.groupsSelect,"change",c.hitch(this,this._onGroupsSelectChange)));var a=s.getServerByUrl(this._getPortalUrl());s.isArcGIScom(a);y.userHaveSignInPortal(this._getPortalUrl())&&this._onSignIn()},_onOrganizationSearch:function(a){if(a=a&&c.trim(a)){if(this._allOrganizationQuery){var b=
this._allOrganizationQuery.q;b&&(this._filterOrganizationQuery.q=a+" "+b,this._filterOrganizationQuery.start=1,this.organizationItemTable.searchFilteredItems(this._filterOrganizationQuery))}}else this.organizationItemTable.showAllItemsSection()},_onMyContentSearch:function(a){if(a=a&&c.trim(a)){if(this._allMyContentQuery){var b=this._allMyContentQuery.q;b&&(this._filterMyContentQuery.q=a+" "+b,this._filterMyContentQuery.start=1,this.mycontentItemTable.searchFilteredItems(this._filterMyContentQuery))}}else this.mycontentItemTable.showAllItemsSection()},
_onGroupSearch:function(a){if(a=a&&c.trim(a)){if(this._allGroupQuery){var b=this._allGroupQuery.q;b&&(this._filterGroupQuery.q=a+" "+b,this._filterGroupQuery.start=1,this.groupItemTable.searchFilteredItems(this._filterGroupQuery))}}else this.groupItemTable.showAllItemsSection()},_onSignIn:function(){this._updateUIbySignIn();if(!this._signIn){this._signIn=!0;var a=this._getPortalUrl();u.getPortal(a).getUser().then(c.hitch(this,function(a){this.domNode&&(this._resetPortalMaps(),this._searchOrganization(a),
this._searchMyContent(a),this._searchGroups(a))}))}},_onSignOut:function(){this._signIn=!1;this._resetPortalMaps();this._updateUIbySignIn()},_resetPortalMaps:function(){this.organizationItemTable.clear();this.mycontentItemTable.clear();this._resetGroupsSection()},_searchOrganization:function(a){this.organizationItemTable.clear();a=" orgid:"+a.orgId+" AND "+this._itemTypeQueryString+" AND (access:org OR access:public) "+this._typeKeywordQueryString;var b=this._getPortalUrl();this._allOrganizationQuery=
this._getQuery({q:a});this._filterOrganizationQuery=this._getQuery({q:a});this.organizationItemTable.set("portalUrl",b);this.organizationItemTable.searchAllItems(this._allOrganizationQuery)},_searchMyContent:function(a){this.mycontentItemTable.clear();var b=this._getPortalUrl();a="owner:"+a.username+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;this._allMyContentQuery=this._getQuery({q:a});this._filterMyContentQuery=this._getQuery({q:a});this.mycontentItemTable.set("portalUrl",
b);this.mycontentItemTable.searchAllItems(this._allMyContentQuery)},_searchGroups:function(a){this._resetGroupsSection();k.setStyle(this.groupsSection,"display","block");a=a.getGroups();if(0<a.length){k.setStyle(this.groupSearch.domNode,"display","block");this.groupItemTable.show();k.empty(this.groupsSelect);for(var b=0;b<a.length;b++){var c=a[b];k.create("option",{value:c.id,innerHTML:c.title},this.groupsSelect)}this._onGroupsSelectChange()}this._updateUIbyGroups(a.length)},_resetGroupsSection:function(){k.setStyle(this.groupsSection,
"display","none");k.empty(this.groupsSelect);k.create("option",{value:"nodata",innerHTML:this.nls.noneGroups},this.groupsSelect);this.groupItemTable.clear();k.setStyle(this.groupSearch.domNode,"display","none");this.groupItemTable.hide();this._updateUIbyGroups(0)},_updateUIbyGroups:function(a){0===a?k.setStyle(this.groupsSection,"top","15px"):k.setStyle(this.groupsSection,"top","50px")},_onGroupsSelectChange:function(){var a=this.groupsSelect.value;this.groupItemTable.clear();if("nodata"===a)k.setStyle(this.groupSearch,
"display","none"),this.groupItemTable.hide();else{k.setStyle(this.groupSearch,"display","block");this.groupItemTable.show();var b=this._getPortalUrl(),a="group:"+a+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;this._allGroupQuery=this._getQuery({q:a});this._filterGroupQuery=this._getQuery({q:a});this.groupItemTable.set("portalUrl",b);this.groupItemTable.searchAllItems(this._allGroupQuery)}},_onItemTableUpdate:function(){this.emit("update")},_onItemDomClicked:function(a){var b=
k.hasClass(a,"jimu-state-active");p(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active");b&&k.addClass(a,"jimu-state-active");(a=this.getSelectedItem())?this.emit("item-selected",a):this.emit("none-item-selected")},getSelectedItem:function(){var a=null,b=p(".item.jimu-state-active",this.domNode);0<b.length&&(a=c.mixin({},b[0].item));return a}})})},"jimu/dijit/_ItemTable":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_ItemTable.html dojo/Evented dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/query dojo/on jimu/utils jimu/portalUtils jimu/portalUrlUtils jimu/dijit/LoadingIndicator".split(" "),
function(f,v,q,l,b,a,e,c,m,g,k,d,n,p,r,t){return f([v,q,l,a],{templateString:b,declaredClass:"jimu.dijit.ItemTable",baseClass:"jimu-item-table",query:null,filteredQuery:null,portalUrl:null,hidden:!1,nls:null,types:"",typeKeywords:"",_defaultThumbnail:{"Web Mapping Application":"webapp.png","Mobile Application":"mobileapp.png"},postMixInProperties:function(){this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);this._initSelf()},_initSelf:function(){this.types&&0<this.types.length||
(this.types=[]);(this.hidden=!0===this.hidden)&&this.hide();this.portalUrl&&(this.portalUrl=r.getStandardPortalUrl(this.portalUrl));this.showAllItemsSection();this.searchAllItems()},show:function(){m.setStyle(this.domNode,"display","block")},hide:function(){m.setStyle(this.domNode,"display","none")},searchAllItems:function(a){this.showAllItemsSection();a&&(this.query=e.mixin({},a),this.query.start=1,this.clearAllItemsSection());this.portalUrl&&this.query&&0<this.query.start&&(this.allItemsShelter.show(),
p.getPortal(this.portalUrl).queryItems(this.query).then(e.hitch(this,function(a){this.domNode&&(this.allItemsShelter.hide(),this.query.start=a.nextStart,this._createItems(a,this.allItemTbody))}),e.hitch(this,function(a){console.error(a);this.domNode&&this.allItemsShelter.hide()})))},searchFilteredItems:function(a){this.showFilterItemsSection();a&&(this.filteredQuery=e.clone(a),this.filteredQuery.start=1,this.clearFilteredItemsSection());this.portalUrl&&this.filteredQuery&&0<this.filteredQuery.start&&
(this.filteredItemShelter.show(),p.getPortal(this.portalUrl).queryItems(this.filteredQuery).then(e.hitch(this,function(b){this.domNode&&(this.showFilterItemsSection(),a&&this.clearFilteredItemsSection(),this.filteredQuery.start=b.nextStart,this._createItems(b,this.filteredItemsTbody),this._filterItemCallback())}),e.hitch(this,function(a){console.error(a);this.domNode&&this._filterItemCallback()})))},_filterItemCallback:function(){this.filteredItemShelter.hide();0<this._getItemCount(this.filteredItemsTbody)?
(m.setStyle(this.filteredItemsTableDiv,"display","block"),m.setStyle(this.searchNoneTipSection,"display","none")):(m.setStyle(this.filteredItemsTableDiv,"display","none"),m.setStyle(this.searchNoneTipSection,"display","block"))},clear:function(){this.clearAllItemsSection();this.clearFilteredItemsSection()},clearAllItemsSection:function(){m.empty(this.allItemTbody)},clearFilteredItemsSection:function(){m.empty(this.filteredItemsTbody)},showAllItemsSection:function(){m.setStyle(this.allItemsSection,
"display","block");m.setStyle(this.filteredItemsSection,"display","none")},showFilterItemsSection:function(){m.setStyle(this.allItemsSection,"display","none");m.setStyle(this.filteredItemsSection,"display","block");m.setStyle(this.filteredItemsTableDiv,"display","block");m.setStyle(this.searchNoneTipSection,"display","none")},_onAllItemsSectionScroll:function(){this._isScrollToBottom(this.allItemsTableDiv)&&this.searchAllItems()},_onFilteredItemsSectionScroll:function(){this._isScrollToBottom(this.filteredItemsTableDiv)&&
this.searchFilteredItems()},_isScrollToBottom:function(a){return n.isScrollToBottom(a)},_createItems:function(a,b){var d=a.results,g=c.map(this.types,e.hitch(this,function(a){return a.toLowerCase()})),d=c.filter(d,e.hitch(this,function(a){a=a.type&&a.type.toLowerCase()||"";return 0<=c.indexOf(g,a)}));if(0!==d.length){var n,p=k("td.empty",b),h;if(0<p.length){var w=Math.min(d.length,p.length),l=d.splice(0,w);for(h=0;h<w;h++){var f=p[h];n=this._createItem(l[h]);m.place(n,f);m.removeClass(f,"empty")}}if(0!==
d.length){p=Math.ceil(d.length/2);for(h=0;h<p;h++){n=m.toDom("\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e");m.place(n,b);w=k("td",n);for(l=0;l<w.length;l++)f=w[l],(n=d[2*h+l])?(n=this._createItem(n),m.place(n,f)):m.addClass(f,"empty")}this.emit("update")}}},_getItemCount:function(a){return k(".item",a).length},_createItem:function(a){var b=m.toDom('\x3cdiv class\x3d"item"\x3e\x3cdiv class\x3d"item-border"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-thumbnail jimu-auto-vertical"\x3e\x3cdiv class\x3d"none-thumbnail-tip jimu-auto-vertical-content"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item-info"\x3e\x3cdiv class\x3d"item-name"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-type-owner"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-date"\x3e\x3c/div\x3e\x3ca class\x3d"item-details" target\x3d"_blank"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e');
b.item=a;var d=k(".item-thumbnail",b)[0],c=k(".item-name",b)[0],e=k(".item-type-owner",b)[0],n=k(".item-date",b)[0],h=k(".item-details",b)[0],p=k(".none-thumbnail-tip",b)[0];if(!a.thumbnailUrl){var g=this._defaultThumbnail[a.type];g&&(a.thumbnailUrl=require.toUrl("jimu")+"/images/"+g)}a.thumbnailUrl?m.setStyle(d,"backgroundImage","url("+a.thumbnailUrl+")"):p.innerHTML=this.nls.noneThumbnail;"function"===typeof this.onCreateItemContent?(n=k(".item-info",b)[0],this.onCreateItemContent(a,n)):(c.innerHTML=
a.title,c.title=c.innerHTML,e.innerHTML=a.type+" by "+a.owner,e.title=e.innerHTML,d=new Date,d.setTime(a.modified),n.innerHTML=d.toLocaleString(),n.title=n.innerHTML,h.innerHTML=this.nls.moreDetails,h.href=a.detailsPageUrl||"#");return b},_onItemsTableClicked:function(a){var b=a.target||a.srcElement;a=null;m.hasClass(b,"item-thumbnail")?a=b.parentNode:m.hasClass(b,"none-thumbnail-tip")&&(a=b.parentNode.parentNode);a&&(b=m.hasClass(a,"jimu-state-active"),k(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active"),
b?m.removeClass(a,"jimu-state-active"):m.addClass(a,"jimu-state-active"),this.emit("item-dom-clicked",a))},getSelectedItem:function(){var a=null,b=k(".item.jimu-state-active",this.domNode);0<b.length&&(a=e.mixin({},b[0].item));return a}})})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(f,v,q,l,b,a,e,c,m,g,k,d,n,p,r,t,u,y,s,E,C,A,h,w,G,I,H,K,J,L,M,N,Q,O,P){function z(a){return t.delegate(a.promise||a,{addCallback:function(a){this.then(a)},addErrback:function(a){this.otherwise(a)}})}var F=l("dijit._TreeNode",[G,I,H,K,J],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(a){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=a;this._set("label",a);n("dojo-bidi")&&this.applyTextDir(this.labelNode)},labelType:"text",
isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:M,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(a){var b=Math.max(a,0)*this.tree._nodePixelIndent+"px";g.set(this.domNode,
"backgroundPosition",b+" 0px");g.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",b);f.forEach(this.getChildren(),function(b){b.set("indent",a+1)});this._set("indent",a)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(a){var b=this.tree,d=b.model;b._v10Compat&&a===d.root&&(a=null);this._applyClassAndStyle(a,"icon","Icon");this._applyClassAndStyle(a,"label","Label");this._applyClassAndStyle(a,
"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(a,b,d){var h="_"+b+"Class";b+="Node";var e=this[h];this[h]=this.tree["get"+d+"Class"](a,this.isExpanded);c.replace(this[b],this[h]||"",e||"");g.set(this[b],this.tree["get"+d+"Style"](a,this.isExpanded)||{})},_updateLayout:function(){var a=this.getParent(),a=!a||!a.rowNode||"none"==a.rowNode.style.display;c.toggle(this.domNode,"dijitTreeIsRoot",a);c.toggle(this.domNode,"dijitTreeIsLast",!a&&!this.getNextSibling())},_setExpando:function(a){var b=
["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];a=a?0:this.isExpandable?this.isExpanded?1:2:3;c.replace(this.expandoNode,b[a],b);this.expandoNodeText.innerHTML=["*","-","+","*"][a]},expand:function(){if(this._expandDeferred)return z(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&
this.containerNode.setAttribute("role","group");c.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var a=d.wipeIn({node:this.containerNode,duration:w.defaultDuration}),D=this._expandDeferred=new b(function(){a.stop()});v.after(a,"onEnd",function(){D.resolve(!0)},!0);a.play();return z(D)},collapse:function(){if(this._collapseDeferred)return z(this._collapseDeferred);
this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");c.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var a=d.wipeOut({node:this.containerNode,duration:w.defaultDuration}),D=this._collapseDeferred=new b(function(){a.stop()});v.after(a,"onEnd",
function(){D.resolve(!0)},!0);a.play();return z(D)},indent:0,setChildItems:function(b){var d=this.tree,c=d.model,h=[],k=d.focusedChild,n=this.getChildren();f.forEach(n,function(a){H.prototype.removeChild.call(this,a)},this);this.defer(function(){f.forEach(n,function(a){if(!a._destroyed&&!a.getParent()){d.dndController.removeTreeNode(a);var b=function(a){var x=c.getIdentity(a.item),h=d._itemNodesMap[x];1==h.length?delete d._itemNodesMap[x]:(x=f.indexOf(h,a),-1!=x&&h.splice(x,1));f.forEach(a.getChildren(),
b)};b(a);if(d.persist){var x=f.map(a.getTreePath(),function(a){return d.model.getIdentity(a)}).join("/"),h;for(h in d._openedNodes)h.substr(0,x.length)==x&&delete d._openedNodes[h];d._saveExpandedNodes()}d.lastFocusedChild&&!e.isDescendant(d.lastFocusedChild,d.domNode)&&delete d.lastFocusedChild;k&&!e.isDescendant(k,d.domNode)&&d.focus();a.destroyRecursive()}})});this.state="Loaded";b&&0<b.length?(this.isExpandable=!0,f.forEach(b,function(a){var b=c.getIdentity(a),x=d._itemNodesMap[b],e;if(x)for(var k=
0;k<x.length;k++)if(x[k]&&!x[k].getParent()){e=x[k];e.set("indent",this.indent+1);break}e||(e=this.tree._createTreeNode({item:a,tree:d,isExpandable:c.mayHaveChildren(a),label:d.getLabel(a),labelType:d.model&&d.model.labelType||"text",tooltip:d.getTooltip(a),ownerDocument:d.ownerDocument,dir:d.dir,lang:d.lang,textDir:d.textDir,indent:this.indent+1}),x?x.push(e):d._itemNodesMap[b]=[e]);this.addChild(e);(this.tree.autoExpand||this.tree._state(e))&&h.push(d._expandNode(e))},this),f.forEach(this.getChildren(),
function(a){a._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);b=a(h);this.tree._startPaint(b);return z(b)},getTreePath:function(){for(var a=this,b=[];a&&a!==this.tree.rootNode;)b.unshift(a.item),a=a.getParent();b.unshift(this.tree.rootNode.item);return b},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(a){this.inherited(arguments);var b=this.getChildren();0==b.length&&(this.isExpandable=!1,
this.collapse());f.forEach(b,function(a){a._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(a){this.labelNode.setAttribute("aria-selected",a?"true":"false");c.toggle(this.rowNode,"dijitTreeRowSelected",a)},focus:function(){A.focus(this.focusNode)}});n("dojo-bidi")&&F.extend({_setTextDirAttr:function(a){if(a&&(this.textDir!=a||!this._created))this._set("textDir",a),this.applyTextDir(this.labelNode),f.forEach(this.getChildren(),function(b){b.set("textDir",
a)},this)}});var B=l("dijit.Tree",[G,L,I,J],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:N,persist:!1,autoExpand:!1,dndController:P,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,
dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(a,b){y.publish(this.id,t.mixin({tree:this,event:a},b||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new b;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var a=this;this.own(u(this.containerNode,
u.selector(".dijitTreeNode",s.enter),function(b){a._onNodeMouseEnter(h.byNode(this),b)}),u(this.containerNode,u.selector(".dijitTreeNode",s.leave),function(b){a._onNodeMouseLeave(h.byNode(this),b)}),u(this.containerNode,u.selector(".dijitTreeRow",C.press),function(b){a._onNodePress(h.getEnclosingWidget(this),b)}),u(this.containerNode,u.selector(".dijitTreeRow",C),function(b){a._onClick(h.getEnclosingWidget(this),b)}),u(this.containerNode,u.selector(".dijitTreeRow","dblclick"),function(b){a._onDblClick(h.getEnclosingWidget(this),
b)}));this.model||this._store2model();this.own(v.after(this.model,"onChange",t.hitch(this,"_onItemChange"),!0),v.after(this.model,"onChildrenChange",t.hitch(this,"_onItemChildrenChange"),!0),v.after(this.model,"onDelete",t.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){t.isString(this.dndController)&&(this.dndController=t.getObject(this.dndController));for(var b={},d=0;d<this.dndParams.length;d++)this[this.dndParams[d]]&&(b[this.dndParams[d]]=this[this.dndParams[d]]);
this.dndController=new this.dndController(this,b)}this._load();this.onLoadDeferred=z(this.pendingCommandsPromise);this.onLoadDeferred.then(t.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;p.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var a={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(a.mayHaveChildren=t.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&
(a.getChildren=t.hitch(this,function(a,b,d){this.getItemChildren(this._v10Compat&&a===this.model.root?null:a,b,d)}));this.model=new O(a);this.showRoot=Boolean(this.label)},onLoad:function(){},_load:function(){this.model.getRoot(t.hitch(this,function(a){var b=this.rootNode=this.tree._createTreeNode({item:a,tree:this,isExpandable:!0,label:this.label||this.getLabel(a),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",
!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(b.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(b.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(b.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),
b.labelNode.setAttribute("role","presentation"),b.labelNode.removeAttribute("aria-selected"),b.containerNode.setAttribute("role","tree"),b.containerNode.setAttribute("aria-expanded","true"),b.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(b.domNode);a=this.model.getIdentity(a);this._itemNodesMap[a]?this._itemNodesMap[a].push(b):this._itemNodesMap[a]=[b];b._updateLayout();this._expandNode(b).then(t.hitch(this,function(){this._destroyed||
(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),t.hitch(this,function(a){console.error(this,": error loading root: ",a)}))},getNodesByItem:function(a){if(!a)return[];a=t.isString(a)?a:this.model.getIdentity(a);return[].concat(this._itemNodesMap[a])},_setSelectedItemAttr:function(a){this.set("selectedItems",[a])},_setSelectedItemsAttr:function(a){var b=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(t.hitch(this,function(){var d=
f.map(a,function(a){return!a||t.isString(a)?a:b.model.getIdentity(a)}),c=[];f.forEach(d,function(a){c=c.concat(b._itemNodesMap[a]||[])});this.set("selectedNodes",c)}))},_setPathAttr:function(a){return a.length?z(this.set("paths",[a]).then(function(a){return a[0]})):z(this.set("paths",[]).then(function(a){return a[0]}))},_setPathsAttr:function(b){function d(a,b){var h=a.shift(),x=f.filter(b,function(a){return a.getIdentity()==h})[0];if(x)return a.length?c._expandNode(x).then(function(){return d(a,
x.getChildren())}):x;throw new B.PathError("Could not expand path at "+h);}var c=this;return z(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return a(f.map(b,function(a){a=f.map(a,function(a){return a&&t.isObject(a)?c.model.getIdentity(a):a});if(a.length)return d(a,[c.rootNode]);throw new B.PathError("Empty path");}))}).then(function(a){c.set("selectedNodes",a);return c.paths}))},_setSelectedNodeAttr:function(a){this.set("selectedNodes",[a])},_setSelectedNodesAttr:function(a){this.dndController.setSelection(a)},
expandAll:function(){function b(c){return d._expandNode(c).then(function(){var d=f.filter(c.getChildren()||[],function(a){return a.isExpandable});return a(f.map(d,b))})}var d=this;return z(b(this.rootNode))},collapseAll:function(){function b(c){var h=f.filter(c.getChildren()||[],function(a){return a.isExpandable}),h=a(f.map(h,b));return!c.isExpanded||c==d.rootNode&&!d.showRoot?h:h.then(function(){return d._collapseNode(c)})}var d=this;return z(b(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},
getLabel:function(a){return this.model.getLabel(a)},getIconClass:function(a,b){return!a||this.model.mayHaveChildren(a)?b?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(a,b){var d=this._getNext(b);d&&d.isTreeNode&&this.focusNode(d)},_onUpArrow:function(a,b){var d=b.getPreviousSibling();if(d)for(b=d;b.isExpandable&&
b.isExpanded&&b.hasChildren();)d=b.getChildren(),b=d[d.length-1];else if(d=b.getParent(),this.showRoot||d!==this.rootNode)b=d;b&&b.isTreeNode&&this.focusNode(b)},_onRightArrow:function(a,b){b.isExpandable&&!b.isExpanded?this._expandNode(b):b.hasChildren()&&(b=b.getChildren()[0])&&b.isTreeNode&&this.focusNode(b)},_onLeftArrow:function(a,b){if(b.isExpandable&&b.isExpanded)this._collapseNode(b);else{var d=b.getParent();d&&(d.isTreeNode&&(this.showRoot||d!==this.rootNode))&&this.focusNode(d)}},focusLastChild:function(){var a=
this._getLast();a&&a.isTreeNode&&this.focusNode(a)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var a=this.rootNode;a.isExpanded;){var b=a.getChildren();if(!b.length)break;a=b[b.length-1]}return a},_getNext:function(a){if(a.isExpandable&&a.isExpanded&&a.hasChildren())return a.getChildren()[0];for(;a&&a.isTreeNode;){var b=a.getNextSibling();if(b)return b;a=a.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(a,
b){return e.isDescendant(a,b.expandoNode)||e.isDescendant(a,b.expandoNodeText)},_onNodePress:function(a,b){this.focusNode(a)},__click:function(a,b,d,c){var h=this.isExpandoNode(b.target,a);a.isExpandable&&(d||h)?this._onExpandoClick({node:a}):(this._publish("execute",{item:a.item,node:a,evt:b}),this[c](a.item,a,b),this.focusNode(a));b.stopPropagation();b.preventDefault()},_onClick:function(a,b){this.__click(a,b,this.openOnClick,"onClick")},_onDblClick:function(a,b){this.__click(a,b,this.openOnDblClick,
"onDblClick")},_onExpandoClick:function(a){a=a.node;this.focusNode(a);a.isExpanded?this._collapseNode(a):this._expandNode(a)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(a){p.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(a)},_getRootOrFirstNode:function(){p.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","",
"2.0");return this._getFirst()},_collapseNode:function(a){a._expandNodeDeferred&&delete a._expandNodeDeferred;if("Loading"!=a.state&&a.isExpanded){var b=a.collapse();this.onClose(a.item,a);this._state(a,!1);this._startPaint(b);return b}},_expandNode:function(a){if(a._expandNodeDeferred)return a._expandNodeDeferred;var d=this.model,c=a.item,h=this;a._loadDeferred||(a.markProcessing(),a._loadDeferred=new b,d.getChildren(c,function(b){a.unmarkProcessing();a.setChildItems(b).then(function(){a._loadDeferred.resolve(b)})},
function(b){console.error(h,": error loading "+a.label+" children: ",b);a._loadDeferred.reject(b)}));d=a._loadDeferred.then(t.hitch(this,function(){var b=a.expand();this.onOpen(a.item,a);this._state(a,!0);return b}));this._startPaint(d);return d},focusNode:function(a){var b=this.domNode.scrollLeft;this.focusChild(a);this.domNode.scrollLeft=b},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(a){var b=this.model.getIdentity(a);if(b=this._itemNodesMap[b]){var d=this.getLabel(a),
c=this.getTooltip(a);f.forEach(b,function(b){b.set({item:a,label:d,tooltip:c});b._updateItemClasses(a)})}},_onItemChildrenChange:function(a,b){var d=this.model.getIdentity(a);(d=this._itemNodesMap[d])&&f.forEach(d,function(a){a.setChildItems(b)})},_onItemDelete:function(a){a=this.model.getIdentity(a);var b=this._itemNodesMap[a];b&&(f.forEach(b,function(a){this.dndController.removeTreeNode(a);var b=a.getParent();b&&b.removeChild(a);this.lastFocusedChild&&!e.isDescendant(this.lastFocusedChild,this.domNode)&&
delete this.lastFocusedChild;this.focusedChild&&!e.isDescendant(this.focusedChild,this.domNode)&&this.focus();a.destroyRecursive()},this),delete this._itemNodesMap[a])},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var a=q(this.cookieName);a&&f.forEach(a.split(","),function(a){this._openedNodes[a]=!0},this)}},_state:function(a,b){if(!this.persist)return!1;var d=f.map(a.getTreePath(),function(a){return this.model.getIdentity(a)},this).join("/");if(1===arguments.length)return this._openedNodes[d];
b?this._openedNodes[d]=!0:delete this._openedNodes[d];this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var a=[],b;for(b in this._openedNodes)a.push(b);q(this.cookieName,a.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!t.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},
destroyRecursive:function(){this.destroy()},resize:function(a){a&&m.setMarginBox(this.domNode,a);this._nodePixelIndent=m.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(t.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(a){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var b=t.hitch(this,
function(){this._outstandingPaintOperations--;0>=this._outstandingPaintOperations&&(!this._adjustWidthsTimer&&this._started)&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});E(a,b,b)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(a){return new F(a)},focus:function(){this.lastFocusedChild?
this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});n("dojo-bidi")&&B.extend({_setTextDirAttr:function(a){a&&this.textDir!=a&&(this._set("textDir",a),this.rootNode.set("textDir",a))}});B.PathError=k("TreePathError");B._TreeNode=F;return B})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(f,v,q,l){return q("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",
root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(b){l.mixin(this,b);this.connects=[];b=this.store;if(!b.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");b.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([v.after(b,"onNew",l.hitch(this,"onNewItem"),!0),v.after(b,"onDelete",l.hitch(this,"onDeleteItem"),!0),v.after(b,"onSet",l.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var b;b=
this.connects.pop();)b.remove()},getRoot:function(b,a){this.root?b(this.root):this.store.fetch({query:this.query,onComplete:l.hitch(this,function(a){if(1!=a.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+a.length+" items, but must return exactly one");this.root=a[0];b(this.root)}),onError:a})},mayHaveChildren:function(b){return f.some(this.childrenAttrs,function(a){return this.store.hasAttribute(b,a)},this)},getChildren:function(b,a,e){var c=this.store;if(c.isItemLoaded(b)){for(var m=
[],g=0;g<this.childrenAttrs.length;g++)var k=c.getValues(b,this.childrenAttrs[g]),m=m.concat(k);var d=0;this.deferItemLoadingUntilExpand||f.forEach(m,function(a){c.isItemLoaded(a)||d++});0==d?a(m):f.forEach(m,function(b,k){c.isItemLoaded(b)||c.loadItem({item:b,onItem:function(b){m[k]=b;0==--d&&a(m)},onError:e})})}else{var n=l.hitch(this,arguments.callee);c.loadItem({item:b,onItem:function(b){n(b,a,e)},onError:e})}},isItem:function(b){return this.store.isItem(b)},fetchItemByIdentity:function(b){this.store.fetchItemByIdentity(b)},
getIdentity:function(b){return this.store.getIdentity(b)},getLabel:function(b){return this.labelAttr?this.store.getValue(b,this.labelAttr):this.store.getLabel(b)},newItem:function(b,a,e){var c={parent:a,attribute:this.childrenAttrs[0]},m;this.newItemIdAttr&&b[this.newItemIdAttr]?this.fetchItemByIdentity({identity:b[this.newItemIdAttr],scope:this,onItem:function(g){g?this.pasteItem(g,null,a,!0,e):(m=this.store.newItem(b,c))&&void 0!=e&&this.pasteItem(m,a,a,!1,e)}}):(m=this.store.newItem(b,c))&&void 0!=
e&&this.pasteItem(m,a,a,!1,e)},pasteItem:function(b,a,e,c,m){var g=this.store,k=this.childrenAttrs[0];a&&f.forEach(this.childrenAttrs,function(d){if(g.containsValue(a,d,b)){if(!c){var e=f.filter(g.getValues(a,d),function(a){return a!=b});g.setValues(a,d,e)}k=d}});if(e)if("number"==typeof m){var d=g.getValues(e,k).slice();d.splice(m,0,b);g.setValues(e,k,d)}else g.setValues(e,k,g.getValues(e,k).concat(b))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(b,
a){a&&this.getChildren(a.item,l.hitch(this,function(b){this.onChildrenChange(a.item,b)}))},onDeleteItem:function(b){this.onDelete(b)},onSetItem:function(b,a){if(-1!=f.indexOf(this.childrenAttrs,a))this.getChildren(b,l.hitch(this,function(a){this.onChildrenChange(b,a)}));else this.onChange(b)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(f,v,q,l,b){return v("dijit.tree.ForestStoreModel",
b,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(a){this.root={store:this,root:!0,id:a.rootId,label:a.rootLabel,children:a.rootChildren}},mayHaveChildren:function(a){return a===this.root||this.inherited(arguments)},getChildren:function(a,b,c){a===this.root?this.root.children?b(this.root.children):this.store.fetch({query:this.query,onComplete:l.hitch(this,function(a){this.root.children=a;b(a)}),onError:c}):this.inherited(arguments)},isItem:function(a){return a===this.root?!0:this.inherited(arguments)},
fetchItemByIdentity:function(a){if(a.identity==this.root.id){var b=a.scope||q.global;a.onItem&&a.onItem.call(b,this.root)}else this.inherited(arguments)},getIdentity:function(a){return a===this.root?this.root.id:this.inherited(arguments)},getLabel:function(a){return a===this.root?this.root.label:this.inherited(arguments)},newItem:function(a,b,c){return b===this.root?(this.onNewRootItem(a),this.store.newItem(a)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(a,b,c,m,g){if(b===
this.root&&!m)this.onLeaveRoot(a);this.inherited(arguments,[a,b===this.root?null:b,c===this.root?null:c,m,g]);if(c===this.root)this.onAddToRoot(a)},onAddToRoot:function(a){console.log(this,": item ",a," added to root")},onLeaveRoot:function(a){console.log(this,": item ",a," removed from root")},_requeryTop:function(){var a=this.root.children||[];this.store.fetch({query:this.query,onComplete:l.hitch(this,function(b){this.root.children=b;if(a.length!=b.length||f.some(a,function(a,m){return b[m]!=a}))this.onChildrenChange(this.root,
b)})})},onNewItem:function(a,b){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(a){-1!=f.indexOf(this.root.children,a)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(a,b,c,m){this._requeryTop();this.inherited(arguments)}})})},"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dnd/common dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),function(f,v,q,l,b,a,e,c,
m,g,k){return v("dijit.tree._dndSelector",k,{constructor:function(){this.selection={};this.anchor=null;this.events.push(c(this.tree.domNode,m.press,l.hitch(this,"onMouseDown")),c(this.tree.domNode,m.release,l.hitch(this,"onMouseUp")),c(this.tree.domNode,m.move,l.hitch(this,"onMouseMove")),c(this.tree.domNode,g.press,l.hitch(this,"onClickPress")),c(this.tree.domNode,g.release,l.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var a=[],b=this.selection,c;for(c in b)a.push(b[c]);
return a},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(a,b){this.setSelection(this.getSelectedTreeNodes().concat([a]));b&&(this.anchor=a);return a},removeTreeNode:function(b){var c=f.filter(this.getSelectedTreeNodes(),function(c){return!a.isDescendant(c.domNode,b.domNode)});this.setSelection(c);return b},isTreeNodeSelected:function(a){return a.id&&!!this.selection[a.id]},setSelection:function(a){var b=
this.getSelectedTreeNodes();f.forEach(this._setDifference(b,a),l.hitch(this,function(a){a.setSelected(!1);this.anchor==a&&delete this.anchor;delete this.selection[a.id]}));f.forEach(this._setDifference(a,b),l.hitch(this,function(a){a.setSelected(!0);this.selection[a.id]=a}));this._updateSelectionProperties()},_setDifference:function(a,b){f.forEach(b,function(a){a.__exclude__=!0});var c=f.filter(a,function(a){return!a.__exclude__});f.forEach(b,function(a){delete a.__exclude__});return c},_updateSelectionProperties:function(){var a=
this.getSelectedTreeNodes(),b=[],c=[];f.forEach(a,function(a){var d=a.getTreePath();c.push(a);b.push(d)},this);a=f.map(c,function(a){return a.item});this.tree._set("paths",b);this.tree._set("path",b[0]||[]);this.tree._set("selectedNodes",c);this.tree._set("selectedNode",c[0]||null);this.tree._set("selectedItems",a);this.tree._set("selectedItem",a[0]||null)},onClickPress:function(a){if(!this.current||!this.current.isExpandable||!this.tree.isExpandoNode(a.target,this.current)){"mousedown"==a.type&&
e.isLeft(a)&&a.preventDefault();var c="keydown"==a.type?this.tree.focusedChild:this.current;if(c){var k=b.getCopyKeyState(a),g=c.id;!this.singular&&!a.shiftKey&&this.selection[g]?this._doDeselect=!0:(this._doDeselect=!1,this.userSelect(c,k,a.shiftKey))}}},onClickRelease:function(a){this._doDeselect&&(this._doDeselect=!1,this.userSelect("keyup"==a.type?this.tree.focusedChild:this.current,b.getCopyKeyState(a),a.shiftKey))},onMouseMove:function(){this._doDeselect=!1},onMouseDown:function(){},onMouseUp:function(){},
_compareNodes:function(a,b){if(a===b)return 0;if("sourceIndex"in document.documentElement)return a.sourceIndex-b.sourceIndex;if("compareDocumentPosition"in document.documentElement)return a.compareDocumentPosition(b)&2?1:-1;if(document.createRange){var c=doc.createRange();c.setStartBefore(a);var k=doc.createRange();k.setStartBefore(b);return c.compareBoundaryPoints(c.END_TO_END,k)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");},userSelect:function(a,
b,c){if(this.singular)this.anchor==a&&b?this.selectNone():(this.setSelection([a]),this.anchor=a);else if(c&&this.anchor){b=this._compareNodes(this.anchor.rowNode,a.rowNode);c=this.anchor;0>b?b=c:(b=a,a=c);for(c=[];b!=a;)c.push(b),b=this.tree._getNext(b);c.push(a);this.setSelection(c)}else this.selection[a.id]&&b?this.removeTreeNode(a):b?this.addTreeNode(a,!0):(this.setSelection([a]),this.anchor=a)},getItem:function(a){return{data:this.selection[a],type:["treeNode"]}},forInSelectedItems:function(a,
b){b=b||q.global;for(var c in this.selection)a.call(b,this.getItem(c),c,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(f,v,q,l,b,a){return v("dijit.tree._dndContainer",null,{constructor:function(e,c){this.tree=e;this.node=e.domNode;l.mixin(this,c);this.containerState="";q.add(this.node,"dojoDndContainer");this.events=[b(this.node,a.enter,l.hitch(this,"onOverEvent")),b(this.node,a.leave,
l.hitch(this,"onOutEvent")),f.after(this.tree,"_onNodeMouseEnter",l.hitch(this,"onMouseOver"),!0),f.after(this.tree,"_onNodeMouseLeave",l.hitch(this,"onMouseOut"),!0),b(this.node,"dragstart, selectstart",function(a){a.preventDefault()})]},destroy:function(){for(var a;a=this.events.pop();)a.remove();this.node=this.parent=null},onMouseOver:function(a){this.current=a},onMouseOut:function(){this.current=null},_changeState:function(a,b){var m="dojoDnd"+a,g=a.toLowerCase()+"State";q.replace(this.node,m+
b,m+this[g]);this[g]=b},_addItemClass:function(a,b){q.add(a,"dojoDndItem"+b)},_removeItemClass:function(a,b){q.remove(a,"dojoDndItem"+b)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"dijit/tree/ObjectStoreModel":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/when ../Destroyable".split(" "),function(f,v,q,l,b,a,e){return q("dijit.tree.ObjectStoreModel",e,{store:null,
labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(a){b.mixin(this,a);this.childrenCache={}},getRoot:function(c,e){if(this.root)c(this.root);else{var g=this.store.query(this.query);g.then&&this.own(g);a(g,b.hitch(this,function(a){if(1!=a.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+a.length+" items, but must return exactly one");this.root=a[0];c(this.root);g.observe&&g.observe(b.hitch(this,function(a){this.onChange(a)}),!0)}),e)}},mayHaveChildren:function(){return!0},
getChildren:function(c,e,g){var k=this.store.getIdentity(c);if(this.childrenCache[k])a(this.childrenCache[k],e,g);else{var d=this.childrenCache[k]=this.store.getChildren(c);d.then&&this.own(d);d.observe&&this.own(d.observe(b.hitch(this,function(k,g,e){this.onChange(k);g!=e&&a(d,b.hitch(this,"onChildrenChange",c))}),!0));a(d,e,g)}},isItem:function(){return!0},getIdentity:function(a){return this.store.getIdentity(a)},getLabel:function(a){return a[this.labelAttr]},newItem:function(a,b,g,k){return this.store.put(a,
{parent:b,before:k})},pasteItem:function(a,e,g,k,d,n){var p=new l;if(e===g&&!k&&!n)return p.resolve(!0),p;e&&!k?this.getChildren(e,b.hitch(this,function(b){b=[].concat(b);var d=f.indexOf(b,a);b.splice(d,1);this.onChildrenChange(e,b);p.resolve(this.store.put(a,{overwrite:!0,parent:g,oldParent:e,before:n}))})):p.resolve(this.store.put(a,{overwrite:!0,parent:g,oldParent:e,before:n}));return p},onChange:function(){},onChildrenChange:function(){},onDelete:function(){}})})},"widgets/NearMe/setting/layerChooserPopup":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/dom-class dojo/on dojo/text!./layerChooserPopup.html jimu/dijit/LayerChooserFromMap jimu/dijit/Popup".split(" "),
function(f,v,q,l,b,a,e,c,m){return f([v,q],{baseClass:"jimu-widget-nearme-setting",templateString:e,_layerChooserFromMap:null,popup:null,searchLayers:[],startup:function(){this.inherited(arguments)},postCreate:function(){this._createLayerSelectorPopup();this._initLayerSelector();this.own(a(this.cancelButton,"click",l.hitch(this,function(){this.onCancelClick()})));this.own(a(this.okButton,"click",l.hitch(this,function(){b.contains(this.okButton,"jimu-state-disabled")||(this._getSelectedSearchLayers(),
this.onOkClick())})))},_initLayerSelector:function(){var a={multiple:!0,createMapResponse:this.map.webMapResponse,showLayerTypes:["FeatureLayer"],filter:this._createFiltersForLayerSelector()};this._layerChooserFromMap=new c(a);this._layerChooserFromMap.placeAt(this.layerSelectorNode);this._layerChooserFromMap.startup();this._layerChooserFromMap._onTreeClick=l.hitch(this,function(){this._layerChooserFromMap.getSelectedItems().length?b.remove(this.okButton,"jimu-state-disabled"):b.add(this.okButton,
"jimu-state-disabled")})},_createFiltersForLayerSelector:function(){var a,b;a=c.createFeaturelayerFilter(["point","polyline","polygon"],!1,!1);b=c.createImageServiceLayerFilter(!0);return c.orCombineFilters([a,b])},_createLayerSelectorPopup:function(){this.popup=new m({titleLabel:this.nls.layerSelector.selectLayerLabel,width:640,height:200,content:this.layerSelectorContainer})},_getSelectedSearchLayers:function(){var a,b,c,e;this.searchLayers=[];b=this._layerChooserFromMap.getSelectedItems();if(0<
b.length)for(a=0;a<b.length;a++)e={url:b[a].layerInfo.layerObject.url,geometryType:b[a].layerInfo.layerObject.geometryType,id:b[a].layerInfo.id},e.layerId=b[a].layerId?b[a].layerId:e.url.substr(e.url.lastIndexOf("/")+1,e.url.length),c=e.url.substr(0,e.url.lastIndexOf("/")+1),e.baseURL=c,this.searchLayers.push(e)},onOkClick:function(a){return a},onCancelClick:function(a){return a}})})},"jimu/dijit/LayerChooserFromMap":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/on dojo/store/Memory dojo/Deferred dojo/store/Observable dijit/tree/ObjectStoreModel dojo/promise/all dojo/_base/lang dojo/_base/html dojo/_base/array jimu/utils jimu/dijit/_Tree jimu/LayerInfos/LayerInfos jimu/dijit/LoadingIndicator".split(" "),
function(f,v,q,l,b,a,e,c,m,g,k,d,n,p,r,t,u,y){var s=f([v,q,l,b],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"errorTipSection" class\x3d"error-tip-section"\x3e\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\x3cspan class\x3d"jimu-state-error-text" data-dojo-attach-point\x3d"errTip"\x3e${nls.noLayersTip}\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_treeClass:"layer-chooser-tree",createMapResponse:null,multiple:!1,onlyShowVisible:!1,
updateWhenLayerInfosIsShowInMapChanged:!1,postMixInProperties:function(){this.nls=window.jimuNls.basicLayerChooserFromMap},postCreate:function(){this.inherited(arguments);n.addClass(this.domNode,"jimu-basic-layer-chooser-from-map");this.multiple=!!this.multiple;this.shelter=new y({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup();this._createTree();this.basicFilter=d.hitch(this,this.basicFilter);this.filter=s.andCombineFilters([this.basicFilter,this.filter]);this.createMapResponse&&
this.setCreateMapResponse(this.createMapResponse)},basicFilter:function(a){var b=new c;this.onlyShowVisible?b.resolve(a.isShowInMap()):b.resolve(!0);return b},filter:function(a){a=new c;a.resolve(!0);return a},getSelectedItems:function(){var a=this.tree.getSelectedItems();return p.map(a,d.hitch(this,function(a){return this.getHandledItem(a)}))},getAllItems:function(){var a=this.tree.getAllItems(),b=[];p.forEach(a,d.hitch(this,function(a){"root"!==a.id&&(a=this.getHandledItem(a),b.push(a))}));return b},
getHandledItem:function(a){return{name:a.name,layerInfo:a.layerInfo}},_isLeafItem:function(a){return a.isLeaf},setCreateMapResponse:function(b){this.createMapResponse=b;u.getInstance(this.createMapResponse.map,this.createMapResponse.itemInfo).then(d.hitch(this,function(b){this.layerInfosObj=b;this.own(a(this.layerInfosObj,"layerInfosChanged",d.hitch(this,this._onLayerInfosChanged)));this.updateWhenLayerInfosIsShowInMapChanged&&this.own(a(this.layerInfosObj,"layerInfosIsShowInMapChanged",d.hitch(this,
this._onLayerInfosIsShowInMapChanged)));this._buildTree(this.layerInfosObj)}))},_onLayerInfosChanged:function(a,b){this._buildTree(this.layerInfosObj);this.emit("update")},_onLayerInfosIsShowInMapChanged:function(a){this._buildTree(this.layerInfosObj);this.emit("update")},_buildTree:function(a){this._clear();n.setStyle(this.errorTipSection,"display","block");var b=a.getLayerInfoArray(),b=b.concat(a.getTableInfoArray());0!==b.length&&(n.setStyle(this.errorTipSection,"display","none"),p.forEach(b,d.hitch(this,
function(a){this._addDirectLayerInfo(a)})))},_addDirectLayerInfo:function(a){a&&a.getLayerObject().then(d.hitch(this,function(){this._addItem("root",a)}),d.hitch(this,function(a){console.error(a)}))},_clear:function(){var a=this._store.query({parent:"root"});p.forEach(a,d.hitch(this,function(a){a&&"root"!==a.id&&this._store.remove(a.id)}))},_addItem:function(a,b){var c=null,h=b.getLayerType(),e=this.filter(b);k({layerType:h,valid:e}).then(d.hitch(this,function(h){if(h.valid){var e=d.hitch(this,function(d,
e){this._id++;c={name:b.title||"",parent:a,layerInfo:b,type:h.layerType,layerClass:b.layerObject.declaredClass,id:this._id.toString(),isLeaf:d,hasChildren:e};this._store.add(c)}),w=b.getSubLayers(),u=0===w.length;u?e(u,!1):(w=p.map(w,d.hitch(this,function(a){return this.filter(a)})),k(w).then(d.hitch(this,function(a){(a=p.some(a,function(a){return a}))&&e(u,a)})))}}))},_getRootItem:function(){return{id:"root",name:"Map Root",type:"root",isLeaf:!1,hasChildren:!0}},_createTree:function(){var a=this._getRootItem(),
a=new e({data:[a],getChildren:function(a){return this.query({parent:a.id})}});this._store=new m(a);a=new g({store:this._store,query:{id:"root"},mayHaveChildren:d.hitch(this,this._mayHaveChildren)});this.tree=new t({multiple:this.multiple,model:a,showRoot:!1,isLeafItem:d.hitch(this,this._isLeafItem),style:{width:"100%"},onOpen:d.hitch(this,function(a,b){"root"!==a.id&&this._onTreeOpen(a,b)}),onClick:d.hitch(this,function(a,b,c){this._onTreeClick(a,b,c);this.emit("tree-click",a,b,c)}),getIconStyle:d.hitch(this,
function(a,b){var c=null;if(!a||"root"===a.id)return null;var d={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},e=window.location.protocol+"//"+window.location.host+require.toUrl("jimu"),k=this._getIconImageName(a,b);k&&(d.backgroundImage="url("+e+"/css/images/"+k+")",c=d);return c})});n.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.shelter.domNode,"before")},_mayHaveChildren:function(a){return a.hasChildren},_getIconImageName:function(a,
b){var c="";if("ArcGISDynamicMapServiceLayer"===a.type||"ArcGISTiledMapServiceLayer"===a.type)c=b?"mapserver_open.png":"mapserver_close.png";else if("GroupLayer"===a.type)c=b?"group_layer2.png":"group_layer1.png";else if("FeatureLayer"===a.type){var d=r.getTypeByGeometryType(a.layerInfo.layerObject.geometryType);"point"===d?c="point_layer1.png":"polyline"===d?c="line_layer1.png":"polygon"===d&&(c="polygon_layer1.png")}else c="Table"===a.type?"table.png":"ArcGISImageServiceLayer"===a.type||"ArcGISImageServiceVectorLayer"===
a.type?"image_layer.png":b?"mapserver_open.png":"mapserver_close.png";return c},_onTreeOpen:function(a,b){if("root"!==a.id){var c=[],h=[],c=a.layerInfo.getSubLayers();a.checked||(this.shelter.show(),h=p.map(c,d.hitch(this,function(a){return a.getLayerObject()})),k(h).then(d.hitch(this,function(){this.domNode&&(p.forEach(c,d.hitch(this,function(b){this._addItem(a.id,b)})),a.checked=!0,this.shelter.hide())}),d.hitch(this,function(a){console.error(a);this.shelter.hide()})))}},_onTreeClick:function(a,
b,c){},destroy:function(){this.shelter&&this.shelter.destroy();this.tree&&this.tree.destroy();this.shelter=null;this.tree.destroy();this.inherited(arguments)}});s.createFilterByLayerType=function(a){d.isArrayLike(a)||(a=[]);return function(b){var d=new c;if(0===a.length)d.resolve(!0);else{var h=[];b.traversal(function(a){h.push(a.getLayerType())});k(h).then(function(b){for(var c=0;c<b.length;c++)for(var h=0;h<a.length;h++)if(b[c]===a[h]){d.resolve(!0);return}d.resolve(!1)},function(a){console.error(a);
d.reject(a)})}return d}};s.createFeaturelayerFilter=function(a,b,d){var h=["point","polyline","polygon"];a&&0<a.length?(a=p.filter(a,function(a){return 0<=h.indexOf(a)}),0===a.length&&(a=h)):a=h;return function(h){var e=new c,u=h.getLayerType();h=h.getLayerObject();k({layerType:u,layerObject:h}).then(function(c){var h=c.layerType;c=c.layerObject;"ArcGISDynamicMapServiceLayer"===h?e.resolve(!0):"ArcGISTiledMapServiceLayer"===h?e.resolve(!0):"GroupLayer"===h?e.resolve(!0):"FeatureCollection"===h?e.resolve(!0):
"FeatureLayer"===h?(h=r.getTypeByGeometryType(c.geometryType),h=0<=p.indexOf(a,h),c.url?(c=r.isFeaturelayerUrlSupportQuery(c.url,c.capabilities),e.resolve(h&&c)):e.resolve(b&&h)):"Table"===h?(c=r.isFeaturelayerUrlSupportQuery(c.url,c.capabilities),e.resolve(d&&c)):e.resolve(!1)},function(a){console.log(a);e.reject(a)});return e}};s.createImageServiceLayerFilter=function(a){return function(b){var d=new c,h=b.getLayerType();b=b.getLayerObject();k({layerType:h,layerObject:b}).then(function(b){var c=
b.layerType;"ArcGISImageServiceLayer"===c||"ArcGISImageServiceVectorLayer"===c?a?r.isImageServiceSupportQuery(b.layerObject.capabilities)?d.resolve(!0):d.resolve(!1):d.resolve(!0):d.resolve(!1)},function(a){console.log(a);d.reject(a)});return d}};s.createQueryableLayerFilter=function(){var a=s.createFeaturelayerFilter(["point","polyline","polygon"],!1,!0),b=s.createImageServiceLayerFilter(!0);return s.orCombineFilters([a,b])};s.andCombineFilters=function(a){return s._combineFilters(a,!0)};s.orCombineFilters=
function(a){return s._combineFilters(a,!1)};s._combineFilters=function(a,b){return function(d){var h=new c,e=p.map(a,function(a){return a(d)});k(e).then(function(a){var c=!1,c=b?p.every(a,function(a){return a}):p.some(a,function(a){return a});h.resolve(c)},function(a){console.error(a);h.reject(a)});return h}};return s})},"dojo/store/Observable":function(){define(["../_base/kernel","../_base/lang","../when","../_base/array"],function(f,v,q,l){f=function(b){function a(a,c){var e=b[a];e&&(b[a]=function(l){var m;
"put"===a&&(m=b.getIdentity(l));if(g)return e.apply(this,arguments);g=!0;try{var f=e.apply(this,arguments);q(f,function(a){c("object"==typeof a&&a||l,m)});return f}finally{g=!1}})}var e=[],c=0;b=v.delegate(b);b.notify=function(a,b){c++;for(var l=e.slice(),g=0,m=l.length;g<m;g++)l[g](a,b)};var m=b.query;b.query=function(a,d){d=d||{};var g=m.apply(this,arguments);if(g&&g.forEach){var f=v.mixin({},d);delete f.start;delete f.count;var r=b.queryEngine&&b.queryEngine(a,f),t=c,u=[],y;g.observe=function(a,
k){1==u.push(a)&&e.push(y=function(a,h){q(g,function(e){var g=e.length!=d.count,f,m;if(++t!=c)throw Error("Query is out of date, you must observe() the query prior to any data modifications");var p,n=-1,s=-1;if(void 0!==h){var y=[].concat(e);r&&!a&&(y=r(e));f=0;for(m=e.length;f<m;f++){var q=e[f];if(b.getIdentity(q)==h&&!(0>y.indexOf(q))){p=q;n=f;(r||!a)&&e.splice(f,1);break}}}if(r){if(a&&(r.matches?r.matches(a):r([a]).length))f=-1<n?n:e.length,e.splice(f,0,a),s=l.indexOf(r(e),a),e.splice(f,1),d.start&&
0==s||!g&&s==e.length?s=-1:e.splice(s,0,a)}else a&&(void 0!==h?s=n:d.start||(s=b.defaultIndex||0,e.splice(s,0,a)));if((-1<n||-1<s)&&(k||!r||n!=s)){g=u.slice();for(f=0;e=g[f];f++)e(a||p,n,s)}})});var f={};f.remove=f.cancel=function(){var b=l.indexOf(u,a);-1<b&&(u.splice(b,1),u.length||e.splice(l.indexOf(e,y),1))};return f}}return g};var g;a("put",function(a,c){b.notify(a,c)});a("add",function(a){b.notify(a)});a("remove",function(a){b.notify(void 0,a)});return b};v.setObject("dojo.store.Observable",
f);return f})},"jimu/dijit/_Tree":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_TreeNode.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/event dojo/query dojo/aspect dojo/on dojo/Evented dijit/registry dijit/Tree jimu/utils".split(" "),function(f,v,q,l,b,a,e,c,m,g,k,d,n,p,r){var t=f([p._TreeNode,d],{templateString:l,declaredClass:"jimu._TreeNode",isLeaf:!1,groupId:"",postCreate:function(){this.inherited(arguments);a.addClass(this.domNode,
"jimu-tree-node");this.isLeaf=!!this.isLeaf;this.groupId?(this.checkNode=a.toDom('\x3cinput type\x3d"radio" /\x3e'),this.checkNode.name=this.groupId):this.checkNode=a.toDom('\x3cinput type\x3d"checkbox" /\x3e');a.addClass(this.checkNode,"jimu-tree-check-node");a.place(this.checkNode,this.contentNode,"first");this.own(k(this.checkNode,"click",b.hitch(this,this._onClick)));this.isLeaf?this.groupId?a.setStyle(this.checkNode,"display","none"):a.setStyle(this.checkNode,"display","inline"):a.setStyle(this.checkNode,
"display","none");this.isLeaf?a.addClass(this.domNode,"jimu-tree-leaf-node"):a.addClass(this.domNode,"jimu-tree-not-leaf-node")},select:function(){this.isLeaf&&(this.checkNode.checked=!0,a.addClass(this.domNode,"jimu-tree-selected-leaf-node"))},unselect:function(){this.isLeaf&&(this.checkNode.checked=!1,a.removeClass(this.domNode,"jimu-tree-selected-leaf-node"))},toggleSelect:function(){this.isLeaf&&(this.checkNode.checked?this.unselect():this.select())},_onClick:function(a){(a.target||a.srcElement)===
this.checkNode?this.tree._onCheckNodeClick(this,this.checkNode.checked,a):this.tree._onClick(this,a)},_onChange:function(){this.isLeaf&&setTimeout(b.hitch(this,function(){this.checkNode.checked?this.emit("tn-select",this):this.emit("tn-unselect",this)}),100)},destroy:function(){delete this.tree;this.inherited(arguments)}});return f([p,d],{declaredClass:"jimu._Tree",openOnClick:!0,multiple:!0,uniqueId:"",showRoot:!1,postMixInProperties:function(){this.inherited(arguments);this.uniqueId="tree_"+r.getRandomString()},
postCreate:function(){this.inherited(arguments);a.addClass(this.domNode,"jimu-tree");this.own(g.before(this,"onClick",b.hitch(this,this._jimuBeforeClick)));this.rootLoadingIndicator&&a.setStyle(this.rootLoadingIndicator,"display","none");this.dndController.singular=!0},removeItem:function(a){this.model.store.remove(a)},getAllItems:function(){var a=this.getAllTreeNodeWidgets();return e.map(a,b.hitch(this,function(a){var b=a.item;b.selected=a.checkNode.checked;return b}))},getSelectedItems:function(){var a=
this.getAllTreeNodeWidgets(),a=e.filter(a,b.hitch(this,function(a){return a.checkNode.checked}));return e.map(a,b.hitch(this,function(a){return a.item}))},getFilteredItems:function(a){var c=this.getAllTreeNodeWidgets(),c=e.map(c,b.hitch(this,function(a){var b=a.item;b.selected=a.checkNode.checked;return b}));return e.filter(c,b.hitch(this,function(b){return a(b)}))},getTreeNodeByItemId:function(a){for(var b=this._getAllTreeNodeDoms(),c=0;c<b.length;c++){var d=n.byNode(b[c]);if(d.item.id.toString()===
a.toString())return d}return null},selectItem:function(a){(a=this.getTreeNodeByItemId(a))&&a.isLeaf&&this.selectNodeWidget(a)},unselectItem:function(a){(a=this.getTreeNodeByItemId(a))&&a.isLeaf&&a.unselect()},getAllLeafTreeNodeWidgets:function(){var a=this.getAllTreeNodeWidgets();return e.filter(a,b.hitch(this,function(a){return a.isLeaf}))},getAllTreeNodeWidgets:function(){var a=this._getAllTreeNodeDoms();return e.map(a,b.hitch(this,function(a){return n.byNode(a)}))},isLeafItem:function(a){return a&&
a.isLeaf},_getAllTreeNodeDoms:function(){return m(".dijitTreeNode",this.domNode)},_createTreeNode:function(a){a.isLeaf=this.isLeafItem(a.item);this.multiple||(a.groupId=this.uniqueId);return new t(a)},_onTreeNodeSelect:function(a){this.emit("item-select",{item:a.item,treeNode:a})},_onTreeNodeUnselect:function(a){this.emit("item-unselect",{item:a.item,treeNode:a})},selectNodeWidget:function(a){this.multiple||this.unselectAllLeafNodeWidgets();a.select()},_jimuBeforeClick:function(b,c,d){c.isLeaf&&(a.hasClass(d.target||
d.srcElement,"jimu-tree-check-node")||(this.multiple?c.toggleSelect():this.selectNodeWidget(c)));return arguments},_onCheckNodeClick:function(a,d,e){!this.multiple&&d&&this.unselectAllLeafNodeWidgets();c.stop(e);this.focusNode(a);setTimeout(b.hitch(this,function(){d?this.selectNodeWidget(a):a.unselect();this.onClick(a.item,a,e)}),0)},unselectAllLeafNodeWidgets:function(){var a=this.getAllLeafTreeNodeWidgets();e.forEach(a,b.hitch(this,function(a){a.unselect()}))}})})},"widgets/NearMe/utils":function(){define(["dojo/_base/declare",
"dijit/_WidgetBase","dojo/_base/array","dojo/_base/lang"],function(f,v,q,l){return f([v],{map:null,postCreate:function(){},getLayerDetailsFromMap:function(b,a,e){var c={},f;this.map&&(this.map.webMapResponse&&this.map.webMapResponse.itemInfo&&this.map.webMapResponse.itemInfo.itemData&&this.map.webMapResponse.itemInfo.itemData.operationalLayers)&&q.forEach(this.map.webMapResponse.itemInfo.itemData.operationalLayers,l.hitch(this,function(g){if(g.layerObject)if("ArcGISMapServiceLayer"===g.layerType||
"ArcGISTiledMapServiceLayer"===g.layerType){if(f=e&&e.substring(0,e.lastIndexOf("_")),!f||g.id===f)c.isMapServer=!0,b.substring(0,b.length-1)===g.url&&(q.forEach(g.resourceInfo.layers,l.hitch(this,function(b){b.id===parseInt(a,10)&&(c.title=b.name)})),q.forEach(g.layers,l.hitch(this,function(b){b.id===parseInt(a,10)&&(b.name&&(c.title=b.name),c.popupInfo=b.popupInfo,b.layerDefinition&&(b.layerDefinition.definitionExpression&&(c.definitionExpression=b.layerDefinition.definitionExpression),b.layerDefinition.drawingInfo&&
b.layerDefinition.drawingInfo.renderer&&(c.renderer=b.layerDefinition.drawingInfo.renderer)))})))}else if((!e||g.id===e)&&g.url.replace(/.*?:\/\//g,"")===(b+a).replace(/.*?:\/\//g,"")&&g.id===e)c.isMapServer=!1,c.title=g.title,c.popupInfo=g.popupInfo,g.layerDefinition&&(g.layerDefinition.definitionExpression&&(c.definitionExpression=g.layerDefinition.definitionExpression),g.layerDefinition.drawingInfo&&g.layerDefinition.drawingInfo.renderer&&(c.renderer=g.layerDefinition.drawingInfo.renderer))}));
return c}})})},"widgets/NearMe/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/NearMe/setting/SymbolChooserPopup.html":'\x3cdiv style\x3d"width: 100%; height: 100%;"\x3e\r\n    \x3cdiv class\x3d"esriCTSymbolChooserContainer"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"symbolData" title\x3d"${symbolChooserTitle}" class\x3d"common-input esriCTSymbolData"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonsDiv" class\x3d"buttonsDiv"\x3e\r\n        \x3cdiv class\x3d"button-container button-container-absolute" style\x3d"padding: 0px;"\x3e\r\n            \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"okButton"\x3e\r\n                ${nls.ok}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/NearMe/setting/NetworkServiceChooser.html":'\x3cdiv style\x3d"width: 100%; height: 100%;"\x3e\r\n    \x3cdiv class\x3d"public-search-radios esriCTSearchRadio" data-dojo-attach-point\x3d"routeSearch"\x3e\r\n        \x3cinput data-dojo-attach-point\x3d"organizationRadio" checked type\x3d"radio" name\x3d"routeSearchRadio"\r\n            class\x3d"jimu-float-leading portal-public-radio routeSearchRadio" id\x3d"org_Radio"\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"organizationLabel" class\x3d"jimu-float-leading portal-public-label"\r\n            for\x3d"org_Radio" style\x3d"cursor: pointer;"\x3e\r\n            ${nls.networkServiceChooser.arcgislabel}\x3c/label\x3e\r\n        \x3cinput data-dojo-attach-point\x3d"inputRouteURLRadio" type\x3d"radio" name\x3d"routeSearchRadio"\r\n            class\x3d"jimu-float-leading online-public-radio routeSearchRadio" id\x3d"route_URL_Radio"\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"inputRouteURLLabel" class\x3d"jimu-float-leading online-public-label"\r\n            for\x3d"route_URL_Radio" style\x3d"cursor: pointer;"\x3e\r\n            ${nls.networkServiceChooser.serviceURLabel}\x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"itemSelectDiv" class\x3d"esriCTItemSelectDiv"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"serviceUrlDiv" class\x3d"esriCTServiceUrlDiv esriCTHidden"\x3e\r\n        \x3cdiv class\x3d"serviceUrlContainer row"\x3e\r\n            \x3cdiv class\x3d"esriCTServiceLable" title\x3d"${nls.networkServiceChooser.routeURL}"\x3e\r\n                ${nls.networkServiceChooser.routeURL}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTServiceField"\x3e\r\n                \x3cdiv class\x3d"esriCTSetServiceURL" data-dojo-type\x3d"dijit/form/ValidationTextBox" trim\x3d"true" required\x3d"true"\r\n                    data-dojo-attach-point\x3d"serviceURL"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1 urlButton esriCTBtnEllipsis jimu-state-disabled"\r\n                    title\x3d"${nls.networkServiceChooser.validateRouteURL}" data-dojo-attach-point\x3d"validateRouteURL"\x3e\r\n                    ${nls.networkServiceChooser.validateRouteURL}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTExampleUrl row"\x3e\r\n            \x3cdiv class\x3d"esriCTServiceLable" title\x3d" ${nls.networkServiceChooser.exampleText}"\x3e\r\n                ${nls.networkServiceChooser.exampleText}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTServiceField"\x3e\r\n                \x3cdiv class\x3d"esriCTHint esriCTNetworkChooserHint"\x3e\r\n                    \x3cdiv class\x3d"esriCTExampleUrl"\x3e\r\n                        ${nls.networkServiceChooser.hintRouteURL1}\x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTExampleUrl"\x3e\r\n                        ${nls.networkServiceChooser.hintRouteURL2}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"routeLayerList" class\x3d"esriCTRouteListDiv"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"agolRouteLayerList" class\x3d"esriCTAgolRouteListDiv esriCTHidden"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonsDiv" class\x3d"buttonsDiv"\x3e\r\n        \x3cdiv class\x3d"button-container button-container-absolute" style\x3d"padding: 0px;"\x3e\r\n            \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"cancelButton"\x3e\r\n                ${nls.cancel}\x3c/div\x3e\r\n            \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1 jimu-state-disabled"\r\n                data-dojo-attach-point\x3d"okButton"\x3e\r\n                ${nls.ok}\x3c/div\x3e\r\n            \x3cdiv class\x3d"jimu-btn jimu-float-trailing next jimu-state-disabled" data-dojo-attach-point\x3d"btnNext"\x3e\r\n                ${nls.next}\x3c/div\x3e\r\n            \x3cdiv class\x3d"jimu-btn jimu-float-trailing back esriCTHidden" data-dojo-attach-point\x3d"btnBack"\r\n                data-dojo-attach-event\x3d"onclick:_onBtnBackClicked"\x3e\r\n                ${nls.back}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:jimu/dijit/templates/ItemSelector.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"setting-tab-container"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"tabNode"\x3e\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content mycontent-tab" data-dojo-attach-point\x3d"mycontentTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main mycontent-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onMyContentSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content organization-tab" data-dojo-attach-point\x3d"organizationTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main organization-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onOrganizationSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content group-tab" data-dojo-attach-point\x3d"groupTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main group-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"groups-section" style\x3d"position:absolute;width:100%;top:50px;" data-dojo-attach-point\x3d"groupsSection"\x3e\r\n\t\t\t\t\t\x3cspan\x3e${nls.groups}:\x3c/span\x3e\r\n\t\t\t\t\t\x3cselect class\x3d"groups-select" data-dojo-attach-point\x3d"groupsSelect"\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"nodata"\x3e${nls.noneGroups}\x3c/option\x3e\r\n\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onGroupSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:85px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content public-tab" data-dojo-attach-point\x3d"publicTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main public-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onPublicSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"public-search-radios"\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"portalPublicRaido" type\x3d"radio" name\x3d"publicSearchRadio" class\x3d"jimu-float-leading portal-public-radio" /\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalPublicLabel" class\x3d"jimu-float-leading portal-public-label"\x3ePortal\x3c/label\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"onlinePublicRaido" type\x3d"radio" name\x3d"publicSearchRadio" class\x3d"jimu-float-leading online-public-radio" /\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"onlinePublicLabel" class\x3d"jimu-float-leading online-public-label"\x3eArcGIS Online\x3c/label\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicItemSection" class\x3d"public-item-section"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicPortalItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicOnlineItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"signin-section" data-dojo-attach-point\x3d"signinSection" style\x3d"display:none;"\x3e\r\n\t\t\x3cdiv class\x3d"signin-tip"\x3e${nls.signInTip}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_ItemTable.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"items-section all-items-section" data-dojo-attach-point\x3d"allItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"allItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onAllItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"allItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"allItemTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"allItemsShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"items-section filtered-items-section" data-dojo-attach-point\x3d"filteredItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"filteredItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onFilteredItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"filteredItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"filteredItemsTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"search-none-tip-section" data-dojo-attach-point\x3d"searchNoneTipSection" style\x3d"display:none;"\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-icon jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-tip jimu-state-error-text"\x3e${nls.searchNone}\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"filteredItemShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\r\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\r\n\t\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\r\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:widgets/NearMe/setting/layerChooserPopup.html":'\x3cdiv data-dojo-attach-point\x3d"layerSelectorContainer" style\x3d"width: 100%; height: 100%;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"layerSelectorNode" class\x3d"esriCTLayerSelectorNode"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonsDiv" class\x3d"buttonsDiv"\x3e\r\n        \x3cdiv class\x3d"button-container button-container-absolute" style\x3d"padding: 0px;"\x3e\r\n            \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"cancelButton"\x3e\r\n                ${nls.cancel}\x3c/div\x3e\r\n            \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1 jimu-state-disabled"\r\n                data-dojo-attach-point\x3d"okButton"\x3e\r\n                ${nls.ok}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:jimu/dijit/templates/_TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"contentNode" class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/NearMe/setting/Setting.html":'\x3cdiv class\x3d"esriCTMainContainer" style\x3d"width: 100%; height: 100%;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"tabDiv" class\x3d"esriCTFullHeight"\x3e\r\n        \x3c!-- Search Settings tab --\x3e\r\n        \x3cdiv class\x3d"esriCTSearchTabNode" data-dojo-attach-point\x3d"searchTabNode" class\x3d"esriCTFullHeight"\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv class\x3d"esriCTlabel" data-dojo-attach-point\x3d"colorPickerLabelNode" title\x3d"${nls.searchSetting.fontColorLabel}"\x3e\r\n                    ${nls.searchSetting.fontColorLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                    \x3cdiv class\x3d"esriCTColorPickerNode" data-dojo-attach-point\x3d"colorPickerNode"\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint esriCTHintInline esriCTHintLeftMargin"\x3e\r\n                        ${nls.searchSetting.fontColorHintText}\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer jimu-state-disabled" data-dojo-attach-point\x3d"addLayersLabelNode"\r\n                    title\x3d"${nls.layerSelector.selectLayerLabel}"\x3e\r\n                    ${nls.layerSelector.selectLayerLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                    \x3cdiv class\x3d"esriCTSelectedLayersDiv" data-dojo-attach-point\x3d"layerListNode"\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTAddLayerButton jimu-btn jimu-float-trailing" title\x3d"${nls.layerSelector.addLayerButton}"\r\n                        data-dojo-attach-point\x3d"addLayerButton"\x3e\r\n                        ${nls.layerSelector.addLayerButton}\x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint"\x3e\r\n                        ${nls.layerSelector.layerSelectionHint}\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv class\x3d"esriCTlabel" title\x3d"${nls.searchSetting.searchLayerResultLabel}"\x3e\r\n                    ${nls.searchSetting.searchLayerResultLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerField "\x3e\r\n                    \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"esriCTCheckBox" data-dojo-attach-point\x3d"searchLayerResultNode"\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint esriCTHintInline esriCTHintLeftMargin"\x3e\r\n                        ${nls.searchSetting.searchLayerResultHint}\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv class\x3d"esriCTlabel" data-dojo-attach-point\x3d"bufferColorPickerLabelNode" title\x3d"${nls.searchSetting.bufferVisibilityLabel}"\x3e\r\n                    ${nls.searchSetting.bufferVisibilityLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                    \x3cdiv class\x3d"esriCTCheckBox" checked\x3d"false" data-dojo-type\x3d"jimu/dijit/CheckBox"\r\n                        data-dojo-attach-point\x3d"bufferVisibiliyCheckBox"\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint esriCTHintInline esriCTHintLeftMargin"\x3e\r\n                        ${nls.searchSetting.bufferVisibilityHintText}\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row" data-dojo-attach-point\x3d"bufferColorSetting"\r\n                class\x3d"esriCTHidden"\x3e\r\n                \x3cdiv class\x3d"esriCTlabel" title\x3d"${nls.searchSetting.bufferColorLabel}"\x3e\r\n                    ${nls.searchSetting.bufferColorLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                    \x3cdiv class\x3d"esriCTPreviewField" data-dojo-attach-point\x3d"polygonSymbolNode"\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint esriCTPreviewHintField"\x3e\r\n                        ${nls.searchSetting.bufferColorHintText}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer" title\x3d"${nls.searchSetting.defaultBufferDistanceLabel}"\x3e\r\n                    ${nls.searchSetting.defaultBufferDistanceLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"defaultBufferDistanceNode" style\x3d"width: 100%;" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                        trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint"\x3e\r\n                        ${nls.searchSetting.defaultBufferHintLabel}\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer" title\x3d"${nls.searchSetting.maxBufferDistanceLabel}"\x3e\r\n                    ${nls.searchSetting.maxBufferDistanceLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"maxBufferDistanceNode" style\x3d"width: 100%;" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                        trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint"\x3e\r\n                        ${nls.searchSetting.maxBufferHintLabel}\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer" title\x3d"${nls.searchSetting.bufferDistanceUnitLabel}"\x3e\r\n                    ${nls.searchSetting.bufferDistanceUnitLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                    \x3cselect style\x3d"width: 100%;" data-dojo-attach-point\x3d"selectBufferUnitNode" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n                        \x3coption value\x3d"miles"\x3e${nls.units.miles.displayText}\x3c/option\x3e\r\n                        \x3coption value\x3d"kilometers"\x3e${nls.units.kilometers.displayText}\x3c/option\x3e\r\n                        \x3coption value\x3d"meters"\x3e${nls.units.meters.displayText}\x3c/option\x3e\r\n                        \x3coption value\x3d"feet"\x3e${nls.units.feet.displayText}\x3c/option\x3e\r\n                    \x3c/select\x3e\r\n                    \x3cdiv class\x3d"esriCTHint"\x3e\r\n                        ${nls.searchSetting.bufferUnitLabel}\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv class\x3d"esriCTlabel" data-dojo-attach-point\x3d"graphicLocationPointSymbolLabelNode"\r\n                    title\x3d"${nls.searchSetting.selectGraphicLocationSymbol}"\x3e\r\n                    ${nls.searchSetting.selectGraphicLocationSymbol}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                    \x3cdiv class\x3d"esriCTPreviewField" data-dojo-attach-point\x3d"pointSymbolNode"\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint esriCTPreviewHintField"\x3e\r\n                        ${nls.searchSetting.graphicLocationSymbolHintText}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv class\x3d"esriCTlabel" title\x3d"${nls.searchSetting.zoomToSelectedFeature}"\x3e\r\n                    ${nls.searchSetting.zoomToSelectedFeature}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                    \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"esriCTCheckBox" data-dojo-attach-point\x3d"zoomToSelectedFeature"\r\n                        class\x3d"jimu-checkbox"\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint esriCTHintInline esriCTHintLeftMargin"\x3e\r\n                        ${nls.searchSetting.zoomToSelectedFeatureHintText}\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv class\x3d"esriCTlabel" title\x3d"${nls.searchSetting.intersectSearchLocation}"\x3e\r\n                    ${nls.searchSetting.intersectSearchLocation}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                    \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"esriCTCheckBox" data-dojo-attach-point\x3d"intersectSearchLocation"\r\n                        class\x3d"jimu-checkbox"\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint esriCTHintInline esriCTHintLeftMargin"\x3e\r\n                        ${nls.searchSetting.intersectSearchLocationHintText}\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Direction Settings tab --\x3e\r\n        \x3cdiv class\x3d"esriCTDirectionTabNode" data-dojo-attach-point\x3d"directionTabNode"\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row esriCTHidden" data-dojo-attach-point\x3d"routeSettingsNode"\x3e\r\n                \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer" data-dojo-attach-point\x3d"routeServiceLabelNode"\r\n                    title\x3d"${nls.routeSetting.routeServiceUrl}"\x3e\r\n                    ${nls.routeSetting.routeServiceUrl}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                    \x3cdiv class\x3d"esriCTSetRouteURL" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"routeServiceURLNode"\r\n                        trim\x3d"true" required\x3d"true" disabled\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTURLSetButton jimu-btn jimu-float-trailing jimu-leading-margin1"\r\n                        data-dojo-attach-point\x3d"onSetBtnClickNode" title\x3d"${nls.routeSetting.buttonSet}"\x3e\r\n                        ${nls.routeSetting.buttonSet}\x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint"\x3e\r\n                        ${nls.routeSetting.routeServiceUrlHintText}\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                    \x3cdiv class\x3d"esriCTlabel" data-dojo-attach-point\x3d"directionLengthUnitLabelNode" title\x3d"${nls.routeSetting.directionLengthUnit}"\x3e\r\n                        ${nls.routeSetting.directionLengthUnit}\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                        \x3cselect style\x3d"width: 100%;" data-dojo-attach-point\x3d"directionLengthUnitNode" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n                            \x3coption value\x3d"miles"\x3e${nls.units.miles.displayText}\x3c/option\x3e\r\n                            \x3coption value\x3d"kilometers"\x3e${nls.units.kilometers.displayText}\x3c/option\x3e\r\n                        \x3c/select\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint esriCTMargin"\x3e\r\n                        ${nls.routeSetting.unitsForRouteHintText}\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                    \x3cdiv class\x3d"esriCTlabel" data-dojo-attach-point\x3d"routeSymbolLabelNode" title\x3d"${nls.routeSetting.selectRouteSymbol}"\x3e\r\n                        ${nls.routeSetting.selectRouteSymbol}\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                        \x3cdiv class\x3d"esriCTSymbolPreviewField" data-dojo-attach-point\x3d"routeSymbolNode"\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTHint esriCTSymbolPreviewHintField"\x3e\r\n                            ${nls.routeSetting.routeSymbolHintText}\x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTHidden esriCTLayerContainer row" data-dojo-attach-point\x3d"routingDisabledMsg"\x3e\r\n                ${nls.routeSetting.routingDisabledMsg}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/NearMe/setting/css/style.css":".jimu-widget-nearme-setting .esriCTMainContainer{width: 100%; height: 100%;}.jimu-widget-nearme-setting .esriCTlabel{width: 25%; padding: 5px 10px 5px 0; word-break: break-word; margin-top: 5px; margin-bottom: 5px; float: left; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; min-width: 250px; font-size: 14px; color: #596679;}.jimu-widget-nearme-setting .esriCTColorPickerNode{float: left; margin: 0 10px 0 0;}.jimu-widget-nearme-setting .esriCTHintInline{line-height: 30px;}.jimu-widget-nearme-setting .esriCTHintLeftMargin{margin-left: 10px;}.jimu-widget-nearme-setting .esriCTDirectionTabNode .esriCTHintInline{margin-top: 2px;}.jimu-widget-nearme-setting .row{clear: both;}.jimu-widget-nearme .esriCTFullHeight{height: 100%;}.jimu-widget-nearme-setting .esriCTSelectedLayersDiv{height: 50px; overflow: auto; width: 88%; float: left; border: 1px solid #d2dae2; background: #e3ecf2; margin: 0 10px 0 0px;}.jimu-widget-nearme-setting .esriCTAddLayerButton{float: right; margin-top: 9px; max-width: 70px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-nearme-setting .esriCTLayerSelectorNode{height: 90px; overflow: auto; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-nearme-setting .esriCTLayerListItem{height: 24px; color: #7989a0; padding: 0px 5px; text-overflow: ellipsis; overflow: hidden; white-space: nowrap; line-height: 22px; font-size: 14px;}.jimu-widget-nearme-setting .esriCTGeometryTypeIcon{height: 16px; width: 16px; background-repeat: no-repeat; margin: 6px 2px 0px 10px; float: left;}.jimu-widget-nearme-setting .esriCTCheckBox{float: left; height: 20px; width: 20px; margin-top: 10px; margin-right: 10px;}.jimu-widget-nearme-setting .esriCTLayerContainer{width: 100%; float: left;}.jimu-widget-nearme-setting .esriCTLayerField{width: 73%; float: left;}.jimu-widget-nearme-setting .esriCTHint{margin: 5px 0 10px 0; float: left; font-size: 12px; color: #a0acbf; font-style: oblique;}.jimu-widget-nearme-setting .esriCTSetRouteURL{width: 100%;}.jimu-widget-nearme-setting .esriCTHidden{display: none;}.jimu-widget-nearme-setting .buttonsDiv .jimu-popup .button-container{padding: 0px;}.jimu-widget-nearme-setting .jimu-float-leading{margin-right: 10px;}.jimu-widget-nearme-setting .esriCTServiceUrlDiv{float: left; width: 100%;}.jimu-widget-nearme-setting .esriCTRouteLayersDiv{float: left; width: 100%;}.jimu-widget-nearme-setting .esriCTItemSelectDiv{margin-top: 10px; float: left; height: 450px; width: 100%;}.jimu-widget-nearme-setting .esriCTExampleUrl{float: left; width: 100%;}.jimu-widget-nearme-setting .esriCTRouteListDiv{margin-top: 10px; float: left; width: 100%; height: 360px; overflow: auto; border: 1px solid #ccc;}.jimu-widget-nearme-setting .esriCTAgolRouteListDiv{margin-top: 10px; float: left; width: 100%; height: 450px; overflow: auto; border: 1px solid #ccc;}.jimu-widget-nearme-setting .esriCTSearchRadio{float: left; width: 100%;}.jimu-widget-nearme-setting .serviceUrlContainer{float: left; width: 100%; margin-top: 10px;}.jimu-widget-nearme-setting .esriCTServiceLable{float: left; width: 100px; line-height: 30px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-nearme-setting .esriCTServiceField{width: 85%; float: left;}.jimu-widget-nearme-setting .esriCTSetServiceURL{float: left; width: 85%;}.jimu-widget-nearme-setting .urlButton{line-height: 30px; max-width: 80px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.claro .dijitTreeRowFocused{background-repeat: repeat;}.claro .dijitTreeExpando{background-position: -93px -10px; display: none;}.claro .dijitTreeExpando: :first-child{display: block; background-position: -35px 0;}.jimu-widget-nearme-setting .esriCTSymbolChooserNode{text-align: center; cursor: pointer; min-width: 80px;}.jimu-widget-nearme-setting .esriCTSymbolPreviewText{font-size: 14px; color: #596679; padding-right: 5px; max-width: 130px; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;}.jimu-widget-nearme-setting .esriCTPreviewField{width: 25%; float: left;}.jimu-widget-nearme-setting .esriCTPreviewHintField{width: 70%; line-height: 30px; margin-left: 10px;}.jimu-widget-nearme-setting .esriCTSymbolPreviewHintField{width: 50%; line-height: 20px; margin-left: 5px; float: right;}.jimu-widget-nearme-setting .esriCTSymbolPreviewField{width: 35%; min-width: 250px; float: left;}.claro .dijitTextBox, .claro .dijitSelect{color: #7989a0; background-color: #fafafc; border: 1px solid #d2dae2;}.dj_webkit .claro .dijitTextBox .dijitInputInner{color: #7989a0;}.claro .dijitSelectDisabled, .claro .dijitTextBoxDisabled, .claro .dijitTextBoxDisabled .dijitInputContainer{background-color: #e3ecf2;}.jimu-widget-nearme-setting .esriCTDirectionTabNode .dijitTextBox{width: 88% !important; float: left;}.claro .dijitSelect .dijitArrowButton{background-color: #fafafc; background-image: none; border-color: #fafafc;}.jimu-widget-nearme-setting .dijitSelect .dijitButtonContents{border-style: none none none none; background-color: #fafafc;}.jimu-widget-nearme-setting .dijitTreeLabel{font-size: 14px; color: #596679;}.dijitInline.dijitIcon.dijitTreeIcon.dijitLeaf{margin-left: 2px;}.claro .dijitSelect .dijitInputField{font-size: 14px; margin-right: 8px;}.jimu-widget-nearme-setting .esriCTURLSetButton{line-height: 30px; margin: 0 0 0 10px; float: right; max-width: 70px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-nearme-setting .esriCTSearchTabNode, .jimu-widget-nearme-setting .esriCTDirectionTabNode{margin-top: 20px;}.jimu-widget-nearme-setting .esriCTSymbolChooserContainer{height: calc(100% - 50px); overflow: auto;}.esriRtl .jimu-widget-nearme-setting .esriCTColorPickerNode{float: right; margin: 0 0px 0 10px;}.esriRtl .jimu-widget-nearme-setting .esriCTHint{margin: 5px 5px 10px 0px; float: right;}.esriRtl .jimu-widget-nearme-setting .esriCTLayerField{float: right;}.esriRtl .jimu-widget-nearme-setting .esriCTPreviewHintField{margin-right: 10px;}.esriRtl .jimu-widget-nearme-setting .esriCTlabel{padding: 5px 0px 5px 10px; float: right;}.esriRtl .jimu-widget-nearme-setting .esriCTSelectedLayersDiv{float: right; margin-left: 10px; margin-right: 0px;}.esriRtl .jimu-widget-nearme-setting .esriCTPreviewField{float: right;}.esriRtl .jimu-widget-nearme-setting .esriCTGeometryTypeIcon{float: right;}.esriRtl .jimu-widget-nearme-setting .esriCTSetRouteURL{float: right; margin: 0;}.esriRtl .jimu-widget-nearme-setting .esriCTURLSetButton{float: left; margin: 0;}.esriRtl .jimu-widget-nearme-setting .esriCTSymbolPreviewField{float: right;}.esriRtl .jimu-widget-nearme-setting .esriCTSymbolPreviewText{padding: 0 0 0 5px;}.esriRtl .jimu-widget-nearme-setting .esriCTAddLayerButton{float: left;}.esriRtl .jimu-widget-nearme-setting .esriCTServiceLable{float: right;}.esriRtl .jimu-widget-nearme-setting .esriCTSetServiceURL{float: right;}.esriRtl .jimu-widget-nearme-setting .esriCTSymbolPreviewHintField{float: left; margin-right: 5px; margin-left: 0px;}.esriRtl .jimu-widget-nearme-setting .esriCTCheckBox{float: right; margin-left: 10px; margin-right: 0px;}.esriRtl .jimu-widget-nearme-setting .jimu-float-leading{margin-left: 10px; margin-right: 0px;}input[type\x3dtext]::-ms-clear{display: none;}",
"*now":function(f){f(['dojo/i18n!*preload*widgets/NearMe/setting/nls/Setting*["ar","cs","da","de","en","el","es","et","fi","fr","he","hr","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sr","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])}}});
define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/dom-construct dojo/query dojo/on ./SymbolChooserPopup jimu/dijit/ColorPicker dojo/_base/Color jimu/utils esri/symbols/jsonUtils jimu/dijit/Message jimu/dijit/LoadingIndicator jimu/dijit/Popup ./NetworkServiceChooser ./layerChooserPopup ../utils jimu/portalUtils jimu/symbolUtils jimu/dijit/TabContainer3 dojo/dom-class jimu/dijit/CheckBox dojo/domReady!".split(" "),function(f,v,q,l,b,a,e,c,m,g,k,d,n,
p,r,t,u,y,s,E,C,A){return f([v,q],{baseClass:"jimu-widget-nearme-setting",_unitsDetails:{},_searchLayers:[],_loading:null,_appUtils:null,_symbolParams:{},startup:function(){this.inherited(arguments)},postMixInProperties:function(){this.nls=l.mixin(this.nls,window.jimuNls.common)},postCreate:function(){var a={color:[255,189,1,0],outline:{color:[255,189,1,255],width:2.25,type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",style:"esriSFSSolid"};this._initTabs();this._unitsDetails={miles:{bufferUnit:"UNIT_STATUTE_MILE",
routeUnit:"MILES",distanceUnit:"miles",label:this.nls.units.miles.displayText,acronym:this.nls.units.miles.acronym,value:"miles"},kilometers:{bufferUnit:"UNIT_KILOMETER",routeUnit:"KILOMETERS",distanceUnit:"kilometers",label:this.nls.units.kilometers.displayText,acronym:this.nls.units.kilometers.acronym,value:"kilometers"},meters:{bufferUnit:"UNIT_METER",routeUnit:"METER",distanceUnit:"meters",label:this.nls.units.meters.displayText,acronym:this.nls.units.meters.acronym,value:"meters"},feet:{bufferUnit:"UNIT_FOOT",
routeUnit:"FEET",distanceUnit:"feet",label:this.nls.units.feet.displayText,acronym:this.nls.units.feet.acronym,value:"feet"}};this.defaultBufferDistanceNode.set("invalidMessage",this.nls.errorStrings.bufferErrorString);this.maxBufferDistanceNode.set("invalidMessage",this.nls.errorStrings.bufferErrorString);this._appUtils=new y({map:this.map});this.own(e(this.addLayerButton,"click",l.hitch(this,this._showLayerChooserPopup)));this.map.webMapResponse.itemInfo.itemData&&this.map.webMapResponse.itemInfo.itemData.applicationProperties&&
this.map.webMapResponse.itemInfo.itemData.applicationProperties.viewing&&this.map.webMapResponse.itemInfo.itemData.applicationProperties.viewing.routing&&this.map.webMapResponse.itemInfo.itemData.applicationProperties.viewing.routing.enabled?A.remove(this.routeSettingsNode,"esriCTHidden"):A.remove(this.routingDisabledMsg,"esriCTHidden");this._createSymbolPicker(this.routeSymbolNode,"routeSymbol","esriGeometryPolyline",this.nls.routeSetting.selectRouteSymbol);this._createSymbolPicker(this.pointSymbolNode,
"graphicLocationSymbol","esriGeometryPoint",this.nls.searchSetting.selectGraphicLocationSymbol);this.config&&(this.config.symbols&&!this.config.symbols.hasOwnProperty("bufferSymbol"))&&(this.config.symbols.bufferSymbol=a,A.add(this.bufferColorSetting,"esriCTHidden"));this._createSymbolPicker(this.polygonSymbolNode,"bufferSymbol","esriGeometryPolygon",this.nls.searchSetting.bufferColorLabel);this.own(e(this.onSetBtnClickNode,"click",l.hitch(this,this._showRouteChooser)));this._createColorPicker();
this.setConfig();this.bufferVisibiliyCheckBox.checkNode&&this.own(e(this.bufferVisibiliyCheckBox.checkNode,"click",l.hitch(this,this._onVisibilityChange)))},_initTabs:function(){this.tab=new C({tabs:[{title:this.nls.searchSetting.searchSettingTabTitle,content:this.searchTabNode},{title:this.nls.routeSetting.routeSettingTabTitle,content:this.directionTabNode}]});this.tab.placeAt(this.tabDiv)},getConfig:function(){return!this._searchLayers||!this._searchLayers.length?(this._errorMessage(this.nls.errorStrings.selectLayerErrorString),
!1):0>=Number(this.maxBufferDistanceNode.value)?(this._errorMessage(this.nls.errorStrings.maximumBufferValueGreaterThanZero),!1):""===l.trim(this.maxBufferDistanceNode.displayedValue)?(this._errorMessage(this.nls.errorStrings.invalidMaximumValue),!1):!this.maxBufferDistanceNode.value?(this._errorMessage(this.nls.errorStrings.bufferErrorString),!1):Number(this.defaultBufferDistanceNode.value)>Number(this.maxBufferDistanceNode.value)?(this._errorMessage(this.nls.errorStrings.defaultValueLessThanMax),
!1):0>=Number(this.defaultBufferDistanceNode.value)?(this._errorMessage(this.nls.errorStrings.defaultBufferValueGreaterThanZero),!1):""===l.trim(this.defaultBufferDistanceNode.displayedValue)?(this._errorMessage(this.nls.errorStrings.invalidDefaultValue),!1):!this.defaultBufferDistanceNode.value?(this._errorMessage(this.nls.errorStrings.bufferErrorString),!1):this.config={fontColor:this._fontColorPicker.color.toHex(),searchLayers:this._searchLayers,bufferInfo:this._getBufferInfo(),defaultBufferDistance:Math.round(this.defaultBufferDistanceNode.value),
maxBufferDistance:Math.round(this.maxBufferDistanceNode.value),bufferDistanceUnit:this._unitsDetails[this.selectBufferUnitNode.value],zoomToFeature:this.zoomToSelectedFeature.getValue(),intersectSearchedLocation:this.intersectSearchLocation.getValue(),routeService:this.routeServiceURLNode.value,directionLengthUnit:this._unitsDetails[this.directionLengthUnitNode.value],selectedSearchLayerOnly:this.searchLayerResultNode.getValue(),symbols:this._symbolParams}},_getBufferInfo:function(){var a={};return a=
{isVisible:this.bufferVisibiliyCheckBox.getValue()}},setConfig:function(){var a=s.getPortal(this.appConfig.portalUrl).helperServices;this.config&&(this.config.fontColor&&this._fontColorPicker.setColor(new g(this.config.fontColor)),this.config.searchLayers&&this._setSearchLayersInfo(this.config.searchLayers),this.config.bufferInfo&&this._setBufferInfo(this.config.bufferInfo),this.config.defaultBufferDistance&&this.defaultBufferDistanceNode.set("value",this.config.defaultBufferDistance),this.config.maxBufferDistance&&
this.maxBufferDistanceNode.set("value",this.config.maxBufferDistance),this.config.bufferDistanceUnit&&this.selectBufferUnitNode.set("value",this.config.bufferDistanceUnit.value),this.config.directionLengthUnit&&this.directionLengthUnitNode.set("value",this.config.directionLengthUnit.value),this.config.selectedSearchLayerOnly&&this.searchLayerResultNode.setValue(this.config.selectedSearchLayerOnly),this.config.routeService?this.routeServiceURLNode.set("value",this.config.routeService):a&&a.route&&
a.route.url?this.routeServiceURLNode.set("value",a.route.url):this.routeServiceURLNode.set("value",window.location.protocol+"//route.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World"),this.config.zoomToFeature&&this.zoomToSelectedFeature.setValue(this.config.zoomToFeature),this.config.intersectSearchedLocation&&this.intersectSearchLocation.setValue(this.config.intersectSearchedLocation))},_createSymbolPicker:function(a,b,c,f){var g,m,n;c&&(g={},g.type=k.getSymbolTypeByGeometryType(c),
this.config&&this.config.symbols&&this.config.symbols.hasOwnProperty(b)&&(g.symbol=d.fromJson(this.config.symbols[b])),m=this._createPreviewContainer(a),n={symbolChooserTitle:f,symbolParams:g,nls:this.nls,symbolType:b},this._showSelectedSymbol(m,g.symbol,b),this.own(e(m,"click",l.hitch(this,function(){g.symbol=d.fromJson(this._symbolParams[b]);this._initSymbolChooserPopup(n,m)}))))},_createPreviewContainer:function(a){var c;a=b.create("table",{cellspacing:"0",cellpadding:"0"},a);a=b.create("tr",{style:"height:30px"},
a);c=b.create("td",{},a);b.create("div",{innerHTML:this.nls.symbolPickerPreviewText,"class":"esriCTSymbolPreviewText"},c);a=b.create("td",{},a);return b.create("div",{"class":"esriCTSymbolChooserNode"},a)},_initSymbolChooserPopup:function(a,b){var d=new c(a);d.onOkClick=l.hitch(this,function(){var c=d.symbolChooser.getSymbol();this._showSelectedSymbol(b,c,a.symbolType);d.popup.close()})},_showSelectedSymbol:function(a,c,d){b.empty(a);if(c){var e=E.createSymbolNode(c);e||(e=b.create("div"));b.place(e,
a);this._symbolParams[d]=c.toJson()}},_createColorPicker:function(){this._fontColorPicker=new m(null,b.create("div",{},this.colorPickerNode))},_errorMessage:function(a){(new n({message:a})).message=a},_initLoading:function(){var b;this._loading=new p({hidden:!0});b=a(".widget-setting-popup")[0];this._loading.placeAt(b);this._loading.startup()},_showRouteChooser:function(){var a,b;a=new t({portalUrl:this.appConfig.portalUrl,nls:this.nls,folderUrl:this.folderUrl});b=new r({titleLabel:this.nls.routeSetting.routeServiceUrl,
width:830,height:600,content:a});a.onOkClick=l.hitch(this,function(){a.selectRouteURL&&(this.routeServiceURLNode.set("value",a.selectRouteURL),b.close())});a.onCancelClick=l.hitch(this,function(){b.close()})},_showLayerChooserPopup:function(){var a;a=new u({map:this.map,nls:this.nls});a.startup();a.onCancelClick=l.hitch(this,function(){a.popup.close()});a.onOkClick=l.hitch(this,function(){this._setSearchLayersInfo(a.searchLayers);a.popup.close()})},_setSearchLayersInfo:function(a){for(var b=0;b<a.length;b++)l.mixin(a[b],
this._appUtils.getLayerDetailsFromMap(a[b].baseURL,a[b].layerId,a[b].id));this._setSearchLayers(a)},_setSearchLayers:function(a){var c,d,e;this._searchLayers=a;b.empty(this.layerListNode);for(c=0;c<a.length;c++)a[c].geometryType&&(d=k.getTypeByGeometryType(a[c].geometryType),"point"===d?e="point_layer.png":"polygon"===d?e="polygon_layer.png":"polyline"===d&&(e="line_layer.png"),d=b.create("div",{"class":"esriCTLayerList"},this.layerListNode),e&&b.create("div",{"class":"esriCTGeometryTypeIcon",style:{backgroundImage:"url("+
this.folderUrl+"images/"+e+")"}},d),b.create("div",{"class":"esriCTLayerListItem",innerHTML:a[c].title,title:a[c].title},d))},_setBufferInfo:function(a){a&&this.bufferVisibiliyCheckBox.setValue(a.isVisible);this._onVisibilityChange()},_onVisibilityChange:function(){this.bufferVisibiliyCheckBox.getValue()?A.remove(this.bufferColorSetting,"esriCTHidden"):A.add(this.bufferColorSetting,"esriCTHidden")}})});