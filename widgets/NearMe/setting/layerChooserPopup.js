// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"url:widgets/NearMe/setting/layerChooserPopup.html":'\x3cdiv data-dojo-attach-point\x3d"layerSelectorContainer" style\x3d"width: 100%; height: 100%;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"layerSelectorNode" class\x3d"esriCTLayerSelectorNode"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonsDiv" class\x3d"buttonsDiv"\x3e\r\n        \x3cdiv class\x3d"button-container button-container-absolute" style\x3d"padding: 0px;"\x3e\r\n            \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"cancelButton"\x3e\r\n                ${nls.cancel}\x3c/div\x3e\r\n            \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1 jimu-state-disabled"\r\n                data-dojo-attach-point\x3d"okButton"\x3e\r\n                ${nls.ok}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n'}});
define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/dom-class dojo/on dojo/text!./layerChooserPopup.html jimu/dijit/LayerChooserFromMap jimu/dijit/Popup".split(" "),function(h,k,l,e,f,g,m,d,n){return h([k,l],{baseClass:"jimu-widget-nearme-setting",templateString:m,_layerChooserFromMap:null,popup:null,searchLayers:[],startup:function(){this.inherited(arguments)},postCreate:function(){this._createLayerSelectorPopup();this._initLayerSelector();this.own(g(this.cancelButton,
"click",e.hitch(this,function(){this.onCancelClick()})));this.own(g(this.okButton,"click",e.hitch(this,function(){f.contains(this.okButton,"jimu-state-disabled")||(this._getSelectedSearchLayers(),this.onOkClick())})))},_initLayerSelector:function(){var a={multiple:!0,createMapResponse:this.map.webMapResponse,showLayerTypes:["FeatureLayer"],filter:this._createFiltersForLayerSelector()};this._layerChooserFromMap=new d(a);this._layerChooserFromMap.placeAt(this.layerSelectorNode);this._layerChooserFromMap.startup();
this._layerChooserFromMap._onTreeClick=e.hitch(this,function(){this._layerChooserFromMap.getSelectedItems().length?f.remove(this.okButton,"jimu-state-disabled"):f.add(this.okButton,"jimu-state-disabled")})},_createFiltersForLayerSelector:function(){var a,b;a=d.createFeaturelayerFilter(["point","polyline","polygon"],!1,!1);b=d.createImageServiceLayerFilter(!0);return d.orCombineFilters([a,b])},_createLayerSelectorPopup:function(){this.popup=new n({titleLabel:this.nls.layerSelector.selectLayerLabel,
width:640,height:200,content:this.layerSelectorContainer})},_getSelectedSearchLayers:function(){var a,b,d,c;this.searchLayers=[];b=this._layerChooserFromMap.getSelectedItems();if(0<b.length)for(a=0;a<b.length;a++)c={url:b[a].layerInfo.layerObject.url,geometryType:b[a].layerInfo.layerObject.geometryType,id:b[a].layerInfo.id},c.layerId=b[a].layerId?b[a].layerId:c.url.substr(c.url.lastIndexOf("/")+1,c.url.length),d=c.url.substr(0,c.url.lastIndexOf("/")+1),c.baseURL=d,this.searchLayers.push(c)},onOkClick:function(a){return a},
onCancelClick:function(a){return a}})});