// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"jimu/dijit/_QueryableLayerSourcePopup":function(){define("dojo/_base/declare dojo/Evented dojo/on dojo/_base/lang dojo/_base/html jimu/dijit/Popup jimu/dijit/QueryableLayerSource jimu/dijit/LoadingIndicator esri/request".split(" "),function(l,n,q,p,h,d,g,e,c){return l([d,n],{width:830,height:560,titleLabel:"",dijitArgs:null,postCreate:function(){this.inherited(arguments);h.addClass(this.domNode,"jimu-queryable-layer-source-popup");this._initFls();this._initLoading()},getSelectedRadioType:function(){return this.sourceDijit.getSelectedRadioType()},
_initFls:function(){this.sourceDijit=new g(this.dijitArgs);this.sourceDijit.placeAt(this.contentContainerNode);this.sourceDijit.startup();this.own(q(this.sourceDijit,"ok",p.hitch(this,function(e){if(0!==e.length){var f=e[0];if(f.definition)try{f.definition.name=f.name,f.definition.url=f.url,this.emit("ok",f)}catch(d){console.error(d)}else this.loading.show(),c({url:f.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(p.hitch(this,function(c){if(this.domNode){this.loading.hide();
f.definition=c;try{f.definition.name=f.name,f.definition.url=f.url,this.emit("ok",f)}catch(b){console.error(b)}}}),p.hitch(this,function(c){console.error(c);this.domNode&&this.loading.hide()}))}})));this.own(q(this.sourceDijit,"cancel",p.hitch(this,function(){try{this.emit("cancel")}catch(c){console.error(c)}})))},_initLoading:function(){this.loading=new e({hidden:!0});this.loading.placeAt(this.domNode);this.loading.startup()}})})},"jimu/dijit/QueryableLayerSource":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/QueryableLayerSource.html dojo/_base/lang dojo/_base/html dojo/on dojo/Evented jimu/dijit/QueryableLayerChooserFromMap jimu/dijit/QueryableServiceChooserFromPortal jimu/dijit/_QueryableServiceChooserContent jimu/portalUrlUtils".split(" "),
function(l,n,q,p,h,d,g,e,c,m,f,s,t){var b=l([n,q,p,c],{baseClass:"jimu-layer-chooser-with-buttons jimu-queryable-layer-chooser-with-buttons",declaredClass:"jimu.dijit.QueryableLayerChooserWithButtons",templateString:'\x3cdiv\x3e\x3cdiv class\x3d"chooser-container" data-dojo-attach-point\x3d"chooserContainer"\x3e\x3c/div\x3e\x3cdiv class\x3d"footer"\x3e\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel" data-dojo-attach-point\x3d"btnCancel"\x3e${nls.cancel}\x3c/div\x3e\x3cdiv class\x3d"jimu-btn jimu-float-trailing ok jimu-trailing-margin1 jimu-state-disabled" data-dojo-attach-point\x3d"btnOk"\x3e${nls.ok}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
queryableLayerChooserArgs:null,postMixInProperties:function(){this.nls=d.clone(window.jimuNls.common)},postCreate:function(){this.inherited(arguments);this.queryableLayerChooserFromMap=new m(this.queryableLayerChooserArgs);this.queryableLayerChooserFromMap.placeAt(this.chooserContainer);g.setStyle(this.queryableLayerChooserFromMap.domNode,{width:"100%",height:"100%"});this.own(e(this.queryableLayerChooserFromMap,"tree-click",d.hitch(this,function(){0<this.getSelectedItems().length?g.removeClass(this.btnOk,
"jimu-state-disabled"):g.addClass(this.btnOk,"jimu-state-disabled")})));this.own(e(this.btnOk,"click",d.hitch(this,function(){var b=this.getSelectedItems();0<b.length&&this.emit("ok",b)})));this.own(e(this.btnCancel,"click",d.hitch(this,function(){this.emit("cancel")})))},getSelectedItems:function(){return this.queryableLayerChooserFromMap.getSelectedItems()},startup:function(){this.inherited(arguments);this.queryableLayerChooserFromMap.startup()}});return l([n,q,p,c],{templateString:h,baseClass:"jimu-layer-source jimu-queryable-layer-source",
declaredClass:"jimu.dijit.QueryableLayerSource",nls:null,multiple:!1,createMapResponse:null,portalUrl:null,postMixInProperties:function(){this.nls=window.jimuNls.queryableLayerSource;this.portalUrl=t.getStandardPortalUrl(this.portalUrl)},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedRadioType:function(){if(this.mapRadio.checked)return"map";if(this.portalRadio.checked)return"portal";if(this.urlRadio.checked)return"url"},getSelectedItems:function(){var b=[];this.mapRadio.checked?
b=this.queryableLayerChooserFromMap.getSelectedItems():this.portalRadio.checked?b=this.queryableServiceChooserFromPortal.getSelectedItems():this.urlRadio.checked&&(b=this.queryableServiceChooserContent.getSelectedItems());return b},startup:function(){this.inherited(arguments);this.queryableLayerChooserFromMap.startup();this.queryableServiceChooserFromPortal.startup();this.queryableServiceChooserContent.startup()},_initSelf:function(){this._initRadios();this._createQueryableLayerChooserWithButtons();
this._createQueryableServiceChooserFromPortal();this._createQueryableServiceChooserContent();this._onRadioClicked()},_createQueryableLayerChooserWithButtons:function(){this.queryableLayerChooserFromMap=new b({style:{width:"100%",height:"100%"},queryableLayerChooserArgs:{multiple:this.multiple,createMapResponse:this.createMapResponse}});this.queryableLayerChooserFromMap.operationTip=this.nls.selectLayer;this.queryableLayerChooserFromMap.placeAt(this.mapDijitContainer);this.own(e(this.queryableLayerChooserFromMap,
"ok",d.hitch(this,function(b){b&&0<b.length&&this.emit("ok",b)})));this.own(e(this.queryableLayerChooserFromMap,"cancel",d.hitch(this,function(){this.emit("cancel")})))},_createQueryableServiceChooserFromPortal:function(){this.queryableServiceChooserFromPortal=new f({multiple:this.multiple,portalUrl:this.portalUrl,style:{width:"100%",height:"100%"}});this.queryableServiceChooserFromPortal.operationTip=this.nls.chooseItem;this.queryableServiceChooserFromPortal.placeAt(this.portalDijitContainer);this.own(e(this.queryableServiceChooserFromPortal,
"next",d.hitch(this,function(){this.queryableServiceChooserFromPortal.operationTip=this.nls.chooseItem+" -\x3e "+this.nls.chooseLayer;this._updateOperationTip()})));this.own(e(this.queryableServiceChooserFromPortal,"back",d.hitch(this,function(){this.queryableServiceChooserFromPortal.operationTip=this.nls.chooseItem;this._updateOperationTip()})));this.own(e(this.queryableServiceChooserFromPortal,"ok",d.hitch(this,function(b){b&&0<b.length&&this.emit("ok",b)})));this.own(e(this.queryableServiceChooserFromPortal,
"cancel",d.hitch(this,function(){this.emit("cancel")})));0<=(this.portalUrl||"").toLowerCase().indexOf(".arcgis.com")?this.portalLabel.innerHTML=this.nls.selectFromOnline:this.portalLabel.innerHTML=this.nls.selectFromPortal},_createQueryableServiceChooserContent:function(){this.queryableServiceChooserContent=new s({multiple:this.multiple,style:{width:"100%",height:"100%"}});this.queryableServiceChooserContent.operationTip=this.nls.setServiceUrl;this.queryableServiceChooserContent.placeAt(this.urlDijitContainer);
this.own(e(this.queryableServiceChooserContent,"ok",d.hitch(this,function(b){b&&0<b.length&&this.emit("ok",b)})));this.own(e(this.queryableServiceChooserContent,"cancel",d.hitch(this,function(){this.emit("cancel")})))},_initRadios:function(){var b="queryableLayerSourceRadios_"+this._getRandomString();this.mapRadio.name=b;g.setAttr(this.mapRadio,"id","mapRadio_"+this._getRandomString());g.setAttr(this.mapLabel,"for",this.mapRadio.id);this.portalRadio.name=b;g.setAttr(this.portalRadio,"id","portalRadio_"+
this._getRandomString());g.setAttr(this.portalLabel,"for",this.portalRadio.id);this.urlRadio.name=b;g.setAttr(this.urlRadio,"id","urlRadio_"+this._getRandomString());g.setAttr(this.urlLabel,"for",this.urlRadio.id)},_getRandomString:function(){var b=Math.random().toString();return b=b.slice(2,b.length)},_onRadioClicked:function(){g.setStyle(this.mapDijitContainer,"display","none");g.setStyle(this.portalDijitContainer,"display","none");g.setStyle(this.urlDijitContainer,"display","none");this.mapRadio.checked?
(g.setStyle(this.mapDijitContainer,"display","block"),this.operationTip.innerHTML=this.nls.selectLayer):this.portalRadio.checked?(g.setStyle(this.portalDijitContainer,"display","block"),this.operationTip.innerHTML=this.nls.chooseItem):this.urlRadio.checked&&(g.setStyle(this.urlDijitContainer,"display","block"),this.operationTip.innerHTML=this.nls.setServiceUrl);this._updateOperationTip()},_updateOperationTip:function(){this.mapRadio.checked?this.operationTip.innerHTML=this.queryableLayerChooserFromMap.operationTip:
this.portalRadio.checked?this.operationTip.innerHTML=this.queryableServiceChooserFromPortal.operationTip:this.urlRadio.checked&&(this.operationTip.innerHTML=this.queryableServiceChooserContent.operationTip)}})})},"jimu/dijit/QueryableLayerChooserFromMap":function(){define(["dojo/_base/declare","./LayerChooserFromMap","dojo/_base/html"],function(l,n,q){return l([n],{baseClass:"jimu-queryable-layer-chooser-from-map",declaredClass:"jimu.dijit.QueryableLayerChooserFromMap",postMixInProperties:function(){this.inherited(arguments);
this.filter=n.createQueryableLayerFilter()},postCreate:function(){this.inherited(arguments);q.addClass(this.domNode,"jimu-basic-layer-chooser-from-map")},getHandledItem:function(l){var h=this.inherited(arguments),d=l&&l.layerInfo,d=d&&d.layerObject;h.url=d&&d.url||"";return h}})})},"jimu/dijit/LayerChooserFromMap":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/on dojo/store/Memory dojo/Deferred dojo/store/Observable dijit/tree/ObjectStoreModel dojo/promise/all dojo/_base/lang dojo/_base/html dojo/_base/array jimu/utils jimu/dijit/_Tree jimu/LayerInfos/LayerInfos jimu/dijit/LoadingIndicator".split(" "),
function(l,n,q,p,h,d,g,e,c,m,f,s,t,b,r,k,a,u){var v=l([n,q,p,h],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"errorTipSection" class\x3d"error-tip-section"\x3e\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\x3cspan class\x3d"jimu-state-error-text" data-dojo-attach-point\x3d"errTip"\x3e${nls.noLayersTip}\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_treeClass:"layer-chooser-tree",createMapResponse:null,multiple:!1,onlyShowVisible:!1,
updateWhenLayerInfosIsShowInMapChanged:!1,postMixInProperties:function(){this.nls=window.jimuNls.basicLayerChooserFromMap},postCreate:function(){this.inherited(arguments);t.addClass(this.domNode,"jimu-basic-layer-chooser-from-map");this.multiple=!!this.multiple;this.shelter=new u({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup();this._createTree();this.basicFilter=s.hitch(this,this.basicFilter);this.filter=v.andCombineFilters([this.basicFilter,this.filter]);this.createMapResponse&&
this.setCreateMapResponse(this.createMapResponse)},basicFilter:function(a){var b=new e;this.onlyShowVisible?b.resolve(a.isShowInMap()):b.resolve(!0);return b},filter:function(a){a=new e;a.resolve(!0);return a},getSelectedItems:function(){var a=this.tree.getSelectedItems();return b.map(a,s.hitch(this,function(a){return this.getHandledItem(a)}))},getAllItems:function(){var a=this.tree.getAllItems(),k=[];b.forEach(a,s.hitch(this,function(a){"root"!==a.id&&(a=this.getHandledItem(a),k.push(a))}));return k},
getHandledItem:function(a){return{name:a.name,layerInfo:a.layerInfo}},_isLeafItem:function(a){return a.isLeaf},setCreateMapResponse:function(b){this.createMapResponse=b;a.getInstance(this.createMapResponse.map,this.createMapResponse.itemInfo).then(s.hitch(this,function(a){this.layerInfosObj=a;this.own(d(this.layerInfosObj,"layerInfosChanged",s.hitch(this,this._onLayerInfosChanged)));this.updateWhenLayerInfosIsShowInMapChanged&&this.own(d(this.layerInfosObj,"layerInfosIsShowInMapChanged",s.hitch(this,
this._onLayerInfosIsShowInMapChanged)));this._buildTree(this.layerInfosObj)}))},_onLayerInfosChanged:function(a,b){this._buildTree(this.layerInfosObj);this.emit("update")},_onLayerInfosIsShowInMapChanged:function(a){this._buildTree(this.layerInfosObj);this.emit("update")},_buildTree:function(a){this._clear();t.setStyle(this.errorTipSection,"display","block");var k=a.getLayerInfoArray(),k=k.concat(a.getTableInfoArray());0!==k.length&&(t.setStyle(this.errorTipSection,"display","none"),b.forEach(k,s.hitch(this,
function(a){this._addDirectLayerInfo(a)})))},_addDirectLayerInfo:function(a){a&&a.getLayerObject().then(s.hitch(this,function(){this._addItem("root",a)}),s.hitch(this,function(a){console.error(a)}))},_clear:function(){var a=this._store.query({parent:"root"});b.forEach(a,s.hitch(this,function(a){a&&"root"!==a.id&&this._store.remove(a.id)}))},_addItem:function(a,k){var c=null,e=k.getLayerType(),d=this.filter(k);f({layerType:e,valid:d}).then(s.hitch(this,function(e){if(e.valid){var d=s.hitch(this,function(b,
f){this._id++;c={name:k.title||"",parent:a,layerInfo:k,type:e.layerType,layerClass:k.layerObject.declaredClass,id:this._id.toString(),isLeaf:b,hasChildren:f};this._store.add(c)}),r=k.getSubLayers(),u=0===r.length;u?d(u,!1):(r=b.map(r,s.hitch(this,function(a){return this.filter(a)})),f(r).then(s.hitch(this,function(a){(a=b.some(a,function(a){return a}))&&d(u,a)})))}}))},_getRootItem:function(){return{id:"root",name:"Map Root",type:"root",isLeaf:!1,hasChildren:!0}},_createTree:function(){var a=this._getRootItem(),
a=new g({data:[a],getChildren:function(a){return this.query({parent:a.id})}});this._store=new c(a);a=new m({store:this._store,query:{id:"root"},mayHaveChildren:s.hitch(this,this._mayHaveChildren)});this.tree=new k({multiple:this.multiple,model:a,showRoot:!1,isLeafItem:s.hitch(this,this._isLeafItem),style:{width:"100%"},onOpen:s.hitch(this,function(a,b){"root"!==a.id&&this._onTreeOpen(a,b)}),onClick:s.hitch(this,function(a,b,k){this._onTreeClick(a,b,k);this.emit("tree-click",a,b,k)}),getIconStyle:s.hitch(this,
function(a,b){var k=null;if(!a||"root"===a.id)return null;var c={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},f=window.location.protocol+"//"+window.location.host+require.toUrl("jimu"),e=this._getIconImageName(a,b);e&&(c.backgroundImage="url("+f+"/css/images/"+e+")",k=c);return k})});t.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.shelter.domNode,"before")},_mayHaveChildren:function(a){return a.hasChildren},_getIconImageName:function(a,
b){var k="";if("ArcGISDynamicMapServiceLayer"===a.type||"ArcGISTiledMapServiceLayer"===a.type)k=b?"mapserver_open.png":"mapserver_close.png";else if("GroupLayer"===a.type)k=b?"group_layer2.png":"group_layer1.png";else if("FeatureLayer"===a.type){var c=r.getTypeByGeometryType(a.layerInfo.layerObject.geometryType);"point"===c?k="point_layer1.png":"polyline"===c?k="line_layer1.png":"polygon"===c&&(k="polygon_layer1.png")}else k="Table"===a.type?"table.png":"ArcGISImageServiceLayer"===a.type||"ArcGISImageServiceVectorLayer"===
a.type?"image_layer.png":b?"mapserver_open.png":"mapserver_close.png";return k},_onTreeOpen:function(a,k){if("root"!==a.id){var c=[],e=[],c=a.layerInfo.getSubLayers();a.checked||(this.shelter.show(),e=b.map(c,s.hitch(this,function(a){return a.getLayerObject()})),f(e).then(s.hitch(this,function(){this.domNode&&(b.forEach(c,s.hitch(this,function(b){this._addItem(a.id,b)})),a.checked=!0,this.shelter.hide())}),s.hitch(this,function(a){console.error(a);this.shelter.hide()})))}},_onTreeClick:function(a,
b,k){},destroy:function(){this.shelter&&this.shelter.destroy();this.tree&&this.tree.destroy();this.shelter=null;this.tree.destroy();this.inherited(arguments)}});v.createFilterByLayerType=function(a){s.isArrayLike(a)||(a=[]);return function(b){var k=new e;if(0===a.length)k.resolve(!0);else{var c=[];b.traversal(function(a){c.push(a.getLayerType())});f(c).then(function(b){for(var c=0;c<b.length;c++)for(var f=0;f<a.length;f++)if(b[c]===a[f]){k.resolve(!0);return}k.resolve(!1)},function(a){console.error(a);
k.reject(a)})}return k}};v.createFeaturelayerFilter=function(a,k,c){var d=["point","polyline","polygon"];a&&0<a.length?(a=b.filter(a,function(a){return 0<=d.indexOf(a)}),0===a.length&&(a=d)):a=d;return function(d){var u=new e,g=d.getLayerType();d=d.getLayerObject();f({layerType:g,layerObject:d}).then(function(f){var e=f.layerType;f=f.layerObject;"ArcGISDynamicMapServiceLayer"===e?u.resolve(!0):"ArcGISTiledMapServiceLayer"===e?u.resolve(!0):"GroupLayer"===e?u.resolve(!0):"FeatureCollection"===e?u.resolve(!0):
"FeatureLayer"===e?(e=r.getTypeByGeometryType(f.geometryType),e=0<=b.indexOf(a,e),f.url?(f=r.isFeaturelayerUrlSupportQuery(f.url,f.capabilities),u.resolve(e&&f)):u.resolve(k&&e)):"Table"===e?(f=r.isFeaturelayerUrlSupportQuery(f.url,f.capabilities),u.resolve(c&&f)):u.resolve(!1)},function(a){console.log(a);u.reject(a)});return u}};v.createImageServiceLayerFilter=function(a){return function(b){var k=new e,c=b.getLayerType();b=b.getLayerObject();f({layerType:c,layerObject:b}).then(function(b){var c=
b.layerType;"ArcGISImageServiceLayer"===c||"ArcGISImageServiceVectorLayer"===c?a?r.isImageServiceSupportQuery(b.layerObject.capabilities)?k.resolve(!0):k.resolve(!1):k.resolve(!0):k.resolve(!1)},function(a){console.log(a);k.reject(a)});return k}};v.createQueryableLayerFilter=function(){var a=v.createFeaturelayerFilter(["point","polyline","polygon"],!1,!0),b=v.createImageServiceLayerFilter(!0);return v.orCombineFilters([a,b])};v.andCombineFilters=function(a){return v._combineFilters(a,!0)};v.orCombineFilters=
function(a){return v._combineFilters(a,!1)};v._combineFilters=function(a,k){return function(c){var d=new e,u=b.map(a,function(a){return a(c)});f(u).then(function(a){var c=!1,c=k?b.every(a,function(a){return a}):b.some(a,function(a){return a});d.resolve(c)},function(a){console.error(a);d.reject(a)});return d}};return v})},"dojo/store/Observable":function(){define(["../_base/kernel","../_base/lang","../when","../_base/array"],function(l,n,q,p){l=function(h){function d(c,e){var d=h[c];d&&(h[c]=function(b){var r;
"put"===c&&(r=h.getIdentity(b));if(m)return d.apply(this,arguments);m=!0;try{var k=d.apply(this,arguments);q(k,function(a){e("object"==typeof a&&a||b,r)});return k}finally{m=!1}})}var g=[],e=0;h=n.delegate(h);h.notify=function(c,d){e++;for(var m=g.slice(),b=0,r=m.length;b<r;b++)m[b](c,d)};var c=h.query;h.query=function(f,d){d=d||{};var m=c.apply(this,arguments);if(m&&m.forEach){var b=n.mixin({},d);delete b.start;delete b.count;var r=h.queryEngine&&h.queryEngine(f,b),k=e,a=[],u;m.observe=function(b,
c){1==a.push(b)&&g.push(u=function(b,f){q(m,function(u){var g=u.length!=d.count,m,v;if(++k!=e)throw Error("Query is out of date, you must observe() the query prior to any data modifications");var t,l=-1,n=-1;if(void 0!==f){var x=[].concat(u);r&&!b&&(x=r(u));m=0;for(v=u.length;m<v;m++){var q=u[m];if(h.getIdentity(q)==f&&!(0>x.indexOf(q))){t=q;l=m;(r||!b)&&u.splice(m,1);break}}}if(r){if(b&&(r.matches?r.matches(b):r([b]).length))m=-1<l?l:u.length,u.splice(m,0,b),n=p.indexOf(r(u),b),u.splice(m,1),d.start&&
0==n||!g&&n==u.length?n=-1:u.splice(n,0,b)}else b&&(void 0!==f?n=l:d.start||(n=h.defaultIndex||0,u.splice(n,0,b)));if((-1<l||-1<n)&&(c||!r||l!=n)){g=a.slice();for(m=0;u=g[m];m++)u(b||t,l,n)}})});var f={};f.remove=f.cancel=function(){var k=p.indexOf(a,b);-1<k&&(a.splice(k,1),a.length||g.splice(p.indexOf(g,u),1))};return f}}return m};var m;d("put",function(c,e){h.notify(c,e)});d("add",function(c){h.notify(c)});d("remove",function(c){h.notify(void 0,c)});return h};n.setObject("dojo.store.Observable",
l);return l})},"dijit/tree/ObjectStoreModel":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/when ../Destroyable".split(" "),function(l,n,q,p,h,d,g){return q("dijit.tree.ObjectStoreModel",g,{store:null,labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(e){h.mixin(this,e);this.childrenCache={}},getRoot:function(e,c){if(this.root)e(this.root);else{var g=this.store.query(this.query);g.then&&this.own(g);d(g,h.hitch(this,function(c){if(1!=
c.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+c.length+" items, but must return exactly one");this.root=c[0];e(this.root);g.observe&&g.observe(h.hitch(this,function(c){this.onChange(c)}),!0)}),c)}},mayHaveChildren:function(){return!0},getChildren:function(e,c,g){var f=this.store.getIdentity(e);if(this.childrenCache[f])d(this.childrenCache[f],c,g);else{var s=this.childrenCache[f]=this.store.getChildren(e);s.then&&this.own(s);s.observe&&this.own(s.observe(h.hitch(this,function(c,
b,f){this.onChange(c);b!=f&&d(s,h.hitch(this,"onChildrenChange",e))}),!0));d(s,c,g)}},isItem:function(){return!0},getIdentity:function(e){return this.store.getIdentity(e)},getLabel:function(e){return e[this.labelAttr]},newItem:function(e,c,d,f){return this.store.put(e,{parent:c,before:f})},pasteItem:function(e,c,d,f,g,t){var b=new p;if(c===d&&!f&&!t)return b.resolve(!0),b;c&&!f?this.getChildren(c,h.hitch(this,function(f){f=[].concat(f);var k=l.indexOf(f,e);f.splice(k,1);this.onChildrenChange(c,f);
b.resolve(this.store.put(e,{overwrite:!0,parent:d,oldParent:c,before:t}))})):b.resolve(this.store.put(e,{overwrite:!0,parent:d,oldParent:c,before:t}));return b},onChange:function(){},onChildrenChange:function(){},onDelete:function(){}})})},"jimu/dijit/_Tree":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_TreeNode.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/event dojo/query dojo/aspect dojo/on dojo/Evented dijit/registry dijit/Tree jimu/utils".split(" "),
function(l,n,q,p,h,d,g,e,c,m,f,s,t,b,r){var k=l([b._TreeNode,s],{templateString:p,declaredClass:"jimu._TreeNode",isLeaf:!1,groupId:"",postCreate:function(){this.inherited(arguments);d.addClass(this.domNode,"jimu-tree-node");this.isLeaf=!!this.isLeaf;this.groupId?(this.checkNode=d.toDom('\x3cinput type\x3d"radio" /\x3e'),this.checkNode.name=this.groupId):this.checkNode=d.toDom('\x3cinput type\x3d"checkbox" /\x3e');d.addClass(this.checkNode,"jimu-tree-check-node");d.place(this.checkNode,this.contentNode,
"first");this.own(f(this.checkNode,"click",h.hitch(this,this._onClick)));this.isLeaf?this.groupId?d.setStyle(this.checkNode,"display","none"):d.setStyle(this.checkNode,"display","inline"):d.setStyle(this.checkNode,"display","none");this.isLeaf?d.addClass(this.domNode,"jimu-tree-leaf-node"):d.addClass(this.domNode,"jimu-tree-not-leaf-node")},select:function(){this.isLeaf&&(this.checkNode.checked=!0,d.addClass(this.domNode,"jimu-tree-selected-leaf-node"))},unselect:function(){this.isLeaf&&(this.checkNode.checked=
!1,d.removeClass(this.domNode,"jimu-tree-selected-leaf-node"))},toggleSelect:function(){this.isLeaf&&(this.checkNode.checked?this.unselect():this.select())},_onClick:function(a){(a.target||a.srcElement)===this.checkNode?this.tree._onCheckNodeClick(this,this.checkNode.checked,a):this.tree._onClick(this,a)},_onChange:function(){this.isLeaf&&setTimeout(h.hitch(this,function(){this.checkNode.checked?this.emit("tn-select",this):this.emit("tn-unselect",this)}),100)},destroy:function(){delete this.tree;
this.inherited(arguments)}});return l([b,s],{declaredClass:"jimu._Tree",openOnClick:!0,multiple:!0,uniqueId:"",showRoot:!1,postMixInProperties:function(){this.inherited(arguments);this.uniqueId="tree_"+r.getRandomString()},postCreate:function(){this.inherited(arguments);d.addClass(this.domNode,"jimu-tree");this.own(m.before(this,"onClick",h.hitch(this,this._jimuBeforeClick)));this.rootLoadingIndicator&&d.setStyle(this.rootLoadingIndicator,"display","none");this.dndController.singular=!0},removeItem:function(a){this.model.store.remove(a)},
getAllItems:function(){var a=this.getAllTreeNodeWidgets();return g.map(a,h.hitch(this,function(a){var b=a.item;b.selected=a.checkNode.checked;return b}))},getSelectedItems:function(){var a=this.getAllTreeNodeWidgets(),a=g.filter(a,h.hitch(this,function(a){return a.checkNode.checked}));return g.map(a,h.hitch(this,function(a){return a.item}))},getFilteredItems:function(a){var b=this.getAllTreeNodeWidgets(),b=g.map(b,h.hitch(this,function(a){var b=a.item;b.selected=a.checkNode.checked;return b}));return g.filter(b,
h.hitch(this,function(b){return a(b)}))},getTreeNodeByItemId:function(a){for(var b=this._getAllTreeNodeDoms(),c=0;c<b.length;c++){var k=t.byNode(b[c]);if(k.item.id.toString()===a.toString())return k}return null},selectItem:function(a){(a=this.getTreeNodeByItemId(a))&&a.isLeaf&&this.selectNodeWidget(a)},unselectItem:function(a){(a=this.getTreeNodeByItemId(a))&&a.isLeaf&&a.unselect()},getAllLeafTreeNodeWidgets:function(){var a=this.getAllTreeNodeWidgets();return g.filter(a,h.hitch(this,function(a){return a.isLeaf}))},
getAllTreeNodeWidgets:function(){var a=this._getAllTreeNodeDoms();return g.map(a,h.hitch(this,function(a){return t.byNode(a)}))},isLeafItem:function(a){return a&&a.isLeaf},_getAllTreeNodeDoms:function(){return c(".dijitTreeNode",this.domNode)},_createTreeNode:function(a){a.isLeaf=this.isLeafItem(a.item);this.multiple||(a.groupId=this.uniqueId);return new k(a)},_onTreeNodeSelect:function(a){this.emit("item-select",{item:a.item,treeNode:a})},_onTreeNodeUnselect:function(a){this.emit("item-unselect",
{item:a.item,treeNode:a})},selectNodeWidget:function(a){this.multiple||this.unselectAllLeafNodeWidgets();a.select()},_jimuBeforeClick:function(a,b,c){b.isLeaf&&(d.hasClass(c.target||c.srcElement,"jimu-tree-check-node")||(this.multiple?b.toggleSelect():this.selectNodeWidget(b)));return arguments},_onCheckNodeClick:function(a,b,c){!this.multiple&&b&&this.unselectAllLeafNodeWidgets();e.stop(c);this.focusNode(a);setTimeout(h.hitch(this,function(){b?this.selectNodeWidget(a):a.unselect();this.onClick(a.item,
a,c)}),0)},unselectAllLeafNodeWidgets:function(){var a=this.getAllLeafTreeNodeWidgets();g.forEach(a,h.hitch(this,function(a){a.unselect()}))}})})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(l,n,q,p,h,d,g,e,c,m,f,s,t,b,r,k,a,u,v,B,x,A,y,D,E,G,H,J,F,I,K,L,O,M,N){function w(a){return k.delegate(a.promise||a,{addCallback:function(a){this.then(a)},addErrback:function(a){this.otherwise(a)}})}var C=p("dijit._TreeNode",[E,G,H,J,F],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(a){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=a;this._set("label",a);t("dojo-bidi")&&this.applyTextDir(this.labelNode)},labelType:"text",
isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:K,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(a){var b=Math.max(a,0)*this.tree._nodePixelIndent+"px";m.set(this.domNode,
"backgroundPosition",b+" 0px");m.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",b);l.forEach(this.getChildren(),function(b){b.set("indent",a+1)});this._set("indent",a)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(a){var b=this.tree,c=b.model;b._v10Compat&&a===c.root&&(a=null);this._applyClassAndStyle(a,"icon","Icon");this._applyClassAndStyle(a,"label","Label");this._applyClassAndStyle(a,
"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(a,b,c){var k="_"+b+"Class";b+="Node";var f=this[k];this[k]=this.tree["get"+c+"Class"](a,this.isExpanded);e.replace(this[b],this[k]||"",f||"");m.set(this[b],this.tree["get"+c+"Style"](a,this.isExpanded)||{})},_updateLayout:function(){var a=this.getParent(),a=!a||!a.rowNode||"none"==a.rowNode.style.display;e.toggle(this.domNode,"dijitTreeIsRoot",a);e.toggle(this.domNode,"dijitTreeIsLast",!a&&!this.getNextSibling())},_setExpando:function(a){var b=
["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];a=a?0:this.isExpandable?this.isExpanded?1:2:3;e.replace(this.expandoNode,b[a],b);this.expandoNodeText.innerHTML=["*","-","+","*"][a]},expand:function(){if(this._expandDeferred)return w(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&
this.containerNode.setAttribute("role","group");e.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var a=s.wipeIn({node:this.containerNode,duration:D.defaultDuration}),b=this._expandDeferred=new h(function(){a.stop()});n.after(a,"onEnd",function(){b.resolve(!0)},!0);a.play();return w(b)},collapse:function(){if(this._collapseDeferred)return w(this._collapseDeferred);
this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");e.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var a=s.wipeOut({node:this.containerNode,duration:D.defaultDuration}),b=this._collapseDeferred=new h(function(){a.stop()});n.after(a,"onEnd",
function(){b.resolve(!0)},!0);a.play();return w(b)},indent:0,setChildItems:function(a){var b=this.tree,c=b.model,k=[],f=b.focusedChild,e=this.getChildren();l.forEach(e,function(a){H.prototype.removeChild.call(this,a)},this);this.defer(function(){l.forEach(e,function(a){if(!a._destroyed&&!a.getParent()){b.dndController.removeTreeNode(a);var k=function(a){var f=c.getIdentity(a.item),d=b._itemNodesMap[f];1==d.length?delete b._itemNodesMap[f]:(f=l.indexOf(d,a),-1!=f&&d.splice(f,1));l.forEach(a.getChildren(),
k)};k(a);if(b.persist){var e=l.map(a.getTreePath(),function(a){return b.model.getIdentity(a)}).join("/"),d;for(d in b._openedNodes)d.substr(0,e.length)==e&&delete b._openedNodes[d];b._saveExpandedNodes()}b.lastFocusedChild&&!g.isDescendant(b.lastFocusedChild,b.domNode)&&delete b.lastFocusedChild;f&&!g.isDescendant(f,b.domNode)&&b.focus();a.destroyRecursive()}})});this.state="Loaded";a&&0<a.length?(this.isExpandable=!0,l.forEach(a,function(a){var f=c.getIdentity(a),d=b._itemNodesMap[f],e;if(d)for(var g=
0;g<d.length;g++)if(d[g]&&!d[g].getParent()){e=d[g];e.set("indent",this.indent+1);break}e||(e=this.tree._createTreeNode({item:a,tree:b,isExpandable:c.mayHaveChildren(a),label:b.getLabel(a),labelType:b.model&&b.model.labelType||"text",tooltip:b.getTooltip(a),ownerDocument:b.ownerDocument,dir:b.dir,lang:b.lang,textDir:b.textDir,indent:this.indent+1}),d?d.push(e):b._itemNodesMap[f]=[e]);this.addChild(e);(this.tree.autoExpand||this.tree._state(e))&&k.push(b._expandNode(e))},this),l.forEach(this.getChildren(),
function(a){a._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);a=d(k);this.tree._startPaint(a);return w(a)},getTreePath:function(){for(var a=this,b=[];a&&a!==this.tree.rootNode;)b.unshift(a.item),a=a.getParent();b.unshift(this.tree.rootNode.item);return b},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(a){this.inherited(arguments);var b=this.getChildren();0==b.length&&(this.isExpandable=!1,
this.collapse());l.forEach(b,function(a){a._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(a){this.labelNode.setAttribute("aria-selected",a?"true":"false");e.toggle(this.rowNode,"dijitTreeRowSelected",a)},focus:function(){A.focus(this.focusNode)}});t("dojo-bidi")&&C.extend({_setTextDirAttr:function(a){if(a&&(this.textDir!=a||!this._created))this._set("textDir",a),this.applyTextDir(this.labelNode),l.forEach(this.getChildren(),function(b){b.set("textDir",
a)},this)}});var z=p("dijit.Tree",[E,I,G,F],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:L,persist:!1,autoExpand:!1,dndController:N,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,
dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(a,b){u.publish(this.id,k.mixin({tree:this,event:a},b||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new h;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var b=this;this.own(a(this.containerNode,
a.selector(".dijitTreeNode",v.enter),function(a){b._onNodeMouseEnter(y.byNode(this),a)}),a(this.containerNode,a.selector(".dijitTreeNode",v.leave),function(a){b._onNodeMouseLeave(y.byNode(this),a)}),a(this.containerNode,a.selector(".dijitTreeRow",x.press),function(a){b._onNodePress(y.getEnclosingWidget(this),a)}),a(this.containerNode,a.selector(".dijitTreeRow",x),function(a){b._onClick(y.getEnclosingWidget(this),a)}),a(this.containerNode,a.selector(".dijitTreeRow","dblclick"),function(a){b._onDblClick(y.getEnclosingWidget(this),
a)}));this.model||this._store2model();this.own(n.after(this.model,"onChange",k.hitch(this,"_onItemChange"),!0),n.after(this.model,"onChildrenChange",k.hitch(this,"_onItemChildrenChange"),!0),n.after(this.model,"onDelete",k.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){k.isString(this.dndController)&&(this.dndController=k.getObject(this.dndController));for(var c={},d=0;d<this.dndParams.length;d++)this[this.dndParams[d]]&&(c[this.dndParams[d]]=this[this.dndParams[d]]);
this.dndController=new this.dndController(this,c)}this._load();this.onLoadDeferred=w(this.pendingCommandsPromise);this.onLoadDeferred.then(k.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;b.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var a={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(a.mayHaveChildren=k.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&
(a.getChildren=k.hitch(this,function(a,b,c){this.getItemChildren(this._v10Compat&&a===this.model.root?null:a,b,c)}));this.model=new M(a);this.showRoot=Boolean(this.label)},onLoad:function(){},_load:function(){this.model.getRoot(k.hitch(this,function(a){var b=this.rootNode=this.tree._createTreeNode({item:a,tree:this,isExpandable:!0,label:this.label||this.getLabel(a),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",
!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(b.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(b.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(b.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),
b.labelNode.setAttribute("role","presentation"),b.labelNode.removeAttribute("aria-selected"),b.containerNode.setAttribute("role","tree"),b.containerNode.setAttribute("aria-expanded","true"),b.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(b.domNode);a=this.model.getIdentity(a);this._itemNodesMap[a]?this._itemNodesMap[a].push(b):this._itemNodesMap[a]=[b];b._updateLayout();this._expandNode(b).then(k.hitch(this,function(){this._destroyed||
(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),k.hitch(this,function(a){console.error(this,": error loading root: ",a)}))},getNodesByItem:function(a){if(!a)return[];a=k.isString(a)?a:this.model.getIdentity(a);return[].concat(this._itemNodesMap[a])},_setSelectedItemAttr:function(a){this.set("selectedItems",[a])},_setSelectedItemsAttr:function(a){var b=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(k.hitch(this,function(){var c=
l.map(a,function(a){return!a||k.isString(a)?a:b.model.getIdentity(a)}),d=[];l.forEach(c,function(a){d=d.concat(b._itemNodesMap[a]||[])});this.set("selectedNodes",d)}))},_setPathAttr:function(a){return a.length?w(this.set("paths",[a]).then(function(a){return a[0]})):w(this.set("paths",[]).then(function(a){return a[0]}))},_setPathsAttr:function(a){function b(a,k){var d=a.shift(),f=l.filter(k,function(a){return a.getIdentity()==d})[0];if(f)return a.length?c._expandNode(f).then(function(){return b(a,
f.getChildren())}):f;throw new z.PathError("Could not expand path at "+d);}var c=this;return w(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return d(l.map(a,function(a){a=l.map(a,function(a){return a&&k.isObject(a)?c.model.getIdentity(a):a});if(a.length)return b(a,[c.rootNode]);throw new z.PathError("Empty path");}))}).then(function(a){c.set("selectedNodes",a);return c.paths}))},_setSelectedNodeAttr:function(a){this.set("selectedNodes",[a])},_setSelectedNodesAttr:function(a){this.dndController.setSelection(a)},
expandAll:function(){function a(c){return b._expandNode(c).then(function(){var b=l.filter(c.getChildren()||[],function(a){return a.isExpandable});return d(l.map(b,a))})}var b=this;return w(a(this.rootNode))},collapseAll:function(){function a(c){var k=l.filter(c.getChildren()||[],function(a){return a.isExpandable}),k=d(l.map(k,a));return!c.isExpanded||c==b.rootNode&&!b.showRoot?k:k.then(function(){return b._collapseNode(c)})}var b=this;return w(a(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},
getLabel:function(a){return this.model.getLabel(a)},getIconClass:function(a,b){return!a||this.model.mayHaveChildren(a)?b?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(a,b){var c=this._getNext(b);c&&c.isTreeNode&&this.focusNode(c)},_onUpArrow:function(a,b){var c=b.getPreviousSibling();if(c)for(b=c;b.isExpandable&&
b.isExpanded&&b.hasChildren();)c=b.getChildren(),b=c[c.length-1];else if(c=b.getParent(),this.showRoot||c!==this.rootNode)b=c;b&&b.isTreeNode&&this.focusNode(b)},_onRightArrow:function(a,b){b.isExpandable&&!b.isExpanded?this._expandNode(b):b.hasChildren()&&(b=b.getChildren()[0])&&b.isTreeNode&&this.focusNode(b)},_onLeftArrow:function(a,b){if(b.isExpandable&&b.isExpanded)this._collapseNode(b);else{var c=b.getParent();c&&(c.isTreeNode&&(this.showRoot||c!==this.rootNode))&&this.focusNode(c)}},focusLastChild:function(){var a=
this._getLast();a&&a.isTreeNode&&this.focusNode(a)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var a=this.rootNode;a.isExpanded;){var b=a.getChildren();if(!b.length)break;a=b[b.length-1]}return a},_getNext:function(a){if(a.isExpandable&&a.isExpanded&&a.hasChildren())return a.getChildren()[0];for(;a&&a.isTreeNode;){var b=a.getNextSibling();if(b)return b;a=a.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(a,
b){return g.isDescendant(a,b.expandoNode)||g.isDescendant(a,b.expandoNodeText)},_onNodePress:function(a,b){this.focusNode(a)},__click:function(a,b,c,k){var d=this.isExpandoNode(b.target,a);a.isExpandable&&(c||d)?this._onExpandoClick({node:a}):(this._publish("execute",{item:a.item,node:a,evt:b}),this[k](a.item,a,b),this.focusNode(a));b.stopPropagation();b.preventDefault()},_onClick:function(a,b){this.__click(a,b,this.openOnClick,"onClick")},_onDblClick:function(a,b){this.__click(a,b,this.openOnDblClick,
"onDblClick")},_onExpandoClick:function(a){a=a.node;this.focusNode(a);a.isExpanded?this._collapseNode(a):this._expandNode(a)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(a){b.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(a)},_getRootOrFirstNode:function(){b.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","",
"2.0");return this._getFirst()},_collapseNode:function(a){a._expandNodeDeferred&&delete a._expandNodeDeferred;if("Loading"!=a.state&&a.isExpanded){var b=a.collapse();this.onClose(a.item,a);this._state(a,!1);this._startPaint(b);return b}},_expandNode:function(a){if(a._expandNodeDeferred)return a._expandNodeDeferred;var b=this.model,c=a.item,d=this;a._loadDeferred||(a.markProcessing(),a._loadDeferred=new h,b.getChildren(c,function(b){a.unmarkProcessing();a.setChildItems(b).then(function(){a._loadDeferred.resolve(b)})},
function(b){console.error(d,": error loading "+a.label+" children: ",b);a._loadDeferred.reject(b)}));b=a._loadDeferred.then(k.hitch(this,function(){var b=a.expand();this.onOpen(a.item,a);this._state(a,!0);return b}));this._startPaint(b);return b},focusNode:function(a){var b=this.domNode.scrollLeft;this.focusChild(a);this.domNode.scrollLeft=b},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(a){var b=this.model.getIdentity(a);if(b=this._itemNodesMap[b]){var c=this.getLabel(a),
k=this.getTooltip(a);l.forEach(b,function(b){b.set({item:a,label:c,tooltip:k});b._updateItemClasses(a)})}},_onItemChildrenChange:function(a,b){var c=this.model.getIdentity(a);(c=this._itemNodesMap[c])&&l.forEach(c,function(a){a.setChildItems(b)})},_onItemDelete:function(a){a=this.model.getIdentity(a);var b=this._itemNodesMap[a];b&&(l.forEach(b,function(a){this.dndController.removeTreeNode(a);var b=a.getParent();b&&b.removeChild(a);this.lastFocusedChild&&!g.isDescendant(this.lastFocusedChild,this.domNode)&&
delete this.lastFocusedChild;this.focusedChild&&!g.isDescendant(this.focusedChild,this.domNode)&&this.focus();a.destroyRecursive()},this),delete this._itemNodesMap[a])},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var a=q(this.cookieName);a&&l.forEach(a.split(","),function(a){this._openedNodes[a]=!0},this)}},_state:function(a,b){if(!this.persist)return!1;var c=l.map(a.getTreePath(),function(a){return this.model.getIdentity(a)},this).join("/");if(1===arguments.length)return this._openedNodes[c];
b?this._openedNodes[c]=!0:delete this._openedNodes[c];this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var a=[],b;for(b in this._openedNodes)a.push(b);q(this.cookieName,a.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!k.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},
destroyRecursive:function(){this.destroy()},resize:function(a){a&&c.setMarginBox(this.domNode,a);this._nodePixelIndent=c.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(k.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(a){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var b=k.hitch(this,
function(){this._outstandingPaintOperations--;0>=this._outstandingPaintOperations&&(!this._adjustWidthsTimer&&this._started)&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});B(a,b,b)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(a){return new C(a)},focus:function(){this.lastFocusedChild?
this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});t("dojo-bidi")&&z.extend({_setTextDirAttr:function(a){a&&this.textDir!=a&&(this._set("textDir",a),this.rootNode.set("textDir",a))}});z.PathError=f("TreePathError");z._TreeNode=C;return z})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(l,n,q,p){return q("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",
root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(h){p.mixin(this,h);this.connects=[];h=this.store;if(!h.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");h.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([n.after(h,"onNew",p.hitch(this,"onNewItem"),!0),n.after(h,"onDelete",p.hitch(this,"onDeleteItem"),!0),n.after(h,"onSet",p.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var h;h=
this.connects.pop();)h.remove()},getRoot:function(h,d){this.root?h(this.root):this.store.fetch({query:this.query,onComplete:p.hitch(this,function(d){if(1!=d.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+d.length+" items, but must return exactly one");this.root=d[0];h(this.root)}),onError:d})},mayHaveChildren:function(h){return l.some(this.childrenAttrs,function(d){return this.store.hasAttribute(h,d)},this)},getChildren:function(h,d,g){var e=this.store;if(e.isItemLoaded(h)){for(var c=
[],m=0;m<this.childrenAttrs.length;m++)var f=e.getValues(h,this.childrenAttrs[m]),c=c.concat(f);var s=0;this.deferItemLoadingUntilExpand||l.forEach(c,function(b){e.isItemLoaded(b)||s++});0==s?d(c):l.forEach(c,function(b,f){e.isItemLoaded(b)||e.loadItem({item:b,onItem:function(b){c[f]=b;0==--s&&d(c)},onError:g})})}else{var t=p.hitch(this,arguments.callee);e.loadItem({item:h,onItem:function(b){t(b,d,g)},onError:g})}},isItem:function(h){return this.store.isItem(h)},fetchItemByIdentity:function(h){this.store.fetchItemByIdentity(h)},
getIdentity:function(h){return this.store.getIdentity(h)},getLabel:function(h){return this.labelAttr?this.store.getValue(h,this.labelAttr):this.store.getLabel(h)},newItem:function(h,d,g){var e={parent:d,attribute:this.childrenAttrs[0]},c;this.newItemIdAttr&&h[this.newItemIdAttr]?this.fetchItemByIdentity({identity:h[this.newItemIdAttr],scope:this,onItem:function(m){m?this.pasteItem(m,null,d,!0,g):(c=this.store.newItem(h,e))&&void 0!=g&&this.pasteItem(c,d,d,!1,g)}}):(c=this.store.newItem(h,e))&&void 0!=
g&&this.pasteItem(c,d,d,!1,g)},pasteItem:function(h,d,g,e,c){var m=this.store,f=this.childrenAttrs[0];d&&l.forEach(this.childrenAttrs,function(c){if(m.containsValue(d,c,h)){if(!e){var b=l.filter(m.getValues(d,c),function(b){return b!=h});m.setValues(d,c,b)}f=c}});if(g)if("number"==typeof c){var s=m.getValues(g,f).slice();s.splice(c,0,h);m.setValues(g,f,s)}else m.setValues(g,f,m.getValues(g,f).concat(h))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(h,
d){d&&this.getChildren(d.item,p.hitch(this,function(g){this.onChildrenChange(d.item,g)}))},onDeleteItem:function(h){this.onDelete(h)},onSetItem:function(h,d){if(-1!=l.indexOf(this.childrenAttrs,d))this.getChildren(h,p.hitch(this,function(d){this.onChildrenChange(h,d)}));else this.onChange(h)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(l,n,q,p,h){return n("dijit.tree.ForestStoreModel",
h,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(d){this.root={store:this,root:!0,id:d.rootId,label:d.rootLabel,children:d.rootChildren}},mayHaveChildren:function(d){return d===this.root||this.inherited(arguments)},getChildren:function(d,g,e){d===this.root?this.root.children?g(this.root.children):this.store.fetch({query:this.query,onComplete:p.hitch(this,function(c){this.root.children=c;g(c)}),onError:e}):this.inherited(arguments)},isItem:function(d){return d===this.root?!0:this.inherited(arguments)},
fetchItemByIdentity:function(d){if(d.identity==this.root.id){var g=d.scope||q.global;d.onItem&&d.onItem.call(g,this.root)}else this.inherited(arguments)},getIdentity:function(d){return d===this.root?this.root.id:this.inherited(arguments)},getLabel:function(d){return d===this.root?this.root.label:this.inherited(arguments)},newItem:function(d,g,e){return g===this.root?(this.onNewRootItem(d),this.store.newItem(d)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(d,g,e,c,m){if(g===
this.root&&!c)this.onLeaveRoot(d);this.inherited(arguments,[d,g===this.root?null:g,e===this.root?null:e,c,m]);if(e===this.root)this.onAddToRoot(d)},onAddToRoot:function(d){console.log(this,": item ",d," added to root")},onLeaveRoot:function(d){console.log(this,": item ",d," removed from root")},_requeryTop:function(){var d=this.root.children||[];this.store.fetch({query:this.query,onComplete:p.hitch(this,function(g){this.root.children=g;if(d.length!=g.length||l.some(d,function(d,c){return g[c]!=d}))this.onChildrenChange(this.root,
g)})})},onNewItem:function(d,g){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(d){-1!=l.indexOf(this.root.children,d)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(d,g,e,c){this._requeryTop();this.inherited(arguments)}})})},"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dnd/common dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),function(l,n,q,p,h,d,g,e,
c,m,f){return n("dijit.tree._dndSelector",f,{constructor:function(){this.selection={};this.anchor=null;this.events.push(e(this.tree.domNode,c.press,p.hitch(this,"onMouseDown")),e(this.tree.domNode,c.release,p.hitch(this,"onMouseUp")),e(this.tree.domNode,c.move,p.hitch(this,"onMouseMove")),e(this.tree.domNode,m.press,p.hitch(this,"onClickPress")),e(this.tree.domNode,m.release,p.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var c=[],d=this.selection,b;for(b in d)c.push(d[b]);
return c},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(c,d){this.setSelection(this.getSelectedTreeNodes().concat([c]));d&&(this.anchor=c);return c},removeTreeNode:function(c){var f=l.filter(this.getSelectedTreeNodes(),function(b){return!d.isDescendant(b.domNode,c.domNode)});this.setSelection(f);return c},isTreeNodeSelected:function(c){return c.id&&!!this.selection[c.id]},setSelection:function(c){var d=
this.getSelectedTreeNodes();l.forEach(this._setDifference(d,c),p.hitch(this,function(b){b.setSelected(!1);this.anchor==b&&delete this.anchor;delete this.selection[b.id]}));l.forEach(this._setDifference(c,d),p.hitch(this,function(b){b.setSelected(!0);this.selection[b.id]=b}));this._updateSelectionProperties()},_setDifference:function(c,d){l.forEach(d,function(b){b.__exclude__=!0});var b=l.filter(c,function(b){return!b.__exclude__});l.forEach(d,function(b){delete b.__exclude__});return b},_updateSelectionProperties:function(){var c=
this.getSelectedTreeNodes(),d=[],b=[];l.forEach(c,function(c){var k=c.getTreePath();b.push(c);d.push(k)},this);c=l.map(b,function(b){return b.item});this.tree._set("paths",d);this.tree._set("path",d[0]||[]);this.tree._set("selectedNodes",b);this.tree._set("selectedNode",b[0]||null);this.tree._set("selectedItems",c);this.tree._set("selectedItem",c[0]||null)},onClickPress:function(c){if(!this.current||!this.current.isExpandable||!this.tree.isExpandoNode(c.target,this.current)){"mousedown"==c.type&&
g.isLeft(c)&&c.preventDefault();var d="keydown"==c.type?this.tree.focusedChild:this.current;if(d){var b=h.getCopyKeyState(c),f=d.id;!this.singular&&!c.shiftKey&&this.selection[f]?this._doDeselect=!0:(this._doDeselect=!1,this.userSelect(d,b,c.shiftKey))}}},onClickRelease:function(c){this._doDeselect&&(this._doDeselect=!1,this.userSelect("keyup"==c.type?this.tree.focusedChild:this.current,h.getCopyKeyState(c),c.shiftKey))},onMouseMove:function(){this._doDeselect=!1},onMouseDown:function(){},onMouseUp:function(){},
_compareNodes:function(c,d){if(c===d)return 0;if("sourceIndex"in document.documentElement)return c.sourceIndex-d.sourceIndex;if("compareDocumentPosition"in document.documentElement)return c.compareDocumentPosition(d)&2?1:-1;if(document.createRange){var b=doc.createRange();b.setStartBefore(c);var f=doc.createRange();f.setStartBefore(d);return b.compareBoundaryPoints(b.END_TO_END,f)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");},userSelect:function(c,
d,b){if(this.singular)this.anchor==c&&d?this.selectNone():(this.setSelection([c]),this.anchor=c);else if(b&&this.anchor){d=this._compareNodes(this.anchor.rowNode,c.rowNode);b=this.anchor;0>d?d=b:(d=c,c=b);for(b=[];d!=c;)b.push(d),d=this.tree._getNext(d);b.push(c);this.setSelection(b)}else this.selection[c.id]&&d?this.removeTreeNode(c):d?this.addTreeNode(c,!0):(this.setSelection([c]),this.anchor=c)},getItem:function(c){return{data:this.selection[c],type:["treeNode"]}},forInSelectedItems:function(c,
d){d=d||q.global;for(var b in this.selection)c.call(d,this.getItem(b),b,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(l,n,q,p,h,d){return n("dijit.tree._dndContainer",null,{constructor:function(g,e){this.tree=g;this.node=g.domNode;p.mixin(this,e);this.containerState="";q.add(this.node,"dojoDndContainer");this.events=[h(this.node,d.enter,p.hitch(this,"onOverEvent")),h(this.node,d.leave,
p.hitch(this,"onOutEvent")),l.after(this.tree,"_onNodeMouseEnter",p.hitch(this,"onMouseOver"),!0),l.after(this.tree,"_onNodeMouseLeave",p.hitch(this,"onMouseOut"),!0),h(this.node,"dragstart, selectstart",function(c){c.preventDefault()})]},destroy:function(){for(var d;d=this.events.pop();)d.remove();this.node=this.parent=null},onMouseOver:function(d){this.current=d},onMouseOut:function(){this.current=null},_changeState:function(d,e){var c="dojoDnd"+d,m=d.toLowerCase()+"State";q.replace(this.node,c+
e,c+this[m]);this[m]=e},_addItemClass:function(d,e){q.add(d,"dojoDndItem"+e)},_removeItemClass:function(d,e){q.remove(d,"dojoDndItem"+e)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"jimu/dijit/QueryableServiceChooserFromPortal":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/QueryableServiceChooserFromPortal.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented dojo/promise/all jimu/dijit/ItemSelector jimu/dijit/QueryableServiceBrowser jimu/portalUrlUtils esri/request".split(" "),
function(l,n,q,p,h,d,g,e,c,m,f,s,t,b,r,k,a){return l([n,q,p,s],{templateString:h,declaredClass:"jimu.dijit.QueryableServiceChooserFromPortal",baseClass:"jimu-service-chooser-from-portal jimu-queryable-service-chooser-from-portal",_serviceBrowserDef:null,portalUrl:null,multiple:!1,postMixInProperties:function(){this.nls=d.mixin({},window.jimuNls.common);this.nls=d.mixin(this.nls,window.jimuNls.featureLayerChooserFromPortal);this.portalUrl=k.getStandardPortalUrl(this.portalUrl);this.multiple=!0===this.multiple?
!0:!1},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},_initSelf:function(){this.selector=new b({portalUrl:this.portalUrl,itemTypes:["Feature Service","Map Service","Image Service"],onlyShowOnlineFeaturedItems:!1});this.own(c(this.selector,"item-selected",d.hitch(this,this._onItemSelected)));this.own(c(this.selector,"none-item-selected",d.hitch(this,this._onNoneItemSelected)));this.selector.placeAt(this.selectorContainer);
this.selector.startup();this.serviceBrowser=new r({multiple:this.multiple});this.own(c(this.serviceBrowser,"tree-click",d.hitch(this,this._onServiceBrowserClicked)));this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup()},_onItemSelected:function(){g.removeClass(this.btnNext,"jimu-state-disabled")},_onNoneItemSelected:function(){g.addClass(this.btnNext,"jimu-state-disabled")},_onBtnBackClicked:function(){this._serviceBrowserDef&&!this._serviceBrowserDef.isFulfilled()&&
this._serviceBrowserDef.cancel();g.setStyle(this.btnOk,"display","none");g.setStyle(this.btnNext,"display","block");g.setStyle(this.btnBack,"display","none");g.addClass(this.btnOk,"jimu-state-disabled");g.setStyle(this.selectorContainer,"display","block");g.setStyle(this.serviceBrowserContainer,"display","none");this.serviceBrowser.reset();this.emit("back")},_onBtnOkClicked:function(){var a=this.getSelectedItems();0<a.length&&this.emit("ok",a)},_onBtnNextClicked:function(){var a=this.selector.getSelectedItem();
a&&(g.setStyle(this.btnNext,"display","none"),g.setStyle(this.btnBack,"display","block"),g.setStyle(this.btnOk,"display","block"),g.addClass(this.btnOk,"jimu-state-disabled"),g.setStyle(this.selectorContainer,"display","none"),g.setStyle(this.serviceBrowserContainer,"display","block"),this.serviceBrowser.reset(),this._serviceBrowserDef=this.serviceBrowser.setUrl(a.url||a.item),this._serviceBrowserDef.then(d.hitch(this,function(){this._serviceBrowserDef=null;this._setOkStateBySelectedItems()}),d.hitch(this,
function(){this._serviceBrowserDef=null})),this.emit("next"))},_setOkStateBySelectedItems:function(){0<this.serviceBrowser.getSelectedItems().length?g.removeClass(this.btnOk,"jimu-state-disabled"):g.addClass(this.btnOk,"jimu-state-disabled")},_onServiceBrowserClicked:function(){this._setOkStateBySelectedItems()},_onBtnCancelClicked:function(){this.emit("cancel")}})})},"jimu/dijit/ItemSelector":function(){define("dojo/_base/declare dojo/topic dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/ItemSelector.html dojo/Evented dojo/_base/lang dojo/_base/config dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/promise/all dojo/query dojo/on jimu/utils jimu/portalUtils jimu/tokenUtils jimu/portalUrlUtils jimu/dijit/ViewStack jimu/dijit/Search jimu/dijit/TabContainer3 jimu/dijit/_ItemTable".split(" "),
function(l,n,q,p,h,d,g,e,c,m,f,s,t,b,r,k,a,u,v,B,x,A,y){return l([q,p,h,g],{templateString:d,declaredClass:"jimu.dijit.ItemSelector",baseClass:"jimu-item-selector",tab:null,_user:null,_group:null,_allPublicPortalQuery:null,_filterPublicPortalQuery:null,_allPublicOnlineQuery:null,_filterPublicOnlineQuery:null,_allOrganizationQuery:null,_filterOrganizationQuery:null,_allMyContentQuery:null,_filterMyContentQuery:null,_allGroupQuery:null,_filterGroupQuery:null,_isPublicTabShow:!1,_signIn:!1,_itemTypeQueryString:"",
_typeKeywordQueryString:"",portalUrl:null,itemTypes:"",typeKeywords:"",showOnlineItems:!0,onlyShowOnlineFeaturedItems:!1,postMixInProperties:function(){this.portalUrl=v.getStandardPortalUrl(this.portalUrl);this.showOnlineItems=!1===this.showOnlineItems?!1:!0;this.itemTypes&&0<this.itemTypes.length||(this.itemTypes=[]);this._itemTypes="";m.forEach(this.itemTypes,e.hitch(this,function(a,b){this._itemTypes+='"'+a+'"';b!==this.itemTypes.length-1&&(this._itemTypes+=",")}));this._itemTypes="["+this._itemTypes+
"]";this.typeKeywords&&0<this.typeKeywords.length||(this.typeKeywords=[]);this._typeKeywords="";m.forEach(this.typeKeywords,e.hitch(this,function(a,b){this._typeKeywords+='"'+a+'"';b!==this.typeKeywords.length-1&&(this._typeKeywords+=",")}));this._typeKeywords="["+this._typeKeywords+"]";this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);var b=this._getPortalUrl();this.portal=a.getPortal(b);this._initOptions();this._initSearchQuery();this._initTabs();this._initPortalRadio();
this._initItemTables();this._initPublic();this._initPrivate();this._updateUIbySignIn()},_initOptions:function(){this._itemTypeQueryString=k.getItemQueryStringByTypes(this.itemTypes);this._typeKeywordQueryString=k.getItemQueryStringByTypeKeywords(this.typeKeywords)},_initTabs:function(){this.tab=new A({tabs:[{title:this.nls.myContent,content:this.mycontentTabNode},{title:this.nls.myOrganization,content:this.organizationTabNode},{title:this.nls.myGroup,content:this.groupTabNode},{title:this.nls.publicMap,
content:this.publicTabNode}]},this.tabNode);this.own(r(this.tab,"tabChanged",e.hitch(this,function(a){f.setStyle(this.signinSection,"display","none");a!==this.nls.publicMap?(this._isPublicTabShow=!1,this._updateUIbySignIn()):this._isPublicTabShow=!0})))},_updateUIbySignIn:function(){f.setStyle(this.signinSection,"display","none");var a=b(".organization-tab-content-main,.group-tab-content-main,.mycontent-tab-content-main",this.domNode);u.userHaveSignInPortal(this._getPortalUrl())?a.style("display",
"block"):(a.style("display","none"),this._isPublicTabShow||f.setStyle(this.signinSection,"display","block"))},_initPortalRadio:function(){k.combineRadioCheckBoxWithLabel(this.portalPublicRaido,this.portalPublicLabel);k.combineRadioCheckBoxWithLabel(this.onlinePublicRaido,this.onlinePublicLabel);var a=this._getPortalUrl(),a=v.getServerByUrl(a);this.portalPublicRaido.disabled=!1;this.onlinePublicRaido.disabled=!1;this.portalPublicRaido.checked=!0;var b=!1;v.isArcGIScom(a)?(b=!0,this.portalPublicLabel.innerHTML=
"ArcGIS.com"):(this.portalPublicLabel.innerHTML=a,b=this.showOnlineItems?!1:!0);b&&(this.onlinePublicRaido.disabled=!0,f.setStyle(this.onlinePublicRaido,"display","none"),f.setStyle(this.onlinePublicLabel,"display","none"))},_initSearchQuery:function(){var a="esri_"+(c.locale&&c.locale.slice(0,2)||"en").toLowerCase(),b=m.filter("esri_he esri_fr esri_ja esri_nl esri_th esri_tr esri_nb esri_ro esri_it esri_pl esri_po esri_ru esri_pt esri_en esri_ar esri_et esri_es esri_ko esri_cs esri_da esri_zh esri_sv esri_lt esri_fi esri_lv esri_de esri_vi".split(" "),
e.hitch(this,function(b){return b!==a})),k="";m.forEach(b,e.hitch(this,function(a){k+=" -owner:"+a+" "}));b=" ";this.portal&&(this.portal.user&&this.portal.user.orgId)&&(b=" orgid:"+this.portal.user.orgId+" ");b=b+this._itemTypeQueryString+" AND access:public "+k+" "+this._typeKeywordQueryString;this._allPublicPortalQuery=this._getQuery({sortField:"numViews",sortOrder:"desc",q:b});this._filterPublicPortalQuery=this._getQuery({q:b,basicQ:b});this._allPublicOnlineQuery=this._getQuery({sortField:"numViews",
sortOrder:"desc",q:(this.onlyShowOnlineFeaturedItems?' (group:"c755678be14e4a0984af36a15f5b643e"  OR group:"b8787a74b4d74f7fb9b8fac918735153") ':" ")+this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._filterPublicOnlineQuery=this._getQuery({q:this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._allOrganizationQuery=this._getQuery();this._filterOrganizationQuery=this._getQuery();this._allMyContentQuery=this._getQuery();this._filterMyContentQuery=
this._getQuery();this._allGroupQuery=this._getQuery();this._filterGroupQuery=this._getQuery()},_getQuery:function(a){return e.mixin({start:1,num:16,f:"json"},a||{})},_getPortalUrl:function(){return v.getStandardPortalUrl(this.portalUrl)},_initItemTables:function(){"function"===typeof this.onCreateItemContent&&(this.mycontentItemTable.onCreateItemContent=this.onCreateItemContent,this.organizationItemTable.onCreateItemContent=this.onCreateItemContent,this.groupItemTable.onCreateItemContent=this.onCreateItemContent,
this.publicPortalItemTable.onCreateItemContent=this.onCreateItemContent,this.publicOnlineItemTable.onCreateItemContent=this.onCreateItemContent);this.own(r(this.publicPortalItemTable,"item-dom-clicked",e.hitch(this,this._onItemDomClicked)));this.own(r(this.publicOnlineItemTable,"item-dom-clicked",e.hitch(this,this._onItemDomClicked)));this.own(r(this.organizationItemTable,"item-dom-clicked",e.hitch(this,this._onItemDomClicked)));this.own(r(this.groupItemTable,"item-dom-clicked",e.hitch(this,this._onItemDomClicked)));
this.own(r(this.mycontentItemTable,"item-dom-clicked",e.hitch(this,this._onItemDomClicked)));this.own(r(this.publicPortalItemTable,"update",e.hitch(this,this._onItemTableUpdate)));this.own(r(this.publicOnlineItemTable,"update",e.hitch(this,this._onItemTableUpdate)));this.own(r(this.organizationItemTable,"update",e.hitch(this,this._onItemTableUpdate)));this.own(r(this.groupItemTable,"update",e.hitch(this,this._onItemTableUpdate)));this.own(r(this.mycontentItemTable,"update",e.hitch(this,this._onItemTableUpdate)));
var a=this._getPortalUrl();this.portalPublicRaido.disabled||(this.publicPortalItemTable.set("portalUrl",a),this.publicPortalItemTable.searchAllItems(this._allPublicPortalQuery),this.publicPortalItemTable.set("filteredQuery",this._filterPublicPortalQuery));this.onlinePublicRaido.disabled||(this.publicOnlineItemTable.set("portalUrl",window.location.protocol+"//www.arcgis.com"),this.publicOnlineItemTable.searchAllItems(this._allPublicOnlineQuery),this.publicOnlineItemTable.set("filteredQuery",this._filterPublicOnlineQuery))},
_initPublic:function(){this.own(r(this.portalPublicRaido,"click",e.hitch(this,this._onPublicRaidoClicked)));this.own(r(this.onlinePublicRaido,"click",e.hitch(this,this._onPublicRaidoClicked)));this._onPublicRaidoClicked()},_onPublicRaidoClicked:function(){this.portalPublicRaido.checked?(this.publicPortalItemTable.show(),this.publicOnlineItemTable.hide()):this.onlinePublicRaido.checked&&(this.publicPortalItemTable.hide(),this.publicOnlineItemTable.show())},_onPublicSearch:function(a){(a=a&&e.trim(a))?
(this.publicPortalItemTable.showFilterItemsSection(),this.publicOnlineItemTable.showFilterItemsSection(),this.portalPublicRaido.checked?(this._filterPublicPortalQuery.q=a+" "+this._filterPublicPortalQuery.basicQ,this._filterPublicPortalQuery.start=1,this.publicPortalItemTable.searchFilteredItems(this._filterPublicPortalQuery)):this.onlinePublicRaido.checked&&(this._filterPublicOnlineQuery.q=a+" "+this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString,this._filterPublicOnlineQuery.start=
1,this.publicOnlineItemTable.searchFilteredItems(this._filterPublicOnlineQuery))):(this.publicPortalItemTable.showAllItemsSection(),this.publicOnlineItemTable.showAllItemsSection())},_initPrivate:function(){this._resetPortalMaps();this.own(r(this.groupsSelect,"change",e.hitch(this,this._onGroupsSelectChange)));var a=v.getServerByUrl(this._getPortalUrl());v.isArcGIScom(a);u.userHaveSignInPortal(this._getPortalUrl())&&this._onSignIn()},_onOrganizationSearch:function(a){if(a=a&&e.trim(a)){if(this._allOrganizationQuery){var b=
this._allOrganizationQuery.q;b&&(this._filterOrganizationQuery.q=a+" "+b,this._filterOrganizationQuery.start=1,this.organizationItemTable.searchFilteredItems(this._filterOrganizationQuery))}}else this.organizationItemTable.showAllItemsSection()},_onMyContentSearch:function(a){if(a=a&&e.trim(a)){if(this._allMyContentQuery){var b=this._allMyContentQuery.q;b&&(this._filterMyContentQuery.q=a+" "+b,this._filterMyContentQuery.start=1,this.mycontentItemTable.searchFilteredItems(this._filterMyContentQuery))}}else this.mycontentItemTable.showAllItemsSection()},
_onGroupSearch:function(a){if(a=a&&e.trim(a)){if(this._allGroupQuery){var b=this._allGroupQuery.q;b&&(this._filterGroupQuery.q=a+" "+b,this._filterGroupQuery.start=1,this.groupItemTable.searchFilteredItems(this._filterGroupQuery))}}else this.groupItemTable.showAllItemsSection()},_onSignIn:function(){this._updateUIbySignIn();if(!this._signIn){this._signIn=!0;var b=this._getPortalUrl();a.getPortal(b).getUser().then(e.hitch(this,function(a){this.domNode&&(this._resetPortalMaps(),this._searchOrganization(a),
this._searchMyContent(a),this._searchGroups(a))}))}},_onSignOut:function(){this._signIn=!1;this._resetPortalMaps();this._updateUIbySignIn()},_resetPortalMaps:function(){this.organizationItemTable.clear();this.mycontentItemTable.clear();this._resetGroupsSection()},_searchOrganization:function(a){this.organizationItemTable.clear();a=" orgid:"+a.orgId+" AND "+this._itemTypeQueryString+" AND (access:org OR access:public) "+this._typeKeywordQueryString;var b=this._getPortalUrl();this._allOrganizationQuery=
this._getQuery({q:a});this._filterOrganizationQuery=this._getQuery({q:a});this.organizationItemTable.set("portalUrl",b);this.organizationItemTable.searchAllItems(this._allOrganizationQuery)},_searchMyContent:function(a){this.mycontentItemTable.clear();var b=this._getPortalUrl();a="owner:"+a.username+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;this._allMyContentQuery=this._getQuery({q:a});this._filterMyContentQuery=this._getQuery({q:a});this.mycontentItemTable.set("portalUrl",
b);this.mycontentItemTable.searchAllItems(this._allMyContentQuery)},_searchGroups:function(a){this._resetGroupsSection();f.setStyle(this.groupsSection,"display","block");a=a.getGroups();if(0<a.length){f.setStyle(this.groupSearch.domNode,"display","block");this.groupItemTable.show();f.empty(this.groupsSelect);for(var b=0;b<a.length;b++){var c=a[b];f.create("option",{value:c.id,innerHTML:c.title},this.groupsSelect)}this._onGroupsSelectChange()}this._updateUIbyGroups(a.length)},_resetGroupsSection:function(){f.setStyle(this.groupsSection,
"display","none");f.empty(this.groupsSelect);f.create("option",{value:"nodata",innerHTML:this.nls.noneGroups},this.groupsSelect);this.groupItemTable.clear();f.setStyle(this.groupSearch.domNode,"display","none");this.groupItemTable.hide();this._updateUIbyGroups(0)},_updateUIbyGroups:function(a){0===a?f.setStyle(this.groupsSection,"top","15px"):f.setStyle(this.groupsSection,"top","50px")},_onGroupsSelectChange:function(){var a=this.groupsSelect.value;this.groupItemTable.clear();if("nodata"===a)f.setStyle(this.groupSearch,
"display","none"),this.groupItemTable.hide();else{f.setStyle(this.groupSearch,"display","block");this.groupItemTable.show();var b=this._getPortalUrl(),a="group:"+a+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;this._allGroupQuery=this._getQuery({q:a});this._filterGroupQuery=this._getQuery({q:a});this.groupItemTable.set("portalUrl",b);this.groupItemTable.searchAllItems(this._allGroupQuery)}},_onItemTableUpdate:function(){this.emit("update")},_onItemDomClicked:function(a){var c=
f.hasClass(a,"jimu-state-active");b(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active");c&&f.addClass(a,"jimu-state-active");(a=this.getSelectedItem())?this.emit("item-selected",a):this.emit("none-item-selected")},getSelectedItem:function(){var a=null,c=b(".item.jimu-state-active",this.domNode);0<c.length&&(a=e.mixin({},c[0].item));return a}})})},"jimu/dijit/_ItemTable":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_ItemTable.html dojo/Evented dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/query dojo/on jimu/utils jimu/portalUtils jimu/portalUrlUtils jimu/dijit/LoadingIndicator".split(" "),
function(l,n,q,p,h,d,g,e,c,m,f,s,t,b,r,k){return l([n,q,p,d],{templateString:h,declaredClass:"jimu.dijit.ItemTable",baseClass:"jimu-item-table",query:null,filteredQuery:null,portalUrl:null,hidden:!1,nls:null,types:"",typeKeywords:"",_defaultThumbnail:{"Web Mapping Application":"webapp.png","Mobile Application":"mobileapp.png"},postMixInProperties:function(){this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);this._initSelf()},_initSelf:function(){this.types&&0<this.types.length||
(this.types=[]);(this.hidden=!0===this.hidden)&&this.hide();this.portalUrl&&(this.portalUrl=r.getStandardPortalUrl(this.portalUrl));this.showAllItemsSection();this.searchAllItems()},show:function(){c.setStyle(this.domNode,"display","block")},hide:function(){c.setStyle(this.domNode,"display","none")},searchAllItems:function(a){this.showAllItemsSection();a&&(this.query=g.mixin({},a),this.query.start=1,this.clearAllItemsSection());this.portalUrl&&this.query&&0<this.query.start&&(this.allItemsShelter.show(),
b.getPortal(this.portalUrl).queryItems(this.query).then(g.hitch(this,function(a){this.domNode&&(this.allItemsShelter.hide(),this.query.start=a.nextStart,this._createItems(a,this.allItemTbody))}),g.hitch(this,function(a){console.error(a);this.domNode&&this.allItemsShelter.hide()})))},searchFilteredItems:function(a){this.showFilterItemsSection();a&&(this.filteredQuery=g.clone(a),this.filteredQuery.start=1,this.clearFilteredItemsSection());this.portalUrl&&this.filteredQuery&&0<this.filteredQuery.start&&
(this.filteredItemShelter.show(),b.getPortal(this.portalUrl).queryItems(this.filteredQuery).then(g.hitch(this,function(b){this.domNode&&(this.showFilterItemsSection(),a&&this.clearFilteredItemsSection(),this.filteredQuery.start=b.nextStart,this._createItems(b,this.filteredItemsTbody),this._filterItemCallback())}),g.hitch(this,function(a){console.error(a);this.domNode&&this._filterItemCallback()})))},_filterItemCallback:function(){this.filteredItemShelter.hide();0<this._getItemCount(this.filteredItemsTbody)?
(c.setStyle(this.filteredItemsTableDiv,"display","block"),c.setStyle(this.searchNoneTipSection,"display","none")):(c.setStyle(this.filteredItemsTableDiv,"display","none"),c.setStyle(this.searchNoneTipSection,"display","block"))},clear:function(){this.clearAllItemsSection();this.clearFilteredItemsSection()},clearAllItemsSection:function(){c.empty(this.allItemTbody)},clearFilteredItemsSection:function(){c.empty(this.filteredItemsTbody)},showAllItemsSection:function(){c.setStyle(this.allItemsSection,
"display","block");c.setStyle(this.filteredItemsSection,"display","none")},showFilterItemsSection:function(){c.setStyle(this.allItemsSection,"display","none");c.setStyle(this.filteredItemsSection,"display","block");c.setStyle(this.filteredItemsTableDiv,"display","block");c.setStyle(this.searchNoneTipSection,"display","none")},_onAllItemsSectionScroll:function(){this._isScrollToBottom(this.allItemsTableDiv)&&this.searchAllItems()},_onFilteredItemsSectionScroll:function(){this._isScrollToBottom(this.filteredItemsTableDiv)&&
this.searchFilteredItems()},_isScrollToBottom:function(a){return t.isScrollToBottom(a)},_createItems:function(a,b){var k=a.results,d=e.map(this.types,g.hitch(this,function(a){return a.toLowerCase()})),k=e.filter(k,g.hitch(this,function(a){a=a.type&&a.type.toLowerCase()||"";return 0<=e.indexOf(d,a)}));if(0!==k.length){var r,m=f("td.empty",b),h;if(0<m.length){var s=Math.min(k.length,m.length),l=k.splice(0,s);for(h=0;h<s;h++){var n=m[h];r=this._createItem(l[h]);c.place(r,n);c.removeClass(n,"empty")}}if(0!==
k.length){m=Math.ceil(k.length/2);for(h=0;h<m;h++){r=c.toDom("\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e");c.place(r,b);s=f("td",r);for(l=0;l<s.length;l++)n=s[l],(r=k[2*h+l])?(r=this._createItem(r),c.place(r,n)):c.addClass(n,"empty")}this.emit("update")}}},_getItemCount:function(a){return f(".item",a).length},_createItem:function(a){var b=c.toDom('\x3cdiv class\x3d"item"\x3e\x3cdiv class\x3d"item-border"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-thumbnail jimu-auto-vertical"\x3e\x3cdiv class\x3d"none-thumbnail-tip jimu-auto-vertical-content"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item-info"\x3e\x3cdiv class\x3d"item-name"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-type-owner"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-date"\x3e\x3c/div\x3e\x3ca class\x3d"item-details" target\x3d"_blank"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e');
b.item=a;var k=f(".item-thumbnail",b)[0],d=f(".item-name",b)[0],e=f(".item-type-owner",b)[0],g=f(".item-date",b)[0],r=f(".item-details",b)[0],m=f(".none-thumbnail-tip",b)[0];if(!a.thumbnailUrl){var h=this._defaultThumbnail[a.type];h&&(a.thumbnailUrl=require.toUrl("jimu")+"/images/"+h)}a.thumbnailUrl?c.setStyle(k,"backgroundImage","url("+a.thumbnailUrl+")"):m.innerHTML=this.nls.noneThumbnail;"function"===typeof this.onCreateItemContent?(g=f(".item-info",b)[0],this.onCreateItemContent(a,g)):(d.innerHTML=
a.title,d.title=d.innerHTML,e.innerHTML=a.type+" by "+a.owner,e.title=e.innerHTML,k=new Date,k.setTime(a.modified),g.innerHTML=k.toLocaleString(),g.title=g.innerHTML,r.innerHTML=this.nls.moreDetails,r.href=a.detailsPageUrl||"#");return b},_onItemsTableClicked:function(a){var b=a.target||a.srcElement;a=null;c.hasClass(b,"item-thumbnail")?a=b.parentNode:c.hasClass(b,"none-thumbnail-tip")&&(a=b.parentNode.parentNode);a&&(b=c.hasClass(a,"jimu-state-active"),f(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active"),
b?c.removeClass(a,"jimu-state-active"):c.addClass(a,"jimu-state-active"),this.emit("item-dom-clicked",a))},getSelectedItem:function(){var a=null,b=f(".item.jimu-state-active",this.domNode);0<b.length&&(a=g.mixin({},b[0].item));return a}})})},"jimu/dijit/QueryableServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array","jimu/serviceBrowserRuleUtils"],function(l,n,q,p,h){return l([n],{declaredClass:"jimu.dijit.QueryableServiceBrowser",baseClass:"jimu-queryable-service-browser",
url:"",multiple:!1,postMixInProperties:function(){this.inherited(arguments);this.rule=h.getQueryableServiceBrowserRule()},getSelectedItems:function(){var d=this.inherited(arguments);return d=p.map(d,q.hitch(this,function(d){return{name:d.name,url:d.url,definition:d.definition}}))}})})},"jimu/dijit/_BasicServiceBrowser":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/Deferred dojo/promise/all dojo/store/Memory dojo/store/Observable dijit/tree/ObjectStoreModel jimu/utils jimu/dijit/_Tree jimu/dijit/LoadingShelter".split(" "),
function(l,n,q,p,h,d,g,e,c,m,f,s,t,b,r){return l([n,q,p,h],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"shelter"  data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_currentUrl:"",_treeClass:"service-browser-tree",_def:null,url:"",multiple:!1,rule:null,postMixInProperties:function(){this.nls=window.jimuNls.basicServiceBrowser},postCreate:function(){this.inherited(arguments);g.addClass(this.domNode,
"jimu-basic-service-browser");this.multiple=!!this.multiple;this._createTree();this.url&&"string"===typeof this.url&&this.setUrl(this.url)},reset:function(){this.url="";this._clear()},getSelectedItems:function(){return this.tree.getSelectedItems()},setUrl:function(k){this._def&&(this._def.isFulfilled()||this._def.cancel(),this._def=null);this._def=new c;(!k||!("string"===typeof k&&k.replace(/\/*$/g,"")))&&this._def.reject();k=k.replace(/\/*$/g,"");k=d.trim(k);var a=k.match(/^http(s?):\/\//gi);a&&
0<a.length||(k="http://"+k);if(!(0>=k.search(/\/rest\/services/i))&&(this._clear(),this._currentUrl=k))return k=this._getRootItem(),k=b.isStringEndWith(this._currentUrl,"rest/services")?this._searchBaseServiceUrl(this._currentUrl,k):this._isUrlContainsServiceType(this._currentUrl)?this._searchServiceUrl(this._currentUrl,k):this._searchFolderServiceUrl(this._currentUrl,k),this.shelter.show(),k.then(d.hitch(this,function(a){this.domNode&&this.shelter.hide();var b=this.tree.getAllLeafTreeNodeWidgets();
1===b.length&&b[0].select();this._def.resolve(a)}),d.hitch(this,function(a){this.domNode&&this.shelter.hide();this._showRequestError();this._def.reject(a)})),this._def;this._def.reject()},_getItem:function(b){return this.rule.getItem(b)},_getSubItemUrls:function(b){return this.rule.getSubItemUrls(b)},_getSubItems:function(b){var a=new c;this._getSubItemUrls(b).then(d.hitch(this,function(b){b=e.map(b,d.hitch(this,function(a){return this._getItem(a)}));m(b).then(d.hitch(this,function(b){b=e.filter(b,
d.hitch(this,function(a){return a&&"object"===typeof a}));a.resolve(b)}),d.hitch(this,function(b){a.reject(b)}))}),d.hitch(this,function(b){a.reject(b)}));return a},_selectFirstLeafTreeNodeWidget:function(){var b=this.tree.getAllLeafTreeNodeWidgets();1===b.length&&b[0].select()},isLeafItem:function(b){return 0<=this.rule.leafTypes.indexOf(b.type)},isServiceTypeSupported:function(b){return this.rule.isServiceTypeSupported(b)},_getStringEndWith:function(b,a){var c="",d=b.indexOf(a);0<=d&&(c=b.slice(0,
d+a.length));return c},_isUrlContainsServiceType:function(b){return this.rule.isUrlContainsServiceType(b)},_getBaseServiceUrl:function(){return this._getStringEndWith(this._currentUrl,"rest/services")},_getServiceName:function(b){var a="";b=b.split("/");return a=b[b.length-1]},_searchBaseServiceUrl:function(b,a){var f=new c;this._getRestInfo(b).then(d.hitch(this,function(g){if(this.domNode){var r=[];e.map(g.folders,d.hitch(this,function(f){var g={name:f,type:"folder",url:b+"/"+f,parent:a.id};this._addItem(g);
var m=new c;this._doSearchFolderServiceUrl(g.url,g.id).then(d.hitch(this,function(a){0<a.length?e.forEach(a,d.hitch(this,function(a){a.parent=g.id;this._addItem(a)})):this._removeItem(g.id);m.resolve()}),d.hitch(this,function(a){m.reject(a)}));r.push(m);return m}));e.forEach(g.services,d.hitch(this,function(f){if(this.isServiceTypeSupported(f.type)){f=b+"/"+f.name+"/"+f.type;var e=new c;this.rule.getItem(f).then(d.hitch(this,function(b){b&&(b.parent=a.id,this._addItem(b));e.resolve()}),d.hitch(this,
function(a){console.error(a);e.reject(a)}));r.push(e)}}));m(r).then(d.hitch(this,function(){this.domNode&&f.resolve()}),d.hitch(this,function(a){console.error(a);this.domNode&&f.reject(a)}))}}),d.hitch(this,function(a){console.error(a);this.domNode&&f.reject({errorCode:"NETWORK_ERROR",error:a})}));return f},_searchFolderServiceUrl:function(b,a){var f=new c;this._doSearchFolderServiceUrl(b,a).then(d.hitch(this,function(b){this.domNode&&(e.forEach(b,d.hitch(this,function(b){b.parent=a.id;this._addItem(b)})),
f.resolve())}),d.hitch(this,function(a){console.error(a);this.domNode&&f.reject({errorCode:"NETWORK_ERROR",error:a})}));return f},_doSearchFolderServiceUrl:function(b){var a=new c,f=this._getBaseServiceUrl();this._getRestInfo(b).then(d.hitch(this,function(b){b=b.services;var c=[];b&&0<b.length&&e.forEach(b,d.hitch(this,function(a){this.isServiceTypeSupported(a.type)&&(a=this.rule.getItem(f+"/"+a.name+"/"+a.type),c.push(a))}));m(c).then(d.hitch(this,function(b){b=e.filter(b,d.hitch(this,function(a){return a}));
a.resolve(b)}),d.hitch(this,function(b){console.error(b);a.reject(b)}))}),d.hitch(this,function(b){console.error(b);a.reject(b)}));return a},_searchServiceUrl:function(b,a){var f=new c;this._getSubItems(b).then(d.hitch(this,function(c){c&&0<c.length?(e.forEach(c,d.hitch(this,function(b){b.parent=a.id;this._addItem(b)})),f.resolve()):this._getItem(b).then(d.hitch(this,function(b){b&&(b.parent=a.id,this._addItem(b));f.resolve()}),d.hitch(this,function(a){f.reject(a)}))}),d.hitch(this,function(a){f.reject(a)}));
return f},_getRestInfo:function(b){var a=new c;this.rule.getRestInfo(b).then(d.hitch(this,function(b){this.domNode&&a.resolve(b)}),d.hitch(this,function(b){this.domNode&&a.reject(b)}));return a},_clear:function(){var b=this._store.query({parent:"root"});e.forEach(b,d.hitch(this,function(a){a&&"root"!==a.id&&this._store.remove(a.id)}))},_showRequestError:function(){this.emit("error",this.nls.invalidUrlTip)},_addItem:function(b){this._id++;b.id=this._id.toString();this._store.add(b);return b},_removeItem:function(b){this._store.remove(b)},
_getRootItem:function(){return{id:"root",name:"Services Root",type:"root"}},_createTree:function(){var b=this._getRootItem(),b=new f({data:[b],getChildren:function(a){return this.query({parent:a.id})}});this._store=new s(b);b=new t({store:this._store,query:{id:"root"},mayHaveChildren:d.hitch(this,this._mayHaveChildren)});this.tree=new r({multiple:this.multiple,model:b,showRoot:!1,style:{width:"100%"},isLeafItem:d.hitch(this,this.isLeafItem),onOpen:d.hitch(this,function(a,b){this._onTreeOpen(a,b);
this.emit("tree-open",a,b)}),onClick:d.hitch(this,function(a,b,c){this._onTreeClick(a,b,c);this.emit("tree-click",a,b,c)}),getIconStyle:d.hitch(this,function(a,b){var c=null;if(!a)return null;var d={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},k=window.location.protocol+"//"+window.location.host+require.toUrl("jimu"),f=this._getIconImageName(a,b);f||("folder"===a.type?f=b?"folder_open_default.png":"folder_close_default.png":this.isServiceTypeSupported(a.type)&&
(f=b?"folder_open_default.png":"folder_close_default.png"));f&&(d.backgroundImage="url("+k+"/css/images/"+f+")",c=d);return c})});g.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.domNode)},_getIconImageName:function(b,a){var c="";"function"===typeof this.rule.getIconImageName&&(c=this.rule.getIconImageName(b,a));return c},_mayHaveChildren:function(b){return"root"===b.type?!0:!this.isLeafItem(b)},_onTreeOpen:function(b,a){"root"!==b.id&&(!(0<this._store.query({parent:b.id}).length)&&
!b.checking&&!b.checked)&&(b.checking=!0,this._getSubItems(b.url).then(d.hitch(this,function(a){e.forEach(a,d.hitch(this,function(a){a.parent=b.id;this._addItem(a)}));b.checking=!1;b.checked=!0}),d.hitch(this,function(a){console.error(a);b.checking=!1;b.checked=!0})))},_onTreeClick:function(b,a,c){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.inherited(arguments)}})})},"jimu/serviceBrowserRuleUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/Deferred",
"jimu/utils","jimu/ServiceBrowserRule"],function(l,n,q,p,h){var d={combineRules:function(d){var e=new h;n.forEach(d,function(c){n.forEach(c.leafTypes,function(c){0>e.leafTypes.indexOf(c)&&e.leafTypes.push(c)});n.forEach(c.serviceTypes,function(c){0>e.serviceTypes.indexOf(c)&&e.serviceTypes.push(c)})});e.getMatchedRule=function(c){var e=null;n.some(d,function(d){return d.isUrlContainsServiceType(c)?(e=d,!0):!1});return e};e.getItem=function(c){var d=null;return d=(d=e.getMatchedRule(c))?d.getItem(c):
e.defaultGetItem(c)};e.getSubItemUrls=function(c){var d=null;return d=(d=e.getMatchedRule(c))?d.getSubItemUrls(c):e.defaultGetSubItemUrls(c)};e.getIconImageName=function(c,d){var f="";if(c.url){var g=e.getMatchedRule(c.url);g&&"function"===typeof g.getIconImageName&&(f=g.getIconImageName(c,d))}return f};return e},getFeaturelayerServiceBrowserRule:function(g,e){var c=l.clone(g),m=["point","polyline","polygon"];l.isArrayLike(c)&&0<c.length?(c=n.filter(c,function(c){return 0<=m.indexOf(c)}),0===c.length&&
(c=m)):c=m;return d._getFeaturelayerServiceBrowserRule(c,e)},_getFeaturelayerServiceBrowserRule:function(d,e){return new h({types:d,leafTypes:["Feature Layer","Table"],serviceTypes:["MapServer","FeatureServer"],_groupLayerType:"Group Layer",_featureLayerType:"Feature Layer",_tableType:"Table",getItem:function(c){var d=new q;this.isUrlEndWithServiceType(c,this.serviceTypes)?d=this.defaultGetItem(c):this.getRestInfo(c).then(l.hitch(this,function(f){f=this._getItemByLayerDefinition(c,f);d.resolve(f)}),
l.hitch(this,function(c){d.reject(c)}));return d},getSubItemUrls:function(c){var d=new q;return d=this.isUrlEndWithServiceType(c)?this._getSubUrlsByServiceUrl(c):this._getSubUrlsByGroupUrl(c)},getIconImageName:function(c,d){var f="";if("MapServer"===c.type||"FeatureServer"===c.type)f=d?"mapserver_open.png":"mapserver_close.png";else if(c.type===this._groupLayerType)f=d?"group_layer2.png":"group_layer1.png";else if(c.type===this._featureLayerType){var e=p.getTypeByGeometryType(c.definition&&c.definition.geometryType);
"point"===e?f="point_layer1.png":"polyline"===e?f="line_layer1.png":"polygon"===e&&(f="polygon_layer1.png")}else c.type===this._tableType?f="table.png":"root"===c.type&&this._currentUrl&&n.some(this.serviceTypes,l.hitch(this,function(c){return p.isStringEndWith(this._currentUrl,"/"+c)}))&&(f=d?"mapserver_open.png":"mapserver_close.png");return f},_getSubUrlsByServiceUrl:function(c){var d=new q;this.getRestInfo(c).then(l.hitch(this,function(f){var e=[];n.forEach(f.layers,l.hitch(this,function(d){0<=
d.parentLayerId||e.push(c+"/"+d.id)}));d.resolve(e)}),l.hitch(this,function(c){d.reject(c)}));return d},_getSubUrlsByGroupUrl:function(c){var d=new q;this.getRestInfo(c).then(l.hitch(this,function(f){var e=[];if(f.type===this._groupLayerType)var g=this._getServiceUrlByLayerUrl(c),e=n.map(f.subLayers||[],l.hitch(this,function(b){return g+"/"+b.id}));d.resolve(e)}),l.hitch(this,function(c){d.reject(c)}));return d},_getItemByLayerDefinition:function(c,d){var f=null,g=d.type;if(g===this._groupLayerType)f=
{name:d.name,type:g,url:c,definition:d};else if(g===this._featureLayerType||g===this._tableType){var h=!1;g===this._featureLayerType?h=this._validateEsriGeometryType(d.geometryType):g===this._tableType&&(h=!0);h&&(h=!1,(h=e?p.isFeaturelayerUrlSupportQuery(c,d.capabilities):!0)&&(f={name:d.name,type:g,url:c,definition:d}))}return f},_validateEsriGeometryType:function(c){c=p.getTypeByGeometryType(c);return 0<=this.types.indexOf(c)},_getServiceUrlByLayerUrl:function(c){for(var d="",f=0;f<this.serviceTypes.length;f++){var e=
this.serviceTypes[f].toLowerCase(),g=c.toLowerCase().lastIndexOf("/"+e+"/");if(0<=g){d=c.slice(0,g+e.length+1);break}}return d}})},getGeocodeServiceBrowserRule:function(){return new h({leafTypes:["GeocodeServer"],serviceTypes:["GeocodeServer"]})},getGpServiceBrowserRule:function(){return new h({leafTypes:["GPTask"],serviceTypes:["GPServer"],getItem:function(d){var e=new q;this.isUrlEndWithServiceType(d)?e=this.defaultGetItem(d):this.getRestInfo(d).then(l.hitch(this,function(c){e.resolve({name:c.displayName||
c.name,type:"GPTask",url:d,definition:c})}),l.hitch(this,function(c){e.reject(c)}));return e},getSubItemUrls:function(d){var e=new q;this.isUrlEndWithServiceType(d)?this.getRestInfo(d).then(l.hitch(this,function(c){c=n.map(c.tasks||[],l.hitch(this,function(c){return d+"/"+c}));e.resolve(c)}),l.hitch(this,function(c){e.reject(c)})):e.resolve([]);return e},getIconImageName:function(d,e){var c="";"GPServer"===d.type?c="toolbox.png":"GPTask"===d.type&&(c="tool.png");return c}})},getImageServiceBrowserRule:function(d){return new h({leafTypes:["ImageServer"],
serviceTypes:["ImageServer"],getItem:function(e){var c=new q;this.isUrlEndWithServiceType(e)?this.defaultGetItem(e).then(l.hitch(this,function(e){d?p.isImageServiceSupportQuery(e.definition.capabilities)?c.resolve(e):c.resolve(null):c.resolve(e)}),l.hitch(this,function(d){c.reject(d)})):c.resolve(null);return c},getIconImageName:function(d,c){var g="";"ImageServer"===d.type&&(g="image_layer.png");return g}})},getQueryableServiceBrowserRule:function(){var g=d.getFeaturelayerServiceBrowserRule(["point",
"polyline","polygon"],!0),e=d.getImageServiceBrowserRule(!0);return d.combineRules([g,e])}};return d})},"jimu/ServiceBrowserRule":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred jimu/utils esri/request esri/IdentityManager".split(" "),function(l,n,q,p,h,d,g){return l([],{leafTypes:null,serviceTypes:null,_restInfoCache:{},constructor:function(d){n.mixin(this,d);n.isArrayLike(this.leafTypes)||(this.leafTypes=[]);n.isArrayLike(this.serviceTypes)||(this.serviceTypes=
[])},getItem:function(d){return this.defaultGetItem(d)},getSubItemUrls:function(d){return this.defaultGetSubItemUrls(d)},getIconImageName:function(d,c){return""},defaultGetItem:function(d){var c=new p;d=d.replace(/\/*$/g,"");if(this.isUrlEndWithServiceType(d)){var g=d.split("/"),f=g[g.length-1],h=g[g.length-2];this.getRestInfo(d).then(n.hitch(this,function(g){c.resolve({name:h,type:f,url:d,definition:g})}),n.hitch(this,function(d){console.error(d);c.reject({errorCode:"NETWORK_ERROR",error:d})}))}else c.resolve(null);
return c},defaultGetSubItemUrls:function(d){d=new p;d.resolve([]);return d},getRestInfo:function(e){var c=new p;e=e.replace(/\/*$/g,"");var m=this._restInfoCache[e];if(m)c.resolve(m);else{var m={url:e,content:{f:"json"},handleAs:"json",callbackParamName:"callback",timeout:2E4},f=g.findCredential(e);f&&f.token&&(m.content.token=f.token);d(m).then(n.hitch(this,function(d){this._restInfoCache[e]=d;c.resolve(d)}),function(d){c.reject(d)})}return c},isServiceTypeSupported:function(d){d=d.toLowerCase();
return q.some(this.serviceTypes,n.hitch(this,function(c){return c.toLowerCase()===d}))},isUrlEndWithServiceType:function(d){return q.some(this.serviceTypes,n.hitch(this,function(c){return h.isStringEndWith(d,"/"+c)}))},isUrlContainsServiceType:function(d){d=d.toLowerCase();return q.some(this.serviceTypes,n.hitch(this,function(c){c=c.toLowerCase();return 0<=d.indexOf("/"+c)}))}})})},"jimu/dijit/_QueryableServiceChooserContent":function(){define(["dojo/_base/declare","./_BasicServiceChooserContent",
"./QueryableServiceBrowser"],function(l,n,q){return l([n],{baseClass:"jimu-queryable-service-chooser-content",_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/myservice/MapServer","http://myserver/arcgis/rest/services/myservice/FeatureServer","http://myserver/arcgis/rest/services/myservice/ImageServer"],_createServiceBrowser:function(l){return new q(l)}})})},"jimu/dijit/_BasicServiceChooserContent":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_BasicServiceChooserContent.html dojo/Evented dojo/Deferred dojo/_base/html dojo/_base/array dojo/_base/lang dojo/on dojo/aspect dojo/promise/all jimu/dijit/URLInput jimu/dijit/LoadingIndicator".split(" "),
function(l,n,q,p,h,d,g,e,c,m,f,s,t,b,r){return l([n,q,p,d],{templateString:h,_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/servicetype"],multiple:!1,url:"",getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},postMixInProperties:function(){this.nls=m.mixin({},window.jimuNls.common);this.nls=m.mixin(this.nls,window.jimuNls.basicServiceChooser)},postCreate:function(){this.inherited(arguments);
e.addClass(this.domNode,"jimu-basic-service-chooser-content");this.multiple=!!this.multiple;this._initSelf();this.exampleTd.innerHTML=this.exampleTd.innerHTML},setUrl:function(b){var a=new g;(this.url=b)&&"string"===typeof this.url?(this.urlInput.set("value",this.url),a=this._onBtnValidateClick()):a.reject();return a},focusInput:function(){this.urlInput.focus()},_initSelf:function(){this._examples&&0<this._examples.length?c.forEach(this._examples,m.hitch(this,function(a){e.create("div",{innerHTML:a,
"class":"example-url"},this.exampleTd)})):e.setStyle(this.exampleTr,"display","none");var b={multiple:this.multiple,_onTreeClick:m.hitch(this,this._onTreeClick)};this.serviceBrowser=this._createServiceBrowser(b);this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup();this.own(s.after(this.urlInput,"validator",m.hitch(this,this._afterUrlValidate)));this.url&&"string"===typeof this.url&&this.urlInput.set("value",this.url);this.own(f(this.serviceBrowser,"error",m.hitch(this,
this._onServiceBrowserError)))},_createServiceBrowser:function(b){},_validateUrl:function(b){b=b.replace(/\/*$/g,"");if((b=b.match(/\/rest\/services\/*(.*)/gi))&&0<b.length)if(b=b[0].replace(/\/rest\/services\/*/,"")){var a=b.split("/");if(1===a.length)return!0;if(2===a.length)return this.serviceBrowser.isServiceTypeSupported(a[1]);if(3<=a.length)return b=this.serviceBrowser.isServiceTypeSupported(a[1]),a=this.serviceBrowser.isServiceTypeSupported(a[2]),b||a}else return!0;else return!1},_afterUrlValidate:function(b){b&&
(b=this.urlInput.get("value"),b=this._validateUrl(b));b?e.removeClass(this.btnValidate,"jimu-state-disabled"):e.addClass(this.btnValidate,"jimu-state-disabled");return b},_onServiceBrowserError:function(b){this._showErrorMessage(b)},_showErrorMessage:function(b){b&&"string"===typeof b?(this.errorNode.innerHTML=b,e.addClass(this.errorSection,"visible")):e.removeClass(this.errorSection,"visible")},_clearErrorMessage:function(){this.errorNode.innerHTML="";e.removeClass(this.errorSection,"visible")},
_onBtnValidateClick:function(){this._clearErrorMessage();var b=new g;if(this.urlInput.validate()){var a=this.urlInput.get("value");this.serviceBrowser.setUrl(a).then(m.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();b.resolve()}),m.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();b.reject()}));this.emit("validate-click")}else b.reject();return b},_checkSelectedItemsNumber:function(){0<this.getSelectedItems().length?e.removeClass(this.btnOk,"jimu-state-disabled"):
e.addClass(this.btnOk,"jimu-state-disabled")},_onTreeClick:function(){this._checkSelectedItemsNumber()},_onBtnOkClick:function(){var b=this.getSelectedItems();0<b.length&&this.emit("ok",b)},_onBtnCancelClick:function(){this.emit("cancel")}})})},"widgets/Query/utils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/Deferred jimu/utils jimu/LayerInfos/LayerInfos esri/request".split(" "),function(l,n,q,p,h,d){return{getDefaultPopupInfo:function(d,e,c){var m={title:"",fieldInfos:[],description:null,
showAttachments:!1,mediaInfos:[]};c=!!c;if(d.displayField)m.title="{"+d.displayField+"}";else{var f=p.getObjectIdField(d);f&&(m.title="{"+f+"}")}m.showAttachments=!!d.hasAttachments;f=d=d.fields;e||(f=n.filter(d,l.hitch(this,function(c){return"esriFieldTypeGeometry"!==c.type})));e=n.map(f,l.hitch(this,function(d){d=p.getDefaultPortalFieldInfo(d);d.visible=c;return d}));m.fieldInfos=e;return m},getPortalFieldInfosWithoutShape:function(d,e){return n.filter(e,l.hitch(this,function(c){return"esriFieldTypeGeometry"!==
p.getFieldInfoByFieldName(d.fields,c.fieldName).type}))},getPopupInfoByAttributes:function(d,e){var c=this.getDefaultPopupInfo(d,!1),m=[],f={},h;for(h in e){m.push(h);var t=p.getFieldInfoByFieldName(d.fields,h).type;if("esriFieldTypeSingle"===t||"esriFieldTypeDouble"===t)t=e[h],null!==t&&void 0!==t&&(t=parseFloat(t),isNaN(t)||(t=t.toString().split("."),2===t.length&&(f[h]=t[1].length)));c.fieldInfos=n.map(c.fieldInfos,l.hitch(this,function(b){var c=b.fieldName;f.hasOwnProperty(c)&&(b.format.places=
f[c]);return m.indexOf(c)}))}return c},upgradePopupToPopupInfo:function(d,e){var c=this.getDefaultPopupInfo(d,!1,!1);c.title=e.title||"";c.title=c.title.replace("${","{");if(e.fields){var m={};n.forEach(e.fields,l.hitch(this,function(c){m[c.name]=c}));n.forEach(c.fieldInfos,l.hitch(this,function(d){var e=d.fieldName,g=m[e];g&&(d.label=g.alias||d.label,d.visible=!0,"image"===g.specialType&&(e="{"+e+"}",c.mediaInfos.push({title:"",type:"image",caption:d.label,value:{sourceURL:e,linkURL:e}})))}))}return c},
isImageServiceLayer:function(d){return d.url&&-1<d.url.indexOf("/ImageServer")},isTable:function(d){return"Table"===d.type},getConfigWithValidDataSource:function(d){var e={queries:[]},c=h.getInstanceSync();e.queries=n.filter(d.queries,l.hitch(this,function(d){return(d=d.webMapLayerId)?c.getLayerInfoById(d)?!0:!!c.getTableInfoById(d):!0}));return e},removePopupInfoUnsupportFields:function(d,e){var c=n.map(d.fields,l.hitch(this,function(c){return c.name}));e.fieldInfos&&0<e.fieldInfos.length&&(e.fieldInfos=
n.filter(e.fieldInfos,l.hitch(this,function(d){return 0<=c.indexOf(d.fieldName)})))},overridePopupTemplateMethodGetAttachments:function(g,e,c){g.getAttachments=function(g){var f=new q;try{var h=g.attributes[c],l=e+"/"+h+"/attachments";d({url:l,content:{f:"json"},callbackParamName:"callback"}).then(function(b){b=b.attachmentInfos;n.forEach(b,function(b){b.url=l+"/"+b.id;b.objectId=h});f.resolve(b)},function(b){f.reject(b)})}catch(b){console.error(b)}return f}}}})},"widgets/Query/setting/SingleQuerySetting":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./SingleQuerySetting.html dojo/_base/lang dojo/_base/html dojo/on dojo/query dojo/Evented dojo/Deferred jimu/utils jimu/dijit/Popup jimu/dijit/CheckBox jimu/dijit/TabContainer3 jimu/dijit/Message jimu/dijit/_QueryableLayerSourcePopup ../utils ./PopupConfig ./SpatialFilterConfig esri/request esri/symbols/jsonUtils jimu/dijit/Filter jimu/dijit/SymbolPicker jimu/dijit/LoadingShelter jimu/dijit/ImageChooser dijit/form/ValidationTextBox".split(" "),
function(l,n,q,p,h,d,g,e,c,m,f,s,t,b,r,k,a,u,v,B,x,A,y){return l([n,q,p,m],{baseClass:"jimu-widget-single-query-setting",templateString:h,popupConfig:null,spatialFilterConfig:null,jimuNls:null,_webMapLayerId:null,_defaultTaskIcon:null,map:null,nls:null,target:null,tr:null,appConfig:null,folderUrl:null,_layerDefinition:null,postMixInProperties:function(){this.inherited(arguments);this._defaultTaskIcon=this.folderUrl+"css/images/default_task_icon.png";this.jimuNls=window.jimuNls},postCreate:function(){this.inherited(arguments);
this._initSelf()},destroy:function(){this.target=null;this.emit("before-destroy");this.inherited(arguments)},setConfig:function(a){this.config=a;if(this._isObject(this.config)){var b=a.url||"";b&&"string"===typeof b&&(this.showBigShelter(),this.tab.showShelter(),this._layerDefinition&&this._layerDefinition.url===b?this._resetByConfig(this.config,this._layerDefinition).promise.always(d.hitch(this,function(){this.hideBigShelter();this.tab.hideShelter()})):(this._layerDefinition=null,x({url:b,handAs:"json",
content:{f:"json"},callbackParamName:"callback"}).then(d.hitch(this,function(a){this.domNode&&(this._layerDefinition=a,this._layerDefinition.url=b,this._resetByConfig(this.config,this._layerDefinition).promise.always(d.hitch(this,function(){this.hideBigShelter();this.tab.hideShelter()})))}),d.hitch(this,function(a){console.error(a);this.domNode&&this.hideBigShelter()}))))}},getConfig:function(){var a={url:"",name:"",icon:"",filter:null,showSQL:!1,spatialFilter:null,popupInfo:"",orderByFields:[],useLayerSymbol:!0,
resultsSymbol:"",keepResultsOnMapAfterCloseWidget:!0,enableExport:!1,singleResultLayer:!0,webMapLayerId:this._webMapLayerId};if(!this._layerDefinition)return this.scrollToDom(this.generalTable),new k({message:this.nls.setSourceTip}),null;a.url=this._layerDefinition.url;if(!this.queryNameTextBox.validate())return s.showValidationErrorTipForFormDijit(this.queryNameTextBox),null;a.name=this.queryNameTextBox.get("value");var b=this.imageChooser.getImageData();b===this._defaultTaskIcon&&(b="");a.icon=
b;b=this.filter.toJson();if(!b)return new k({message:this.nls.setFilterTip}),null;a.filter=b;a.showSQL=this.cbxShowSQL.getValue();if(u.isTable(this._layerDefinition))a.spatialFilter=null;else{b=this.spatialFilterConfig.getConfig();if(!b)return null;a.spatialFilter=b}b=this.popupConfig.getConfig();if(!b)return null;a.orderByFields=b.orderByFields;a.popupInfo=b.popupInfo;b=null;if(u.isTable(this._layerDefinition))a.useLayerSymbol=!1,a.resultsSymbol=null;else if(u.isImageServiceLayer(this._layerDefinition))if(a.useLayerSymbol=
!1,b=this.layerSymbolPicker.getSymbol())a.resultsSymbol=b.toJson();else return console.error("Can't get symbol from SymbolPicker"),null;else if(this.radioCustomSymbol.checked)if(a.useLayerSymbol=!1,b=this.layerSymbolPicker.getSymbol())a.resultsSymbol=b.toJson();else return console.error("Can't get symbol from SymbolPicker"),null;else a.useLayerSymbol=!0,a.resultsSymbol=null;a.keepResultsOnMapAfterCloseWidget=this.cbxKeepResults.getValue();a.singleResultLayer=this.radioOneLayerPerTask.checked;a.enableExport=
this.cbxExport.getValue();this.target._layerDefinition=this._layerDefinition;return this.target.singleConfig=a},scrollToDom:function(a){a=g.coords(a).y;var b=g.coords(this.domNode).y;this.domNode.parentNode.scrollTop=a-b},showBigShelter:function(){this.emit("loading")},hideBigShelter:function(){this.emit("unloading")},showQueryDefinition:function(){this.tab.selectTab(this.nls.queryDefinition)},showResultsSetting:function(){this.tab.selectTab(this.nls.results)},_initSelf:function(){this._initTabs();
this._initInfoTab();this._initFilterTab();this._initResultSettingTab();this._initOptionsTab()},_initTabs:function(){this.tab=new r({tabs:[{title:this.nls.infoText,content:this.infoTabNode},{title:this.nls.filters,content:this.definitionTabNode},{title:this.nls.results,content:this.resultsTabNode},{title:this.nls.optionsText,content:this.optionsTabNode}]});this.tab.placeAt(this.detailSection);this.tab.showShelter();this.own(e(this.tab,"tabChanged",d.hitch(this,function(a){a===this.nls.filters&&this._updateSqlDivByFilter()})))},
_initInfoTab:function(){this._setDefaultTaskIcon()},_onImageChooserDivClicked:function(a){this.imageChooser.mask&&(a=a.target||a.srcElement,a!==this.imageChooser.mask&&a!==this.imageChooser.fileInput&&s.simulateClickEvent(this.imageChooser.mask))},_initFilterTab:function(){this.filter=new y({enableAskForValues:!0,noFilterTip:this.nls.noFilterTip,style:"width:100%;"});this.filter.placeAt(this.filterDiv);this.cbxShowSQL=new b({label:this.nls.displaySQLTip});this.cbxShowSQL.labelNode&&g.addClass(this.cbxShowSQL.labelNode,
"light-stress");this.cbxShowSQL.check();this.cbxShowSQL.placeAt(this.showSQLSection);this._initSpatialFilterConfig()},_resetAttributeFilter:function(){this.filter.reset();this._updateSqlDivByFilter()},_updateSqlDivByFilter:function(){var a="",b=this.filter.toJson();b?a=b.expr?"1\x3d1"===b.expr?this.nls.noExpressionDefinedTip:b.expr:this.nls.specifyFilterAtRuntimeTip:console.log("can't get partsObj from filter");a&&(this.sqlDiv.innerHTML=a)},_onBtnFilterClicked:function(){var a=new t({width:680,height:485,
content:this.filter,buttons:[{label:this.nls.ok,onClick:d.hitch(this,function(){this.filter.toJson()&&(a.content=null,g.place(this.filter.domNode,this.filterDiv),this._updateSqlDivByFilter(),a.close())})},{label:this.nls.cancel,onClick:d.hitch(this,function(){a.content=null;g.place(this.filter.domNode,this.filterDiv);a.close()})}]})},_initSpatialFilterConfig:function(){this.spatialFilterConfig=new B({nls:this.nls});this.spatialFilterConfig.placeAt(this.spatialFilterDiv)},_initResultSettingTab:function(){this._initPopupConfig();
s.combineRadioCheckBoxWithLabel(this.radioServiceSymbol,this.labelServiceSymbol);s.combineRadioCheckBoxWithLabel(this.radioCustomSymbol,this.labelCustomSymbol);s.groupRadios([this.radioServiceSymbol,this.radioCustomSymbol])},_initPopupConfig:function(){this.popupConfig=new v({nls:this.nls,sqs:this});this.popupConfig.placeAt(this.popupContainer)},_showSymbolSection:function(){g.removeClass(this.symbolSection,"not-visible")},_hideSymbolSection:function(){g.addClass(this.symbolSection,"not-visible")},
_initOptionsTab:function(){this.cbxKeepResults=new b({label:this.nls.keepResultsTip});this.cbxKeepResults.placeAt(this.cbxKeepResultsDiv);this.cbxExport=new b({label:this.nls.exportTip});this.cbxExport.placeAt(this.exportSection);s.combineRadioCheckBoxWithLabel(this.radioOneLayerPerTask,this.labelOneLayerPerTask);s.combineRadioCheckBoxWithLabel(this.radioMultipleLayerPerTask,this.labelMultipleLayerPerTask);s.groupRadios([this.radioOneLayerPerTask,this.radioMultipleLayerPerTask])},_onQueryNameChanged:function(){var a=
c(".label",this.target)[0],b=this.queryNameTextBox.get("value");a.innerHTML=b;a.title=b},_clear:function(){this.urlTextBox.set("value","");this._layerDefinition=null;this.queryNameTextBox.set("value","");this._setDefaultTaskIcon();this._resetAttributeFilter();g.removeClass(this.spatialFilterDiv,"not-visible");this.spatialFilterConfig.reset();this.cbxShowSQL.check();this.tab.showShelter();this.popupConfig.onLayerChange(!0);this.radioServiceSymbol.disabled=!1;this.radioCustomSymbol.checked=!0;this.layerSymbolPicker.reset();
this.cbxKeepResults.uncheck();this.radioOneLayerPerTask.checked=!0;this.cbxExport.uncheck()},_onBtnSetSourceClicked:function(){var b=new a({titleLabel:this.nls.setDataSource,dijitArgs:{multiple:!1,createMapResponse:this.map.webMapResponse,portalUrl:this.appConfig.portalUrl,style:{height:"100%"}}});this.own(e(b,"ok",d.hitch(this,function(a){var c=b.getSelectedRadioType();b.close();b=null;this.setNewLayerDefinition(a,c,null)})));this.own(e(b,"cancel",d.hitch(this,function(){b.close();b=null})));b.startup()},
setNewLayerDefinition:function(a,b,c){a.definition.name=a.name;a.definition.url=a.url;a.url!==(this._layerDefinition&&this._layerDefinition.url)&&this._resetByNewLayerDefinition(a,b,c)},_resetByNewLayerDefinition:function(a,b,c){var f=a.definition;this._clear();if(f){var e=null;"map"===b&&a.layerInfo&&(e=a.layerInfo.id);this._layerDefinition=f;this._webMapLayerId=e;a=f.url;this.urlTextBox.set("value",a);this.queryNameTextBox.set("value",c||f.name);this.tab.hideShelter();this._resetAttributeFilter();
this._layerDefinition&&this.filter.buildByExpr(a,"1\x3d1",this._layerDefinition).promise.always(d.hitch(this,function(){this._updateSqlDivByFilter()}));u.isTable(this._layerDefinition)?g.addClass(this.spatialFilterDiv,"not-visible"):g.removeClass(this.spatialFilterDiv,"not-visible");this.popupConfig.onLayerChange(!!this._webMapLayerId);this._webMapLayerId&&this.popupConfig.setConfig({popupInfo:{readFromWebMap:!0},orderByFields:[]});this._handleSymbolSection(f)}},_handleSymbolSection:function(a,b){var c=
"";this._showSymbolSection();if(u.isTable(a))this.radioServiceSymbol.disabled=!0,this._hideSymbolSection(),this.layerSymbolPicker.reset();else if(u.isImageServiceLayer(a))this.radioServiceSymbol.disabled=!0,this.radioCustomSymbol.checked=!0,c="fill";else if(this.radioServiceSymbol.disabled=!1,a.geometryType){var d=s.getTypeByGeometryType(a.geometryType);"point"===d?c="marker":"polyline"===d?c="line":"polygon"===d&&(c="fill")}c&&(this.layerSymbolPicker.showByType(c),b&&this.layerSymbolPicker.showBySymbol(b))},
_setDefaultTaskIcon:function(){this.imageChooser.setDefaultSelfSrc(this._defaultTaskIcon)},_resetByConfig:function(a,b){var c=new f,e=d.clone(a);this._upgradeConfigForLowerVersion(b,e);this._webMapLayerId=e.webMapLayerId;this.urlTextBox.set("value",e.url);this.queryNameTextBox.set("value",e.name||"");e.icon?this.imageChooser.setDefaultSelfSrc(e.icon):this._setDefaultTaskIcon();var k=e.filter;this._resetAttributeFilter();var r=null,r=this._isObject(k)?this.filter.buildByFilterObj(b.url,k,b):this.filter.buildByExpr(b.url,
"1\x3d1",b);r.promise.always(d.hitch(this,function(){this._updateSqlDivByFilter();c.resolve()}));this.cbxShowSQL.setValue(e.showSQL);this.spatialFilterConfig.reset();u.isTable(this._layerDefinition)?g.addClass(this.spatialFilterDiv,"not-visible"):(g.removeClass(this.spatialFilterDiv,"not-visible"),e.spatialFilter&&this.spatialFilterConfig.setConfig(e.spatialFilter));this.popupConfig.onLayerChange(!!this._webMapLayerId);this.popupConfig.setConfig({popupInfo:e.popupInfo,orderByFields:e.orderByFields});
k=null;if(e.resultsSymbol)try{k=A.fromJson(e.resultsSymbol)}catch(h){console.error(h)}this._handleSymbolSection(b,k);e.useLayerSymbol&&(this.radioServiceSymbol.checked=!0);this.cbxKeepResults.setValue(e.keepResultsOnMapAfterCloseWidget);e.singleResultLayer?this.radioOneLayerPerTask.checked=!0:this.radioMultipleLayerPerTask.checked=!0;this.cbxExport.setValue(e.enableExport);return c},_upgradeConfigForLowerVersion:function(a,b){b.popup&&!b.popupInfo&&(b.popupInfo=u.upgradePopupToPopupInfo(a,b.popup))},
_isObject:function(a){return a&&"object"===typeof a}})})},"widgets/Query/setting/PopupConfig":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./PopupConfig.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query jimu/utils jimu/dijit/SimpleTable jimu/dijit/Popup dijit/TooltipDialog dijit/Menu dijit/MenuItem dijit/popup ./SortFields ../utils".split(" "),function(l,n,q,p,h,d,g,e,c,m,f,s,t,b,r,k,a,u,v){return l([n,
q,p],{baseClass:"jimu-query-setting-popup-config",templateString:h,_currentOrderByFields:null,_validSortFieldTypes:"esriFieldTypeOID esriFieldTypeString esriFieldTypeDate esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble".split(" "),nls:null,sqs:null,postCreate:function(){this.inherited(arguments);f.combineRadioCheckBoxWithLabel(this.portalRadio,this.portalLabel);f.combineRadioCheckBoxWithLabel(this.customRadio,this.customLabel);var a=f.groupRadios([this.portalRadio,
this.customRadio],d.hitch(this,this._updateClassWhenRadioChanged));e.forEach(a,d.hitch(this,function(a){this.own(a)}));this._currentOrderByFields=[];this._initFieldsTable();this._initAddFields();this.onLayerChange(!0);this._updateClassWhenRadioChanged()},onLayerChange:function(a){this._clear();this.portalRadio.disabled=a?!1:!0;this._updateClassWhenRadioChanged();if(a=this._getLayerDefinition()){this._clear();var b={popupInfo:null,orderByFields:[]};b.popupInfo=this._getDefaultPopupInfo();this.setConfig(b);
this._updateSortingIcon(a)}},setConfig:function(a){this._clear();this.config=d.clone(a);var b=this._getLayerDefinition();b&&(this._updateSortingIcon(b),this._setPopupInfoForUI(a.popupInfo),this._setOrderByFields(a.orderByFields))},getConfig:function(){var a={popupInfo:this._getPopupInfoByUI(),orderByFields:this._getOrderByFields()};return!a.popupInfo?null:a},destroy:function(){this.sqs=null;this.titleTextBox.focusNode.blur();this.inherited(arguments)},_clear:function(){g.addClass(this.sortFieldsIcon,
"jimu-state-disabled");this._currentOrderByFields=[];this.titleTextBox.set("value","");this.displayFieldsTextBox.set("value","");this.fieldsTable.clear();this._resetMenu();this._addEmptyMenuItem()},_getLayerDefinition:function(){return this.sqs._layerDefinition},_updateClassWhenRadioChanged:function(){!this.portalRadio.disabled&&this.portalRadio.checked?g.addClass(this.domNode,"portal-radio-selected"):g.removeClass(this.domNode,"portal-radio-selected")},_setPopupInfoForUI:function(a){var b=this._getDefaultPopupInfo();
this._setCustomPopupInfoForUI(b);!this.portalRadio.disabled&&a.readFromWebMap?(this.customRadio.checked=!1,this.portalRadio.checked=!0):(this.portalRadio.checked=!1,this.customRadio.checked=!0,this._setCustomPopupInfoForUI(a));this._updateClassWhenRadioChanged()},_setCustomPopupInfoForUI:function(a){var b=this._getLayerDefinition(),c=v.getPortalFieldInfosWithoutShape(b,a.fieldInfos);a.title&&"string"===typeof a.title?this.titleTextBox.set("value",a.title||""):this.titleTextBox.set("value","");this._updateDisplayFieldsTextBox(c);
var f=[],k=e.map(b.fields,d.hitch(this,function(a){return a.name}));e.forEach(a.mediaInfos,d.hitch(this,function(a){if(0<k.length&&"image"===a.type&&a.value){var b=a.value.sourceURL,c=null;e.some(k,d.hitch(this,function(a){return"{"+a+"}"===b?(c=a,!0):!1}));c&&f.push(c)}}));this._resetMenu();this.fieldsTable.clear();0<c.length?e.forEach(c,d.hitch(this,function(a){this._addMenuItem(a);var b=0<=f.indexOf(a.fieldName);this._addRow(a,b)})):this._addEmptyMenuItem()},_updateDisplayFieldsTextBox:function(a){a=
e.filter(a,d.hitch(this,function(a){return a.visible}));a=e.map(a,function(a){return a.label}).join(";  ");this.displayFieldsTextBox.set("value",a)},_addRow:function(a,b){var c=d.clone(a);c.specialType=b?"image":"none";this.fieldsTable.addRow(c)},_addMenuItem:function(a){var b=new k({label:a.fieldName+" {"+a.fieldName+"}",onClick:d.hitch(this,function(){var b=this.titleTextBox.get("value")+"{"+a.fieldName+"}";this.titleTextBox.set("value",b);b=this.menu.getParent();g.setStyle(b.domNode.parentNode,
"display","none")})});this.menu.addChild(b)},_addEmptyMenuItem:function(){var a=new k({label:this.nls.noField,onClick:d.hitch(this,function(){var a=this.menu.getParent();g.setStyle(a.domNode.parentNode,"display","none")})});this.menu.addChild(a)},_getPopupInfoByUI:function(){var a=null;if(this.customRadio.checked){if(a=this._getCustomPopupInfoByUI())a.readFromWebMap=!1}else a={readFromWebMap:!0};return a},_getCustomPopupInfoByUI:function(){var a={title:"",fieldInfos:[],description:null,showAttachments:!1,
mediaInfos:[]},b=this._getLayerDefinition();if(!this.titleTextBox.validate())return this.sqs.showResultsSetting(),this.sqs.scrollToDom(this.titleTextBox.domNode),f.showValidationErrorTipForFormDijit(this.titleTextBox),null;a.title=this.titleTextBox.get("value");a.showAttachments=!!b.hasAttachments;b=this._getPortalFieldInfosAndMediaInfosByUI();a.fieldInfos=b.portalFieldInfos;a.mediaInfos=b.mediaInfos;return a},_getPortalFieldInfosAndMediaInfosByUI:function(){var a=this.fieldsTable.getData(),b=[];
return{portalFieldInfos:e.map(a,d.hitch(this,function(a){var c=a.fieldName,d=this._getDefaultPortalFieldInfo(c);d.label=a.label||d.label;if((d.visible=a.visible)&&"image"===a.specialType)a="{"+c+"}",b.push({title:"",type:"image",caption:c,value:{sourceURL:a,linkURL:a}});return d})),mediaInfos:b}},_getDefaultPopupInfo:function(){var a=this._getLayerDefinition();return v.getDefaultPopupInfo(a,!1)},_getDefaultPortalFieldInfo:function(a){a=this._getServiceFildInfo(a);return f.getDefaultPortalFieldInfo(a)},
_getServiceFildInfo:function(a){var b=null,b=this._getLayerDefinition();return b=f.getFieldInfoByFieldName(b.fields,a)},_getSortedFieldInfos:function(a,b){var c=[],f={};e.forEach(b,d.hitch(this,function(a){f[a.name]=a}));var k=[],k=k.concat(a);e.forEach(b,d.hitch(this,function(a){a=a.name;0>k.indexOf(a)&&k.push(a)}));return c=e.map(k,d.hitch(this,function(a){return f[a]}))},_onBtnSetDisplayFieldsClicked:function(){var a=new t({width:640,height:380,titleLabel:this.nls.setDisplayFields,content:this.displayFieldsDiv,
onClose:d.hitch(this,function(){g.place(this.displayFieldsDiv,this.displayFieldsSection);a.content=""}),buttons:[{label:this.nls.ok,onClick:d.hitch(this,function(){var b=this._getPortalFieldInfosAndMediaInfosByUI().portalFieldInfos;this._updateDisplayFieldsTextBox(b);a.close()})},{label:this.nls.cancel,onClick:d.hitch(this,function(){a.close()})}]})},_setOrderByFields:function(a){a=a||[];var b=this.sortFieldsDiv.innerHTML="";a=e.map(a,d.hitch(this,function(c,d){var f=c.split(" "),e=f[0],k="ASC";f[1]&&
"string"===typeof f[1]&&(f[1]=f[1].toUpperCase(),"DESC"===f[1]&&(k="DESC"));f=k.toLowerCase();f="\x3cspan\x3e"+e+'\x3c/span\x3e\x3cspan class\x3d"sort-arrow '+f+'"\x3e\x3c/span\x3e';d!==a.length-1&&(f+="\x3cspan\x3e,\x26nbsp;\x3c/span\x3e");b+=f;return e+" "+k}));b&&(b="\x3cspan\x3e\x26nbsp;\x26nbsp;\x3c/span\x3e"+b);this.sortFieldsDiv.innerHTML=b;this._currentOrderByFields=a},_getOrderByFields:function(){var a=this._getLayerDefinition();return this._shouldEnableSorting(a)?this._currentOrderByFields:
[]},_updateSortingIcon:function(a){this._shouldEnableSorting(a)?g.removeClass(this.sortFieldsIcon,"jimu-state-disabled"):g.addClass(this.sortFieldsIcon,"jimu-state-disabled")},_shouldEnableSorting:function(a){return this._isServiceSupportsPagination(a)&&this._isServiceSupportsOrderBy(a)},_onBtnSortFieldsClicked:function(){var a=this._getLayerDefinition();if(a&&this._shouldEnableSorting(a))var b=new u({nls:this.nls,layerDefinition:a,orderByFields:d.clone(this._currentOrderByFields),validSortFieldTypes:this._validSortFieldTypes}),
c=new t({width:640,height:380,titleLabel:this.nls.setSortingFields,content:b,onClose:d.hitch(this,function(){b.destroy()}),buttons:[{label:this.nls.ok,onClick:d.hitch(this,function(){var a=b.getOrderByFields();this._setOrderByFields(a);c.close()})},{label:this.nls.cancel,onClick:d.hitch(this,function(){c.close()})}]})},_initFieldsTable:function(){var a={autoHeight:!1,style:"height:187px",fields:[{name:"visible",title:this.nls.visibility,type:"checkbox"},{name:"fieldName",title:this.nls.name,type:"text",
editable:!1},{name:"label",title:this.nls.alias,type:"text",editable:!0},{name:"specialType",title:this.nls.specialType,type:"extension",create:d.hitch(this,this._createSpecialType),setValue:d.hitch(this,this._setValue4SpecialType),getValue:d.hitch(this,this._getValueOfSpecialType)},{name:"actions",title:this.nls.actions,type:"actions",actions:["up","down"]}]};this.fieldsTable=new s(a);this.fieldsTable.placeAt(this.fieldsContainer);this.fieldsTable.startup()},_createSpecialType:function(a){a=g.create("select",
{},a);g.create("option",{value:"none",label:this.nls.none,selected:!0,innerHTML:this.nls.none},a);g.create("option",{value:"image",label:this.nls.image,innerHTML:this.nls.image},a)},_setValue4SpecialType:function(a,b){m("select",a)[0].value=b},_getValueOfSpecialType:function(a){return m("select",a)[0].value},_initAddFields:function(){var f=g.create("div");this.tooltipDialog=new b({style:"cursor:pointer",content:f});this.menu=new r;this.menu.placeAt(f);this.own(c(document.body,"click",d.hitch(this,
function(){a.close(this.tooltipDialog)})))},_onAddClicked:function(b){b.stopPropagation();b.preventDefault();a.close(this.tooltipDialog);a.open({popup:this.tooltipDialog,around:this.btnAddFields})},_resetMenu:function(){var a=this.menu.getChildren();e.forEach(a,d.hitch(this,function(a){this.menu.removeChild(a)}))},_isServiceSupportsPagination:function(a){var b=!1;a.advancedQueryCapabilities&&a.advancedQueryCapabilities.supportsPagination&&(b=!0);return b},_isServiceSupportsOrderBy:function(a){var b=
!1;a.advancedQueryCapabilities&&a.advancedQueryCapabilities.supportsOrderBy&&(b=!0);return b}})})},"widgets/Query/setting/SortFields":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/registry dijit/form/Select dojo/text!./SortFields.html dojo/on dojo/query dojo/_base/lang dojo/_base/array dojo/_base/html jimu/dijit/SimpleTable".split(" "),function(l,n,q,p,h,d,g,e,c,m,f,s,t){return l([n,q,p],{baseClass:"jimu-query-setting-sort-fields",
templateString:g,_allFieldNames:null,_sortTipClassName:"sort-tip",_fieldNameSelectClassName:"field-name-select",_sortTypeSelectClassName:"sort-type-select",nls:null,layerDefinition:null,orderByFields:null,validSortFieldTypes:[],postCreate:function(){this.inherited(arguments);var b=f.filter(this.layerDefinition.fields,m.hitch(this,function(b){return 0<=this.validSortFieldTypes.indexOf(b.type)}));this._allFieldNames=f.map(b,function(b){return b.name});this._initTable();this.orderByFields?this._setOrderByFields(this.orderByFields):
this.orderByFields=[]},_initTable:function(){var b={autoHeight:!1,style:"height:187px",fields:[{name:"sortTip",title:this.nls.field,type:"text",width:"100px"},{name:"fieldName",title:"",type:"extension",create:m.hitch(this,this._create4FieldName),setValue:m.hitch(this,this._setValue4FieldName),getValue:m.hitch(this,this._getValue4FieldName)},{name:"sortType",title:this.nls.sortingOrder,type:"extension",create:m.hitch(this,this._create4SortType),setValue:m.hitch(this,this._setValue4SortType),getValue:m.hitch(this,
this._getValue4SortType)},{name:"actions",title:this.nls.actions,type:"actions",actions:["up","down","delete"],width:"120px"}]};this.table=new t(b);this.own(e(this.table,"row-up",m.hitch(this,this._onTableRowUp)));this.own(e(this.table,"row-down",m.hitch(this,this._onTableRowDown)));this.table.placeAt(this.tableDiv);this.table.startup()},getOrderByFields:function(){var b=this.table.getData();return f.map(b,m.hitch(this,function(b){return b.fieldName+" "+b.sortType}))},_getFieldAlias:function(b){for(var c=
b,d=this.layerDefinition.fields,a=0;a<d.length;a++)if(d[a].name===b){c=d[a].alias||b;break}return c},_getRestFields:function(){var b=this._getAllFieldSelects(),c=f.map(b,m.hitch(this,function(b){return b.get("value")}));return f.filter(this._allFieldNames,m.hitch(this,function(b){return 0>c.indexOf(b)}))},_onAddNewClicked:function(){var b=this._getRestFields();if(0!==b.length){var c="",c=0===this.table.getRows().length?this.nls.sortBy:this.nls.thenBy;this.table.addRow({sortTip:c,fieldName:b[0],sortType:"ASC"})}},
_setOrderByFields:function(b){this.table.clear();b=b||[];f.forEach(b,m.hitch(this,function(b,c){var a=b.split(" "),d=a[0],f="ASC";a[1]&&"string"===typeof a[1]&&(a[1]=a[1].toUpperCase(),"DESC"===a[1]&&(f="DESC"));a="";a=0===c?this.nls.sortBy:this.nls.thenBy;this.table.addRow({sortTip:a,fieldName:d,sortType:f})}))},_getAllFieldSelects:function(){var b=c("."+this._fieldNameSelectClassName,this.table.tbody);return f.map(b,m.hitch(this,function(b){return h.byNode(b)}))},_getSelectFromTd:function(b,d){var f=
c("."+d,b)[0];return h.byNode(f)},_onTableRowUp:function(){this._resetSortTips()},_onTableRowDown:function(){this._resetSortTips()},_getAllSortTipDivs:function(){return c(".sortTip .normal-text-div",this.table.tbody)},_resetSortTips:function(){var b=this.table.getRows();f.forEach(b,m.hitch(this,function(b,c){var a="",a=0===c?this.nls.sortBy:this.nls.thenBy;this.table.editRow(b,{sortTip:a})}));b=this._getAllSortTipDivs();f.forEach(b,m.hitch(this,function(b,c){b.innerHTML=0===c?this.nls.sortBy:this.nls.thenBy}))},
_create4FieldName:function(b){var c=this._getRestFields(),k=new d({style:"width:120px;height:20px;"});s.addClass(k.domNode,this._fieldNameSelectClassName);k.placeAt(b);f.forEach(c,m.hitch(this,function(a){var b=this._getFieldAlias(a);k.addOption({value:a,label:b})}));this.own(e(k,"change",m.hitch(this,this._onFieldNameSelectChanged)))},_setValue4FieldName:function(b,c){this._getSelectFromTd(b,this._fieldNameSelectClassName).set("value",c)},_getValue4FieldName:function(b){return this._getSelectFromTd(b,
this._fieldNameSelectClassName).get("value")},_onFieldNameSelectChanged:function(){var b=this._getAllFieldSelects();f.forEach(b,m.hitch(this,function(b){var c=b.get("value"),a=b.getOptions(),a=f.filter(a,m.hitch(this,function(a){return a.value!==c}));b.removeOption(a);a=this._getRestFields();f.forEach(a,m.hitch(this,function(a){if(a!==c){var d=this._getFieldAlias(a);b.addOption({value:a,label:d})}}))}))},_create4SortType:function(b){var c=new d({style:"width:120px;height:20px;"});s.addClass(c.domNode,
this._sortTypeSelectClassName);c.placeAt(b);c.addOption({value:"ASC",label:this.nls.ascending,selected:!0});c.addOption({value:"DESC",label:this.nls.descending})},_setValue4SortType:function(b,c){var d=this._getSelectFromTd(b,this._sortTypeSelectClassName);("ASC"===c||"DESC"===c)&&d.set("value",c)},_getValue4SortType:function(b){return this._getSelectFromTd(b,this._sortTypeSelectClassName).get("value")}})})},"widgets/Query/setting/SpatialFilterConfig":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./SpatialFilterConfig.html dojo/on dojo/query dojo/_base/lang dojo/_base/html dojo/_base/array ./SearchDistance ./RelationshipsSelector jimu/utils jimu/dijit/Popup jimu/dijit/CheckBox".split(" "),
function(l,n,q,p,h,d,g,e,c,m,f,s,t,b,r){return l([n,q,p],{baseClass:"jimu-query-setting-spatialfilter-config",templateString:h,_allRelationshipInfos:null,nls:null,config:null,postCreate:function(){this.inherited(arguments);this._allRelationshipInfos=[{relationship:"SPATIAL_REL_WITHIN",nls:this.nls.contain,label:this.nls.contain},{relationship:"SPATIAL_REL_CROSSES",nls:this.nls.cross,label:this.nls.cross},{relationship:"SPATIAL_REL_ENVELOPEINTERSECTS",nls:this.nls.envelopeIntersect,label:this.nls.envelopeIntersect},
{relationship:"SPATIAL_REL_INDEXINTERSECTS",nls:this.nls.indexIntersect,label:this.nls.indexIntersect},{relationship:"SPATIAL_REL_INTERSECTS",nls:this.nls.intersect,label:this.nls.intersect},{relationship:"SPATIAL_REL_OVERLAPS",nls:this.nls.overlap,label:this.nls.overlap},{relationship:"SPATIAL_REL_TOUCHES",nls:this.nls.touch,label:this.nls.touch},{relationship:"SPATIAL_REL_CONTAINS",nls:this.nls.within,label:this.nls.within}];this._initSelf();this.reset();this.config&&this.setConfig(this.config)},
setConfig:function(b){this.reset();this.config=e.clone(b);this.config.currentMapExtent?(this.cbxMapExtent.check(),this.config.currentMapExtent["default"]?this._makeDefaultItem(this.mapExtentSection):this._makeNotDefaultItem(this.mapExtentSection)):this.cbxMapExtent.uncheck();this.config.drawing?(this.cbxDrawGraphic.check(),this.config.drawing["default"]?this._makeDefaultItem(this.drawGraphicSection):this._makeNotDefaultItem(this.drawGraphicSection),this._selectDrawingTools(this.config.drawing.geometryTypes),
this.config.drawing.buffer?(this.cbxDrawBufferSetting.check(),this.drawingSearchDistance.setConfig(this.config.drawing.buffer)):this.cbxDrawBufferSetting.uncheck()):this.cbxDrawGraphic.uncheck();this.config.useFeatures?(this.cbxUseFeatures.check(),this.config.useFeatures["default"]?this._makeDefaultItem(this.useFeaturesSection):this._makeNotDefaultItem(this.useFeaturesSection),this._setRelationshipsForTextBox(this.config.useFeatures.relationships),this.config.useFeatures.buffer?(this.cbxFeatureBufferSetting.check(),
this.featuresSearchDistance.setConfig(this.config.useFeatures.buffer)):this.cbxFeatureBufferSetting.uncheck()):this.cbxUseFeatures.uncheck();this.config.fullLayerExtent?(this.cbxLayerExtent.check(),this.config.fullLayerExtent["default"]?this._makeDefaultItem(this.layerExtentSection):this._makeNotDefaultItem(this.layerExtentSection)):this.cbxLayerExtent.uncheck();m.forEach([this.cbxMapExtent,this.cbxDrawGraphic,this.cbxUseFeatures,this.cbxLayerExtent],e.hitch(this,function(a){a.labelNode&&c.addClass(a.labelNode,
"light-stress")}));this._hideDrawGraphicSettting();this._hideFeaturesSetting()},getConfig:function(){var b={currentMapExtent:null,drawing:null,useFeatures:null,fullLayerExtent:null};this.cbxMapExtent.getValue()&&(b.currentMapExtent={"default":this._isDefaultItem(this.mapExtentSection)});if(this.cbxDrawGraphic.getValue()&&(b.drawing={"default":!1,geometryTypes:[],buffer:null},b.drawing["default"]=this._isDefaultItem(this.drawGraphicSection),b.drawing.geometryTypes=this._getSelectedDrawingTools(),this.cbxDrawBufferSetting.getValue())){var a=
this.drawingSearchDistance.getConfig();if(!a)return;b.drawing.buffer=a}if(this.cbxUseFeatures.getValue()&&(b.useFeatures={"default":!1,relationships:[],buffer:null},b.useFeatures["default"]=this._isDefaultItem(this.useFeaturesSection),b.useFeatures.relationships=this._getRelationshipsFromTextBox(),this.cbxFeatureBufferSetting.getValue())){a=this.featuresSearchDistance.getConfig();if(!a)return;b.useFeatures.buffer=a}this.cbxLayerExtent.getValue()&&(b.fullLayerExtent={"default":this._isDefaultItem(this.layerExtentSection)});
return b},reset:function(){this.cbxMapExtent.uncheck();this.cbxDrawGraphic.uncheck();this._selectDrawingTools(["POINT","POLYLINE","EXTENT"]);this.drawingSearchDistance.reset();this._hideDrawGraphicSettting();this.cbxUseFeatures.uncheck();this._resetToDefaultRelationshipForTextBox();this.featuresSearchDistance.reset();this._hideFeaturesSetting();this.cbxLayerExtent.uncheck()},_initSelf:function(){this.cbxMapExtent=new r({label:this.nls.useCurrentExtentTip,onChange:e.hitch(this,function(){this._onCbxChanged(this.cbxMapExtent,
this.mapExtentSection)})});this.cbxMapExtent.placeAt(this.cbxMapExtentDiv);this.cbxDrawGraphic=new r({label:this.nls.useDrawGraphicTip,onChange:e.hitch(this,function(b){b?this._showDrawGraphicSettting():this._hideDrawGraphicSettting();this._onCbxChanged(this.cbxDrawGraphic,this.drawGraphicSection)})});this.cbxDrawGraphic.placeAt(this.cbxDrawGraphicDiv);this.cbxUseFeatures=new r({label:this.nls.useFeaturesTip,onChange:e.hitch(this,function(b){b?this._showFeaturesSetting():this._hideFeaturesSetting();
this._onCbxChanged(this.cbxUseFeatures,this.useFeaturesSection)})});this.cbxUseFeatures.placeAt(this.cbxUseFeaturesDiv);this.cbxLayerExtent=new r({label:this.nls.noSpatialLimitTip,onChange:e.hitch(this,function(){this._onCbxChanged(this.cbxLayerExtent,this.layerExtentSection)})});this.cbxLayerExtent.placeAt(this.cbxLayerExtentDiv);this.drawingSearchDistance=new f({nls:this.nls});this.drawingSearchDistance.placeAt(this.drawingSearchDistanceDiv);this.cbxDrawBufferSetting=new r({label:this.nls.bufferSettings});
c.addClass(this.cbxDrawBufferSetting.domNode,"buffer-checkbox");this.own(d(this.cbxDrawBufferSetting,"change",e.hitch(this,function(){this.cbxDrawBufferSetting.getValue()?this.drawingSearchDistance.enable():this.drawingSearchDistance.disable()})));this.cbxDrawBufferSetting.placeAt(this.drawBufferSettingCbxDiv);this.featuresSearchDistance=new f({nls:this.nls});this.featuresSearchDistance.placeAt(this.featuresSearchDistanceDiv);this.cbxFeatureBufferSetting=new r({label:this.nls.bufferSettings});c.addClass(this.cbxFeatureBufferSetting.domNode,
"buffer-checkbox");this.own(d(this.cbxFeatureBufferSetting,"change",e.hitch(this,function(){this.cbxFeatureBufferSetting.getValue()?this.featuresSearchDistance.enable():this.featuresSearchDistance.disable()})));this.cbxFeatureBufferSetting.placeAt(this.featureBufferSettingCbxDiv)},_onCbxChanged:function(b,a){b.getValue()?0===g(".spatial-filter-item.default",this.domNode).length&&this._makeDefaultItem(a):this._makeNotDefaultItem(a)},_onBtnMakeDefaultClicked:function(b){if(b=t.getAncestorDom(b.target||
b.srcElement,e.hitch(this,function(a){return c.hasClass(a,"spatial-filter-item")}),this.domNode)){var a=this._getCbxBySpatialFiterItemDom(b);a&&(a.getValue()?this._makeDefaultItem(b):this._makeNotDefaultItem(b))}},_isDefaultItem:function(b){return c.hasClass(b,"default")},_makeDefaultItem:function(b){var a=this._getCbxBySpatialFiterItemDom(b);a&&a.getValue()&&(g(".spatial-filter-item",this.domNode).removeClass("default"),c.addClass(b,"default"))},_makeNotDefaultItem:function(b){var a=m.filter([{spatialFilterItemDom:this.mapExtentSection,
cbx:this.cbxMapExtent},{spatialFilterItemDom:this.drawGraphicSection,cbx:this.cbxDrawGraphic},{spatialFilterItemDom:this.useFeaturesSection,cbx:this.cbxUseFeatures},{spatialFilterItemDom:this.layerExtentSection,cbx:this.cbxLayerExtent}],function(a){return a.cbx.getValue()});0===a.length?g(".spatial-filter-item",this.domNode).removeClass("default"):1===a.length?this._makeDefaultItem(a[0].spatialFilterItemDom):2<=a.length&&(a=m.filter(a,function(a){return a.spatialFilterItemDom!==b}),m.some(a,function(a){return c.hasClass(a.spatialFilterItemDom,
"default")})||this._makeDefaultItem(a[0].spatialFilterItemDom))},_getCbxBySpatialFiterItemDom:function(b){var a=null;b===this.mapExtentSection?a=this.cbxMapExtent:b===this.drawGraphicSection?a=this.cbxDrawGraphic:b===this.useFeaturesSection?a=this.cbxUseFeatures:b===this.layerExtentSection&&(a=this.cbxLayerExtent);return a},_onDrawGraphicArrowIconClicked:function(){c.hasClass(this.drawGraphicSettting,"hidden-setting")?this._showDrawGraphicSettting():this._hideDrawGraphicSettting()},_showDrawGraphicSettting:function(){c.removeClass(this.drawGraphicSettting,
"hidden-setting");this._updateDrawGraphicArrowIcon();c.addClass(this.featuresSetting,"hidden-setting");this._updateFeaturesArrowIcon()},_hideDrawGraphicSettting:function(){c.addClass(this.drawGraphicSettting,"hidden-setting");this._updateDrawGraphicArrowIcon()},_updateDrawGraphicArrowIcon:function(){c.hasClass(this.drawGraphicSettting,"hidden-setting")?c.removeClass(this.arrowIconDrawGraphic,"opened"):c.addClass(this.arrowIconDrawGraphic,"opened")},_onFeaturesArrowIconClicked:function(){c.hasClass(this.featuresSetting,
"hidden-setting")?this._showFeaturesSetting():this._hideFeaturesSetting()},_showFeaturesSetting:function(){c.addClass(this.drawGraphicSettting,"hidden-setting");this._updateDrawGraphicArrowIcon();c.removeClass(this.featuresSetting,"hidden-setting");this._updateFeaturesArrowIcon()},_hideFeaturesSetting:function(){c.addClass(this.featuresSetting,"hidden-setting");this._updateFeaturesArrowIcon()},_updateFeaturesArrowIcon:function(){c.hasClass(this.featuresSetting,"hidden-setting")?c.removeClass(this.arrowIconFeatures,
"opened"):c.addClass(this.arrowIconFeatures,"opened")},_onDrawingToolsContainerClicked:function(b){b=b.target||b.srcElement;var a=null;c.hasClass(b,"draw-item")?a=b:c.hasClass(b,"draw-item-icon")&&(a=b.parentNode);a&&(c.toggleClass(a,"selected"),0===g(".selected",this.drawingToolsContainer).length&&c.addClass(a,"selected"))},_selectDrawingTools:function(b){var a=g(".draw-item",this.drawingToolsContainer);m.forEach(a,e.hitch(this,function(a){var d=a.getAttribute("data-geotype");0<=b.indexOf(d)?c.addClass(a,
"selected"):c.removeClass(a,"selected")}))},_getSelectedDrawingTools:function(){var b=[],b=g(".draw-item.selected",this.drawingToolsContainer);return b=m.map(b,e.hitch(this,function(a){return a.getAttribute("data-geotype")}))},_onBtnRelationshipClicked:function(){var c=this._getRelationshipsFromTextBox(),a=new s({nls:this.nls,allRelationshipInfos:e.clone(this._allRelationshipInfos)}),d=new b({width:640,height:405,titleLabel:this.nls.setSpatialRelationships,content:a,onClose:e.hitch(this,function(){a.destroy();
a=null}),buttons:[{label:this.nls.ok,onClick:e.hitch(this,function(){var b=a.getSelectedRelationships();this._setRelationshipsForTextBox(b);d.close()})},{label:this.nls.cancel,onClick:e.hitch(this,function(){d.close()})}]});a.setSelectedRelationshipInfos(c)},_resetToDefaultRelationshipForTextBox:function(){this._setRelationshipsForTextBox([{relationship:"SPATIAL_REL_INTERSECTS",label:this.nls.intersect}])},_setRelationshipsForTextBox:function(b){this.relationshipTextBox.relationships=e.clone(b);b=
m.map(b,function(a){return a.label}).join("; ");this.relationshipTextBox.set("value",b);this.relationshipTextBox.domNode.title=b},_getRelationshipsFromTextBox:function(){var b=[];this.relationshipTextBox.relationships&&(b=m.map(this.relationshipTextBox.relationships,function(a){return{relationship:a.relationship,label:a.label}}));return b}})})},"widgets/Query/setting/SearchDistance":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./SearchDistance.html dojo/_base/lang jimu/utils dijit/form/Select dijit/form/NumberTextBox".split(" "),
function(l,n,q,p,h,d,g){return l([n,q,p],{baseClass:"jimu-query-setting-searchdistance",templateString:h,_allUnitInfos:null,nls:null,config:null,postCreate:function(){this.inherited(arguments);this.reset();this.config&&this.setConfig(this.config)},setConfig:function(e){this.reset();this.config=d.clone(e);this.numberTextBox.set("value",this.config.defaultDistance);this.defaultUnitSelect.set("value",this.config.defaultUnit)},getConfig:function(){var d={defaultDistance:0,defaultUnit:""};if(this.numberTextBox.validate())return d.defaultDistance=
this.numberTextBox.get("value"),d.defaultUnit=this.defaultUnitSelect.get("value"),d;g.showValidationErrorTipForFormDijit(this.numberTextBox)},reset:function(){this.numberTextBox.set("value",0);this.defaultUnitSelect.set("value","MILES")},enable:function(){this.numberTextBox.set("disabled",!1);this.defaultUnitSelect.set("disabled",!1)},disable:function(){this.numberTextBox.set("disabled",!0);this.defaultUnitSelect.set("disabled",!0)}})})},"widgets/Query/setting/RelationshipsSelector":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/_base/array jimu/dijit/SimpleTable".split(" "),
function(l,n,q,p,h,d,g){return l([n,q,p],{baseClass:"jimu-query-setting-relationships-selector",templateString:'\x3cdiv\x3e\x3cdiv data-dojo-attach-point\x3d"tableDiv"\x3e\x3c/div\x3e\x3c/div\x3e',nls:null,allRelationshipInfos:null,postCreate:function(){this.inherited(arguments);this._initTable()},setSelectedRelationshipInfos:function(e){if(e&&0<=e.length){var c=h.clone(e),g=d.map(c,function(c){return c.relationship});e=this.table.getRows();var f={};d.forEach(e,h.hitch(this,function(d){var e=this.table.getRowData(d),
e=g.indexOf(e.relationship);0<=e?(this.table.editRow(d,{cbx:!0,label:c[e].label}),f[e]=d):this.table.editRow(d,{cbx:!1})}));for(e=g.length-1;0<=e;e--)f[e]&&this.table.moveToTop(f[e])}},getSelectedRelationships:function(){var e=this.table.getData(),e=d.filter(e,h.hitch(this,function(c){return c.cbx}));return d.map(e,h.hitch(this,function(c){return{relationship:c.relationship,label:c.label}}))},_initTable:function(){this.table=new g({autoHeight:!1,style:"height:277px",fields:[{name:"cbx",title:"",type:"checkbox",
width:"40px"},{name:"relationship",title:"",type:"text",hidden:!0},{name:"nls",title:this.nls.relationship,type:"text"},{name:"label",title:this.nls.label,type:"text",editable:!0},{name:"actions",title:this.nls.actions,type:"actions",actions:["up","down"],width:"120px"}]});this.table.placeAt(this.tableDiv);var e=d.map(this.allRelationshipInfos,h.hitch(this,function(c){return{cbx:!0,relationship:c.relationship,nls:c.nls,label:c.label}}));this.table.addRows(e)}})})},"jimu/dijit/Filter":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/Filter.html jimu/filterUtils jimu/utils dijit/registry dojo/_base/lang dojo/_base/html dojo/_base/array dojo/aspect dojo/query dojo/Deferred esri/request ./_SingleFilter ./_FilterSet ./LoadingIndicator".split(" "),
function(l,n,q,p,h,d,g,e,c,m,f,s,t,b,r,k,a){return l([n,q,p,d],{templateString:h,baseClass:"jimu-filter",declaredClass:"jimu.dijit.Filter",nls:null,_validOptions:!1,_layerDefinition:null,_def:null,noFilterTip:"",enableAskForValues:!1,postMixInProperties:function(){this.nls=window.jimuNls.filterBuilder;var a=this.nls.matchMsg.split("${any_or_all}");this.nls.strMatchMsgPart1=a[0]||"";this.nls.strMatchMsgPart2=a[1]||"";this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.noFilterTip&&
"string"===typeof this.noFilterTip&&(this.noFilterTipSection.innerHTML=this.noFilterTip)},reset:function(){this.isBuilding()||(this.removeAllFilters(),this.url=null,this.isHosted=!1,this.partsObj=this.expr=this._layerDefinition=null)},isBuilding:function(){return this._def&&!this._def.isFulfilled()},buildByExpr:function(a,c,d){var f=new b;this.isBuilding()?f.reject("Filter is already building."):(this._def=null,this.reset(),this.url=a,this.isHosted=g.isHostedService(this.url),this.expr=c||"1\x3d1",
this._layerDefinition=d,f=this._def=this._init("expr"));return f},buildByFilterObj:function(a,c,d){var f=new b;this.isBuilding()?f.reject("Filter is already building."):(this._def=null,this.reset(),this.url=a,this.isHosted=g.isHostedService(this.url),this.partsObj=c,this._layerDefinition=d,f=this._def=this._init("partsObj"));return f},removeAllFilters:function(){this._destroyAllFilters()},_validateLayerDefinition:function(a){return this._isObject(a)},_init:function(a){var d=new b;if(!this._isString(this.url))return d.reject(),
d;var e=c.hitch(this,function(){setTimeout(c.hitch(this,function(){d.resolve()}),1500)}),g=c.hitch(this,function(){m.setStyle(this.contentSection,"display","block");m.setStyle(this.errorSection,"display","none");this.removeAllFilters();var b=this._layerDefinition.fields;b&&0<b.length?(b=f.filter(b,c.hitch(this,function(a){return 0<=this._supportFieldTypes.indexOf(a.type)})))&&0<b.length?(this._validOptions=!0,m.removeClass(this.btnAddSet,"jimu-state-disabled"),m.removeClass(this.btnAddExp,"jimu-state-disabled"),
m.removeClass(this.iconAddExp,"jimu-state-disabled"),m.removeClass(this.iconAddSet,"jimu-state-disabled"),this.createFieldsStore(),"expr"===a?this._isString(this.expr)?("1\x3d1"===this.expr.replace(/\s/gi,"")&&this.removeAllFilters(),this._parseExpr(this.expr)?e():d.reject()):d.reject():"partsObj"===a?this._validatePartsObj(this.partsObj)?(this._parsePartsObj(this.partsObj),e()):d.reject():this._validatePartsObj(this.partsObj)?(this._parsePartsObj(this.partsObj),e()):this._isString(this.expr)?this._parseExpr(this.expr)?
e():d.reject():(this.removeAllFilters(),e())):(this._showErrorOptions(this.nls.error.noFilterFields),d.reject()):d.reject()});this._validateLayerDefinition(this._layerDefinition)?g():(this.loading.show(),r({url:this.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(c.hitch(this,function(a){this.domNode?(this.loading.hide(),this._layerDefinition=a,g()):d.reject()}),c.hitch(this,function(a){console.error(a);d.reject();this.domNode&&this.loading.hide()})));return d},toJson:function(){var a=
{logicalOperator:this.allAnySelect.value,parts:[]},b=this._getAllSingleFiltersAndFilterSets();if(0===b.length)return a.expr="1\x3d1",a;f.forEach(b,c.hitch(this,function(b){b=b.toJson();a.parts.push(b)}));return f.every(a.parts,c.hitch(this,function(a){return!!a}))&&0<a.parts.length?(a.expr=this.getExprByFilterObj(a),a):null},createFieldsStore:function(){if(!this._layerDefinition.fields||0===this._layerDefinition.fields.length)this._showErrorOptions(this.nls.error.noFilterFields);else{var a=c.clone(this._layerDefinition).fields;
0===this.setFieldsStoreByFieldInfos(a)&&this._showErrorOptions(this.nls.error.noFilterFields)}},_parsePartsObj:function(a){this._validatePartsObj(a)&&(this.removeAllFilters(),this._buildEditUIByPartsObj(a))},_parseExpr:function(a){this._destroyAllFilters();var b=null;if(!this._validateLayerDefinition(this._layerDefinition))return b;if(!a||"string"!==typeof a)return this._showErrorOptions(this.nls.error.invalidSQL),b;if("1\x3d1"===this.expr.replace(/\s/gi,""))return b={expr:"1\x3d1",parts:[],logicalOperator:"AND"};
try{b=this.getFilterObjByExpr(a)}catch(c){b=null,console.error(c)}b?this._buildEditUIByPartsObj(b):this._showErrorOptions(this.nls.error.cantParseSQL);return b},_buildEditUIByPartsObj:function(a){a&&(this._destroyAllFilters(),this.allAnySelect.value=a.logicalOperator,f.forEach(a.parts,c.hitch(this,function(a){a.parts?this._addFilterSet(a):a.fieldObj&&(a.operator&&a.valueObj)&&this._addSingleFilter(a)})))},_addSingleFilter:function(a){a={url:this.url,layerInfo:this._layerDefinition,stringFieldType:this._stringFieldType,
dateFieldType:this._dateFieldType,numberFieldTypes:this._numberFieldTypes,part:a,OPERATORS:c.mixin({},this.OPERATORS),enableAskForValues:this.enableAskForValues,isHosted:this.isHosted};a=new k(a);a.placeAt(this.allExpsBox);a.startup();this.own(s.after(a,"_destroySelf",c.hitch(this,this._checkFilterNumbers)));this._checkFilterNumbers()},_addFilterSet:function(b){b={url:this.url,layerInfo:this._layerDefinition,stringFieldType:this._stringFieldType,dateFieldType:this._dateFieldType,numberFieldTypes:this._numberFieldTypes,
partsObj:b,OPERATORS:c.mixin({},this.OPERATORS),enableAskForValues:this.enableAskForValues,isHosted:this.isHosted};b=new a(b);b.placeAt(this.allExpsBox);b.startup();this.own(s.after(b,"_destroySelf",c.hitch(this,this._checkFilterNumbers)));this._checkFilterNumbers()},_destroyAllFilters:function(){for(var a=this._getAllSingleFiltersAndFilterSets();0<a.length;)a[0].destroy(),a.splice(0,1);this._checkFilterNumbers()},_getAllSingleFiltersAndFilterSetsDoms:function(){return t(".allExpsBox\x3e.jimu-single-filter,.allExpsBox\x3e.jimu-filter-set",
this.contentSection)},_getAllSingleFiltersAndFilterSets:function(){var a=this._getAllSingleFiltersAndFilterSetsDoms();return f.map(a,c.hitch(this,function(a){return e.byNode(a)}))},_checkFilterNumbers:function(){var a=this._getAllSingleFiltersAndFilterSetsDoms();1<a.length?m.setStyle(this.matchMsg,"display","block"):m.setStyle(this.matchMsg,"display","none");0<a.length?m.setStyle(this.noFilterTipSection,"display","none"):m.setStyle(this.noFilterTipSection,"display","block");f.forEach(a,c.hitch(this,
function(a,b){m.removeClass(a,"even-filter");m.removeClass(a,"odd-filter");m.addClass(a,0===(b+1)%2?"even-filter":"odd-filter")}))},_showErrorOptions:function(a){console.error(a);m.setStyle(this.errorSection,"display","none");this.errorTip.innerHTML=a;this.loading.hide()},_onBtnAddSetClick:function(){this._layerDefinition&&this._validOptions&&this._addFilterSet()},_onBtnAddExpClick:function(){this._layerDefinition&&this._validOptions&&this._addSingleFilter()}})})},"jimu/dijit/_SingleFilter":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_SingleFilter.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/json dojo/on dojo/store/Memory esri/request jimu/utils jimu/dijit/CheckBox dijit/form/Select dijit/form/FilteringSelect dijit/form/ValidationTextBox dijit/form/DateTextBox dijit/form/NumberTextBox".split(" "),
function(l,n,q,p,h,d,g,e,c,m,f,s,t){return l([n,q,p],{templateString:h,baseClass:"jimu-single-filter",declaredClass:"jimu.dijit._SingleFilter",nls:null,url:null,layerInfo:null,stringFieldType:"",dateFieldType:"",numberFieldTypes:[],supportFieldTypes:[],part:null,OPERATORS:null,enableAskForValues:!1,isHosted:!1,postMixInProperties:function(){this.supportFieldTypes=[];this.supportFieldTypes.push(this.stringFieldType);this.supportFieldTypes.push(this.dateFieldType);this.supportFieldTypes=this.supportFieldTypes.concat(this.numberFieldTypes);
this.nls=window.jimuNls.filterBuilder;this.nls.caseSensitive||(this.nls.caseSensitive="Case Sensitive")},postCreate:function(){this.inherited(arguments);this._initSelf()},toJson:function(){var b=null,c=this._isUseAskForValues(),d=this._getSelectedFilteringItem(this.fieldsSelect);if(!d)return null;b={fieldObj:"",operator:"",valueObj:"",interactiveObj:"",caseSensitive:!1};if(c){if(!this.promptTB.validate())return this._showValidationErrorTip(this.promptTB),null;b.interactiveObj={prompt:this.promptTB.get("value"),
hint:this.hintTB.get("value")}}b.fieldObj={name:d.name,label:d.name,shortType:d.shortType,type:d.type};if("none"===this.operatorsSelect.get("value"))return null;b.operator=this.operatorsSelect.get("value");b.valueObj={isValid:!0,type:""};var a=d.shortType;if(this.valueRadio.checked)if(b.valueObj.type="value","string"===a)if(b.operator===this.OPERATORS.stringOperatorIsBlank||b.operator===this.OPERATORS.stringOperatorIsNotBlank)b.valueObj.value=null;else if(this._isFieldCoded(d)&&b.operator===this.OPERATORS.stringOperatorIs){if(!this.stringCodedValuesFS.validate())return this._showValidationErrorTip(this.stringCodedValuesFS),
null;c=this._getSelectedFilteringItem(this.stringCodedValuesFS);b.valueObj.value=c?c.code:""}else{if(!this.stringTextBox.validate())return this._showValidationErrorTip(this.stringTextBox),null;b.valueObj.value=this.stringTextBox.get("value")}else if("number"===a)if(b.operator===this.OPERATORS.numberOperatorIsBlank||b.operator===this.OPERATORS.numberOperatorIsNotBlank)b.valueObj.value=null;else if(b.operator===this.OPERATORS.numberOperatorIsBetween||b.operator===this.OPERATORS.numberOperatorIsNotBetween){if(!this.numberTextBox1.validate())return this._showValidationErrorTip(this.numberTextBox1),
null;if(!this.numberTextBox2.validate())return this._showValidationErrorTip(this.numberTextBox2),null;b.valueObj.value1=this._getValueForNumberTextBox(this.numberTextBox1);b.valueObj.value2=this._getValueForNumberTextBox(this.numberTextBox2);b.valueObj.isValid=t.isValidNumber(b.valueObj.value1)&&t.isValidNumber(b.valueObj.value2)}else{if(this._isFieldCoded(d)&&b.operator===this.OPERATORS.numberOperatorIs){if(!this.numberCodedValuesFS.validate())return this._showValidationErrorTip(this.numberCodedValuesFS),
null;c=this._getSelectedFilteringItem(this.numberCodedValuesFS);b.valueObj.value=c?parseFloat(c.code):null}else{if(!this.numberTextBox.validate())return this._showValidationErrorTip(this.numberTextBox),null;b.valueObj.value=this._getValueForNumberTextBox(this.numberTextBox)}b.valueObj.isValid=t.isValidNumber(b.valueObj.value)}else{if("date"===a)if(b.operator===this.OPERATORS.dateOperatorIsBlank||b.operator===this.OPERATORS.dateOperatorIsNotBlank)b.valueObj.value=null;else if(b.operator===this.OPERATORS.dateOperatorIsBetween||
b.operator===this.OPERATORS.dateOperatorIsNotBetween){if(!this.dateTextBox1.validate())return this._showValidationErrorTip(this.dateTextBox1),null;if(!this.dateTextBox2.validate())return this._showValidationErrorTip(this.dateTextBox2),null;b.valueObj.value1=this.dateTextBox1.get("value").toDateString();b.valueObj.value2=this.dateTextBox2.get("value").toDateString()}else{if(!this.dateTextBox.validate())return this._showValidationErrorTip(this.dateTextBox),null;b.valueObj.value=this.dateTextBox.get("value").toDateString()}}else if(this.fieldRadio.checked){c=
this._getSelectedFilteringItem(this.fieldsSelect2);if(!c)return this._showValidationErrorTip(this.fieldsSelect2),null;b.valueObj.value=c.name;b.valueObj.label=c.name;b.valueObj.type="field"}else if(this.uniqueRadio&&this.uniqueRadio.checked)if(b.valueObj.type="unique",d=this._getSelectedFilteringItem(this.uniqueValuesSelect))"string"===a?b.valueObj.value=d.value:"number"===a&&(b.valueObj.value=parseFloat(d.value));else if(c)"string"===a?b.valueObj.value="":"number"===a&&(b.valueObj.value=null,b.valueObj.isValid=
!1);else return this._showValidationErrorTip(this.uniqueValuesSelect),null;if("string"===a)switch(b.operator){case this.OPERATORS.stringOperatorStartsWith:case this.OPERATORS.stringOperatorEndsWith:case this.OPERATORS.stringOperatorContains:case this.OPERATORS.stringOperatorDoesNotContain:b.caseSensitive=this.cbxCaseSensitive.getValue()}return b},showDelteIcon:function(){g.setStyle(this.btnDelete,"display","inline-block")},hideDeleteIcon:function(){g.setStyle(this.btnDelete,"display","none")},_showCaseSensitive:function(){g.setStyle(this.cbxCaseSensitive.domNode,
"display","inline-block")},_hideCaseSensitive:function(){g.setStyle(this.cbxCaseSensitive.domNode,"display","none")},_getProcessedString:function(b){return t.isNotEmptyString(b,!0)?b:""},_getProcessedNumber:function(b){return t.isValidNumber(b)?b:null},_setValueForStringTextBox:function(b,c){c=this._getProcessedString(c);b.set("value",c)},_setValueForNumberTextBox:function(b,c){t.isValidNumber(c)&&b.set("value",c)},_getValueForNumberTextBox:function(b){b=b.get("value");return this._getProcessedNumber(b)},
_initSelf:function(){this.isHosted&&(this.cbxCaseSensitive.setValue(!1),this.cbxCaseSensitive.setStatus(!1),this.cbxCaseSensitive.domNode.title=this.nls.notSupportCaseSensitiveTip);this.own(m(this.cbxAskValues,"status-change",d.hitch(this,this._onCbxAskValuesStatusChanged)));this.cbxAskValues.onChange=d.hitch(this,this._onCbxAskValuesClicked);this.own(m(this.fieldsSelect,"MouseEnter",d.hitch(this,this._updateFieldsSelectTitle)));this.own(m(this.operatorsSelect,"MouseEnter",d.hitch(this,this._updateOperatorsSelectTitle)));
this.own(m(this.dateTextBox1,"MouseEnter",d.hitch(this,this._updateDateTextBox1Title)));this.own(m(this.dateTextBox2,"MouseEnter",d.hitch(this,this._updateDateTextBox2Title)));var b=new f({idProperty:"id",data:[]});this.uniqueValuesSelect.set("store",b);this.enableAskForValues?(g.setStyle(this.cbxAskValues.domNode,"display","inline-block"),g.setStyle(this.promptSection,"display","block")):(g.setStyle(this.cbxAskValues.domNode,"display","none"),g.setStyle(this.promptSection,"display","none"));this.layerInfo=
d.mixin({},this.layerInfo);this._initRadios();b=0;this.layerInfo.currentVersion&&(b=parseFloat(this.layerInfo.currentVersion));if(10.1>b||this._isStreamServer(this.url))g.destroy(this.uniqueTd),this.uniqueRadio=null;if((b=this.layerInfo.fields)&&0<b.length)b=e.filter(b,d.hitch(this,function(b){return 0<=this.supportFieldTypes.indexOf(b.type)})),this._enableRadios(),this._initFieldsSelect(b)},_isStreamServer:function(b){b=(b||"").replace(/\/*$/g,"");return/\/StreamServer$/gi.test(b)},_updateFieldsSelectTitle:function(){this.fieldsSelect.domNode.title=
"";var b=this._getSelectedFilteringItem(this.fieldsSelect);b&&(this.fieldsSelect.domNode.title=b.displayName||b.alias||b.name)},_updateOperatorsSelectTitle:function(){this.operatorsSelect.domNode.title="";var b=this.operatorsSelect.get("value");b&&(b=this.operatorsSelect.getOptions(b),this.operatorsSelect.domNode.title=b.label)},_updateDateTextBox1Title:function(){var b=this.dateTextBox1.get("displayedValue")||"";this.dateTextBox1.domNode.title=b},_updateDateTextBox2Title:function(){var b=this.dateTextBox2.get("displayedValue")||
"";this.dateTextBox2.domNode.title=b},_showValidationErrorTip:function(b){try{!b.validate()&&b.domNode&&b.focusNode&&(b.focusNode.focus(),b.focusNode.blur())}catch(c){console.error(c)}},_focusValidationTextBox:function(b){try{b&&b.focusNode&&b.focusNode.focus()}catch(c){console.error(c)}},_isFieldCoded:function(b){return(b=b.domain)&&"codedValue"===b.type&&b.codedValues&&0<b.codedValues.length},_getSelectedFilteringItem:function(b){if(b.validate()){var c=b.get("item");if(c)return c}this._showValidationErrorTip(b);
return null},_getShortTypeByFieldType:function(b){return b===this.stringFieldType?"string":b===this.dateFieldType?"date":0<=this.numberFieldTypes.indexOf(b)?"number":null},_getOperatorsByShortType:function(b){var c=[];"string"===b?c=[this.OPERATORS.stringOperatorIs,this.OPERATORS.stringOperatorIsNot,this.OPERATORS.stringOperatorStartsWith,this.OPERATORS.stringOperatorEndsWith,this.OPERATORS.stringOperatorContains,this.OPERATORS.stringOperatorDoesNotContain,this.OPERATORS.stringOperatorIsBlank,this.OPERATORS.stringOperatorIsNotBlank]:
"number"===b?c=[this.OPERATORS.numberOperatorIs,this.OPERATORS.numberOperatorIsNot,this.OPERATORS.numberOperatorIsAtLeast,this.OPERATORS.numberOperatorIsLessThan,this.OPERATORS.numberOperatorIsAtMost,this.OPERATORS.numberOperatorIsGreaterThan,this.OPERATORS.numberOperatorIsBetween,this.OPERATORS.numberOperatorIsNotBetween,this.OPERATORS.numberOperatorIsBlank,this.OPERATORS.numberOperatorIsNotBlank]:"date"===b&&(c=[this.OPERATORS.dateOperatorIsOn,this.OPERATORS.dateOperatorIsNotOn,this.OPERATORS.dateOperatorIsBefore,
this.OPERATORS.dateOperatorIsAfter,this.OPERATORS.dateOperatorIsBetween,this.OPERATORS.dateOperatorIsNotBetween,this.OPERATORS.dateOperatorIsBlank,this.OPERATORS.dateOperatorIsNotBlank]);return c},_initFieldsSelect:function(b){b=e.map(b,d.hitch(this,function(b,a){var c=d.mixin({},b);c.id=a;c.shortType=this._getShortTypeByFieldType(b.type);c.alias||(c.alias=c.name);var f="";"string"===c.shortType?f=this.nls.string:"number"===c.shortType?f=this.nls.number:"date"===c.shortType&&(f=this.nls.date);c.displayName=
c.alias+" ("+f+")";return c}));if(0<b.length){var c=new f({data:b});this.fieldsSelect.set("store",c);this.fieldsSelect.set("value",b[0].id)}this.fieldsSelect.focusNode.focus();this.fieldsSelect.focusNode.blur();this._onFieldsSelectChange();this.part&&this._showPart(this.part)},_showPart:function(b){if((this.part=b)&&this.part.fieldObj&&this.part.operator&&this.part.valueObj){b=this.part.fieldObj.name;var c=this.part.operator;this.part.caseSensitive=!!this.part.caseSensitive;b=this.fieldsSelect.store.query({name:b});
if(0!==b.length&&(b=b[0]))this.fieldsSelect.set("value",b.id),setTimeout(d.hitch(this,function(){this.domNode&&(this._onFieldsSelectChange(),this.operatorsSelect.set("value",c),setTimeout(d.hitch(this,function(){this.domNode&&this._resetByFieldAndOperation(this.part)}),50),setTimeout(d.hitch(this,function(){if(this.domNode){var b=this.part.interactiveObj;b&&(this.cbxAskValues.check(),this._updatePrompt(),this.promptTB.set("value",b.prompt||""),this.hintTB.set("value",b.hint||""))}}),100))}),0)}},
_onFieldsSelectChange:function(){this._updateFieldsSelectTitle();this.operatorsSelect.removeOption(this.operatorsSelect.getOptions());this.operatorsSelect.addOption({value:"none",label:this.nls.none});this.valueRadio.checked=!0;var b=this._getSelectedFilteringItem(this.fieldsSelect);b&&(this.operatorsSelect.shortType=b.shortType,b=this._getOperatorsByShortType(b.shortType),this.operatorsSelect.removeOption(this.operatorsSelect.getOptions()),e.forEach(b,d.hitch(this,function(b){this.operatorsSelect.addOption({value:b,
label:this.nls[b]})})));this._onOperatorsSelectChange()},_onOperatorsSelectChange:function(){this._updateOperatorsSelectTitle();this.valueRadio.checked=!0;this._resetByFieldAndOperation()},_onRangeNumberBlur:function(){if(this.numberTextBox1.validate()&&this.numberTextBox2.validate()){var b=this._getValueForNumberTextBox(this.numberTextBox1),c=this._getValueForNumberTextBox(this.numberTextBox2);t.isValidNumber(b)&&t.isValidNumber(c)&&b>c&&(this._setValueForNumberTextBox(this.numberTextBox1,c),this._setValueForNumberTextBox(this.numberTextBox2,
b))}},_onRangeDateBlur:function(){if(this.dateTextBox1.validate()&&this.dateTextBox2.validate()){var b=this.dateTextBox1.get("value"),c=b.getTime(),d=this.dateTextBox2.get("value"),a=d.getTime();c>a&&(this.dateTextBox1.set("value",d),this.dateTextBox2.set("value",b))}},_initRadios:function(){var b="radio_"+t.getRandomString();this.valueRadio.name=b;this.fieldRadio.name=b;t.combineRadioCheckBoxWithLabel(this.valueRadio,this.valueLabel);t.combineRadioCheckBoxWithLabel(this.fieldRadio,this.fieldLabel);
this.own(m(this.valueRadio,"click",d.hitch(this,function(){this._resetByFieldAndOperation()})));this.own(m(this.fieldRadio,"click",d.hitch(this,function(){this._resetByFieldAndOperation()})));this.uniqueRadio&&(this.uniqueRadio.name=b,t.combineRadioCheckBoxWithLabel(this.uniqueRadio,this.uniqueLabel),this.own(m(this.uniqueRadio,"click",d.hitch(this,function(){this._resetByFieldAndOperation()}))));this._resetByFieldAndOperation()},_enableRadios:function(){this.valueRadio.disabled=!1;this.fieldRadio.disabled=
!1;this.uniqueRadio&&(this.uniqueRadio.disabled=!1)},_disableRadios:function(){this.valueRadio.disabled=!0;this.fieldRadio.disabled=!0;this.uniqueRadio&&(this.uniqueRadio.disabled=!0)},_resetByFieldAndOperation:function(b){var c=b&&b.valueObj;g.setStyle(this.attributeValueContainer,"display","block");this._enableRadios();this._hideCaseSensitive();c&&("value"===c.type?this.valueRadio.checked=!0:"field"===c.type?this.fieldRadio.checked=!0:"unique"===c.type&&this.uniqueRadio&&(this.uniqueRadio.checked=
!0));var d=this._getSelectedFilteringItem(this.fieldsSelect),a=d&&d.shortType,f=this.operatorsSelect.get("value");if(d)if("string"===a)switch(f){case this.OPERATORS.stringOperatorStartsWith:case this.OPERATORS.stringOperatorEndsWith:case this.OPERATORS.stringOperatorContains:case this.OPERATORS.stringOperatorDoesNotContain:this.valueRadio.checked=!0,this._disableRadios(),this._showCaseSensitive(),b&&this.cbxCaseSensitive.setValue(b.caseSensitive)}else if("number"===a)switch(f){case this.OPERATORS.numberOperatorIsBetween:case this.OPERATORS.numberOperatorIsNotBetween:this.valueRadio.checked=
!0,this._disableRadios()}else if("date"===a){switch(f){case this.OPERATORS.dateOperatorIsBetween:case this.OPERATORS.dateOperatorIsNotBetween:this.valueRadio.checked=!0,this._disableRadios()}this.uniqueRadio&&(this.uniqueRadio.disabled=!0,this.uniqueRadio.checked&&(this.valueRadio.checked=!0))}this._updateUIOfAttrValueContainer(d,f,c)},_updateUIOfAttrValueContainer:function(b,c,k){this._updatePrompt();var a=b&&b.shortType;if("string"===a||"number"===a||"date"===a)if(g.setStyle(this.attributeValueContainer,
"display","block"),this.valueRadio.checked)if(g.setStyle(this.fieldsSelect2.domNode,"display","none"),g.setStyle(this.uniqueValuesSelect.domNode,"display","none"),this._showAllValueBoxContainer(),this._resetValueTextBox(),"string"===a)g.setStyle(this.stringTextBoxContainer,"display","block"),g.setStyle(this.numberTextBoxContainer,"display","none"),g.setStyle(this.dateTextBoxContainer,"display","none"),this._isFieldCoded(b)&&c===this.OPERATORS.stringOperatorIs?(g.setStyle(this.stringCodedValuesFS.domNode,
"display","inline-block"),g.setStyle(this.stringTextBox.domNode,"display","none"),b=e.map(b.domain.codedValues,d.hitch(this,function(a,b){var c=d.mixin({},a);c.id=b;return c})),a=new f({data:b}),this.stringCodedValuesFS.set("store",a),k?(a=e.filter(b,d.hitch(this,function(a){return a.code===k.value})),0<a.length?this.stringCodedValuesFS.set("value",a[0].id):this.stringCodedValuesFS.set("value",b[0].id)):this.stringCodedValuesFS.set("value",b[0].id)):(g.setStyle(this.stringTextBox.domNode,"display",
"inline-block"),g.setStyle(this.stringCodedValuesFS.domNode,"display","none"),k&&this._setValueForStringTextBox(this.stringTextBox,k.value)),(c===this.OPERATORS.stringOperatorIsBlank||c===this.OPERATORS.stringOperatorIsNotBlank)&&g.setStyle(this.attributeValueContainer,"display","none");else if("number"===a){g.setStyle(this.stringTextBoxContainer,"display","none");g.setStyle(this.numberTextBoxContainer,"display","block");g.setStyle(this.dateTextBoxContainer,"display","none");if(c===this.OPERATORS.numberOperatorIsBetween||
c===this.OPERATORS.numberOperatorIsNotBetween){if(g.setStyle(this.numberTextBox.domNode,"display","none"),g.setStyle(this.numberRangeTable,"display","table"),g.setStyle(this.numberCodedValuesFS.domNode,"display","none"),k){var h;b=t.isValidNumber(k.value1);a=t.isValidNumber(k.value2);b&&a?(a=parseFloat(k.value1),h=parseFloat(k.value2),b=Math.min(a,h),a=Math.max(a,h),this.numberTextBox1.set("value",b),this.numberTextBox2.set("value",a)):b&&!a?(a=parseFloat(k.value1),this.numberTextBox1.set("value",
a)):!b&&a&&(h=parseFloat(k.value2),this.numberTextBox2.set("value",h))}}else if(g.setStyle(this.numberRangeTable,"display","none"),this._isFieldCoded(b)&&c===this.OPERATORS.numberOperatorIs)if(g.setStyle(this.numberTextBox.domNode,"display","none"),g.setStyle(this.numberCodedValuesFS.domNode,"display","inline-block"),b=e.map(b.domain.codedValues,d.hitch(this,function(a,b){var c=d.mixin({},a);c.id=b;return c})),a=new f({data:b}),this.numberCodedValuesFS.set("store",a),k&&!isNaN(k.value)){var m=parseFloat(k.value),
a=e.filter(b,d.hitch(this,function(a){return parseFloat(a.code)===m}));0<a.length?this.numberCodedValuesFS.set("value",a[0].id):this.numberCodedValuesFS.set("value",b[0].id)}else this.numberCodedValuesFS.set("value",b[0].id);else g.setStyle(this.numberTextBox.domNode,"display","inline-block"),g.setStyle(this.numberCodedValuesFS.domNode,"display","none"),k&&this._setValueForNumberTextBox(this.numberTextBox,k.value);(c===this.OPERATORS.numberOperatorIsBlank||c===this.OPERATORS.numberOperatorIsNotBlank)&&
g.setStyle(this.attributeValueContainer,"display","none")}else"date"===a&&(g.setStyle(this.stringTextBoxContainer,"display","none"),g.setStyle(this.numberTextBoxContainer,"display","none"),g.setStyle(this.dateTextBoxContainer,"display","block"),c===this.OPERATORS.dateOperatorIsBetween||c===this.OPERATORS.dateOperatorIsNotBetween?(g.setStyle(this.dateTextBox.domNode,"display","none"),g.setStyle(this.dateRangeTable,"display","table"),k&&(k.value1&&k.value2)&&(this.dateTextBox1.set("value",new Date(k.value1)),
this.dateTextBox2.set("value",new Date(k.value2)))):(g.setStyle(this.dateTextBox.domNode,"display","inline-block"),g.setStyle(this.dateRangeTable,"display","none"),k&&k.value&&this.dateTextBox.set("value",new Date(k.value))),(c===this.OPERATORS.dateOperatorIsBlank||c===this.OPERATORS.dateOperatorIsNotBlank)&&g.setStyle(this.attributeValueContainer,"display","none"));else this.fieldRadio.checked?(this._hideAllValueBoxContainer(),g.setStyle(this.uniqueValuesSelect.domNode,"display","none"),g.setStyle(this.fieldsSelect2.domNode,
"display","inline-block"),this._resetFieldsSelect2(),k&&k.value&&(c=this.fieldsSelect2.store.query({name:k.value}),0<c.length&&(c=c[0])&&this.fieldsSelect2.set("value",c.id))):this.uniqueRadio&&this.uniqueRadio.checked&&(this._hideAllValueBoxContainer(),g.setStyle(this.fieldsSelect2.domNode,"display","none"),g.setStyle(this.uniqueValuesSelect.domNode,"display","inline-block"),this._resetUniqueValuesSelect(k));else g.setStyle(this.attributeValueContainer,"display","none")},_showAllValueBoxContainer:function(){g.setStyle(this.allValueBoxContainer,
"display","block")},_hideAllValueBoxContainer:function(){g.setStyle(this.allValueBoxContainer,"display","none")},_resetValueTextBox:function(){this.stringTextBox.set("value","");this.numberTextBox.set("value","");this.dateTextBox.set("value",new Date)},_resetFieldsSelect2:function(){this.fieldsSelect2.set("displayedValue","");var b=new f({data:[]});this.fieldsSelect2.set("store",b);if(this.fieldsSelect.validate()){var c=this._getSelectedFilteringItem(this.fieldsSelect);if(c){var b=this.fieldsSelect.store.query({shortType:c.shortType}),
g=e.filter(b,d.hitch(this,function(a){return a.id!==c.id})),b=new f({data:g});this.fieldsSelect2.set("store",b);0<g.length&&this.fieldsSelect2.set("value",g[0].id)}}},_tryLocaleNumber:function(b){var c=t.localizeNumber(b);if(null===c||void 0===c)c=b;return c},_resetUniqueValuesSelect:function(b){this.uniqueValuesSelect.reset();this.uniqueValuesSelect.store.setData([]);if(this.layerInfo&&10.1<=parseFloat(this.layerInfo.currentVersion)){var f=this._getSelectedFilteringItem(this.fieldsSelect);if(f){var g=
this.url+"/generateRenderer",a=c.stringify({type:"uniqueValueDef",uniqueValueFields:[f.name]});s({url:g,content:{classificationDef:a,f:"json"},handleAs:"json",callbackParamName:"callback",timeout:15E3}).then(d.hitch(this,function(a){if(this.domNode){a=a&&a.uniqueValueInfos;var c=this._getSelectedFilteringItem(this.fieldsSelect);if(a&&c&&f.id===c.id){this.uniqueValuesSelect.store.setData([]);var g=-1,k=this._hasCodedValues(c);a=e.map(a,d.hitch(this,function(a,d){var f=a.value,e=f;"number"===c.shortType&&
(f=parseFloat(f),e=this._tryLocaleNumber(f));k&&(e=this._getDisplayNameOfCodedValues(f,c));e={id:d,value:f,label:e};b&&b.value===f&&(g=e.id);return e}));this.uniqueValuesSelect.store.setData(a);0<a.length&&0<=g&&(a=this.uniqueValuesSelect.store.get(g))&&this.uniqueValuesSelect.set("item",a)}}}),d.hitch(this,function(a){console.error(a)}))}}},_hasCodedValues:function(b){var c=!1;b.domain&&(b=b.domain.codedValues)&&0<b.length&&(c=!0);return c},_getDisplayNameOfCodedValues:function(b,c){var d=b;e.some(c.domain.codedValues,
function(a){return a.code===b?(d=a.name,!0):!1});return d},_onCbxAskValuesClicked:function(){this._updateRequiredProperty();this._updatePrompt()},_onCbxAskValuesStatusChanged:function(){this._updateRequiredProperty()},_isUseAskForValues:function(){return this.cbxAskValues.status&&this.cbxAskValues.checked},_isValueRequired:function(){return!this._isUseAskForValues()},_updateRequiredProperty:function(){var b=this._isValueRequired();this.stringTextBox.set("required",b);this.stringCodedValuesFS.set("required",
b);this.numberTextBox.set("required",b);this.numberTextBox1.set("required",b);this.numberTextBox2.set("required",b);this.numberCodedValuesFS.set("required",b);this.uniqueValuesSelect.set("required",b)},_updatePrompt:function(){this.promptTB.set("value","");this.hintTB.set("value","");this.cbxAskValues.setStatus(!0);g.setStyle(this.promptTable,"display","table");var b=this.operatorsSelect.get("value"),c=this.nls[b];this.fieldRadio.checked&&this.cbxAskValues.setStatus(!1);b===this.OPERATORS.stringOperatorIsBlank&&
this.cbxAskValues.setStatus(!1);b===this.OPERATORS.stringOperatorIsNotBlank&&this.cbxAskValues.setStatus(!1);b===this.OPERATORS.numberOperatorIsBlank&&this.cbxAskValues.setStatus(!1);b===this.OPERATORS.numberOperatorIsNotBlank&&this.cbxAskValues.setStatus(!1);b===this.OPERATORS.dateOperatorIsBlank&&this.cbxAskValues.setStatus(!1);b===this.OPERATORS.dateOperatorIsNotBlank&&this.cbxAskValues.setStatus(!1);if(this.cbxAskValues.status&&this.cbxAskValues.checked){g.setStyle(this.promptTable,"display",
"table");var d=this._getSelectedFilteringItem(this.fieldsSelect);d&&"none"!==b&&this.promptTB.set("value",(d.alias||d.name)+" "+c)}else g.setStyle(this.promptTable,"display","none")},_destroySelf:function(){this.destroy()}})})},"dijit/form/FilteringSelect":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],function(l,n,q,p,h){return l("dijit.form.FilteringSelect",[p,h],{required:!0,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened},
isValid:function(){return!!this.item||!this.required&&""==this.get("displayedValue")},_refreshState:function(){this.searchTimer||this.inherited(arguments)},_callbackSetLabel:function(d,g,e,c){g&&g[this.searchAttr]!==this._lastQuery||!g&&d.length&&this.store.getIdentity(d[0])!=this._lastQuery||(d.length?this.set("item",d[0],c):this.set("value","",c||void 0===c&&!this.focused,this.textbox.value,null))},_openResultList:function(d,g,e){g[this.searchAttr]===this._lastQuery&&(this.inherited(arguments),
void 0===this.item&&this.validate(!0))},_getValueAttr:function(){return this.valueNode.value},_getValueField:function(){return"value"},_setValueAttr:function(d,g,e,c){this._onChangeActive||(g=null);if(void 0===c){if(null===d||""===d)if(d="",!n.isString(e)){this._setDisplayedValueAttr(e||"",g);return}var h=this;this._lastQuery=d;q(this.store.get(d),function(c){h._callbackSetLabel(c?[c]:[],void 0,void 0,g)})}else this.valueNode.value=d,this.inherited(arguments,[d,g,e,c])},_setItemAttr:function(d,g,
e){this.inherited(arguments);this._lastDisplayedValue=this.textbox.value},_getDisplayQueryString:function(d){return d.replace(/([\\\*\?])/g,"\\$1")},_setDisplayedValueAttr:function(d,g){null==d&&(d="");if(!this._created){if(!("displayedValue"in this.params))return;g=!1}if(this.store){this.closeDropDown();var e=n.clone(this.query),c=this._getDisplayQueryString(d),h;this.store._oldAPI?h=c:(h=this._patternToRegExp(c),h.toString=function(){return c});this._lastQuery=e[this.searchAttr]=h;this._lastDisplayedValue=
this.textbox.value=d;this._set("displayedValue",d);var f=this,l={queryOptions:{ignoreCase:this.ignoreCase,deep:!0}};n.mixin(l,this.fetchProperties);this._fetchHandle=this.store.query(e,l);q(this._fetchHandle,function(c){f._fetchHandle=null;f._callbackSetLabel(c||[],e,l,g)},function(c){f._fetchHandle=null;f._cancelingQuery||console.error("dijit.form.FilteringSelect: "+c.toString())})}},undo:function(){this.set("displayedValue",this._lastDisplayedValue)}})})},"dijit/form/DateTextBox":function(){define(["dojo/_base/declare",
"../Calendar","./_DateTimeTextBox"],function(l,n,q){return l("dijit.form.DateTextBox",q,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:n,_selector:"date",maxHeight:Infinity,value:new Date("")})})},"dijit/Calendar":function(){define("dojo/_base/array dojo/date dojo/date/locale dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff ./CalendarLite ./_Widget ./_CssStateMixin ./_TemplatedMixin ./form/DropDownButton".split(" "),
function(l,n,q,p,h,d,g,e,c,m,f,s,t,b,r,k,a){var u=p("dijit.Calendar",[t,b,r],{baseClass:"dijitCalendar",cssStateNodes:{decrementMonth:"dijitCalendarArrow",incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},setValue:function(a){e.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",a)},_createMonthWidget:function(){return new u._MonthDropDownButton({id:this.id+"_mddb",
tabIndex:-1,onMonthSelect:m.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},postCreate:function(){this.inherited(arguments);this.own(f(this.domNode,"keydown",m.hitch(this,"_onKeyDown")),f(this.dateRowsNode,"mouseover",m.hitch(this,"_onDayMouseOver")),f(this.dateRowsNode,"mouseout",m.hitch(this,"_onDayMouseOut")),f(this.dateRowsNode,"mousedown",m.hitch(this,"_onDayMouseDown")),f(this.dateRowsNode,"mouseup",m.hitch(this,"_onDayMouseUp")))},_onMonthSelect:function(a){var b=
new this.dateClassObj(this.currentFocus);b.setDate(1);b.setMonth(a);a=this.dateModule.getDaysInMonth(b);var c=this.currentFocus.getDate();b.setDate(Math.min(c,a));this._setCurrentFocusAttr(b)},_onDayMouseOver:function(a){if((a=d.contains(a.target,"dijitCalendarDateLabel")?a.target.parentNode:a.target)&&(a.dijitDateValue&&!d.contains(a,"dijitCalendarDisabledDate")||a==this.previousYearLabelNode||a==this.nextYearLabelNode))d.add(a,"dijitCalendarHoveredDate"),this._currentNode=a},_onDayMouseOut:function(a){this._currentNode&&
!(a.relatedTarget&&a.relatedTarget.parentNode==this._currentNode)&&(a="dijitCalendarHoveredDate",d.contains(this._currentNode,"dijitCalendarActiveDate")&&(a+=" dijitCalendarActiveDate"),d.remove(this._currentNode,a),this._currentNode=null)},_onDayMouseDown:function(a){if((a=a.target.parentNode)&&a.dijitDateValue&&!d.contains(a,"dijitCalendarDisabledDate"))d.add(a,"dijitCalendarActiveDate"),this._currentNode=a},_onDayMouseUp:function(a){(a=a.target.parentNode)&&a.dijitDateValue&&d.remove(a,"dijitCalendarActiveDate")},
handleKey:function(a){var b=-1,d,f=this.currentFocus;switch(a.keyCode){case c.RIGHT_ARROW:b=1;case c.LEFT_ARROW:d="day";this.isLeftToRight()||(b*=-1);break;case c.DOWN_ARROW:b=1;case c.UP_ARROW:d="week";break;case c.PAGE_DOWN:b=1;case c.PAGE_UP:d=a.ctrlKey||a.altKey?"year":"month";break;case c.END:f=this.dateModule.add(f,"month",1),d="day";case c.HOME:f=new this.dateClassObj(f);f.setDate(1);break;default:return!0}d&&(f=this.dateModule.add(f,d,b));this._setCurrentFocusAttr(f);return!1},_onKeyDown:function(a){this.handleKey(a)||
(a.stopPropagation(),a.preventDefault())},onValueSelected:function(){},onChange:function(a){this.onValueSelected(a)},getClassForDate:function(){}});u._MonthDropDownButton=p("dijit.Calendar._MonthDropDownButton",a,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new u._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect})},_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.dropDown.set("months",
b);this.containerNode.innerHTML=(6==s("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+this.dropDown.domNode.innerHTML+"\x3c/div\x3e")+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+b[a.getMonth()]+"\x3c/div\x3e"}});u._MonthDropDown=p("dijit.Calendar._MonthDropDown",[b,k,r],{months:[],baseClass:"dijitCalendarMonthMenu dijitMenu",templateString:"\x3cdiv data-dojo-attach-event\x3d'ondijitclick:_onClick'\x3e\x3c/div\x3e",_setMonthsAttr:function(a){this.domNode.innerHTML=
"";l.forEach(a,function(a,b){g.create("div",{className:"dijitCalendarMonthLabel",month:b,innerHTML:a},this.domNode)._cssState="dijitCalendarMonthLabel"},this)},_onClick:function(a){this.onChange(h.get(a.target,"month"))},onChange:function(){}});return u})},"dijit/CalendarLite":function(){define("dojo/_base/array dojo/_base/declare dojo/cldr/supplemental dojo/date dojo/date/locale dojo/date/stamp dojo/dom dojo/dom-class dojo/_base/lang dojo/on dojo/sniff dojo/string ./_WidgetBase ./_TemplatedMixin dojo/text!./templates/Calendar.html ./a11yclick ./hccss".split(" "),
function(l,n,q,p,h,d,g,e,c,m,f,s,t,b,r){var k=n("dijit.CalendarLite",[t,b],{templateString:r,dowTemplateString:'\x3cth class\x3d"dijitReset dijitCalendarDayLabelTemplate" role\x3d"columnheader" scope\x3d"col"\x3e\x3cspan class\x3d"dijitCalendarDayLabel"\x3e${d}\x3c/span\x3e\x3c/th\x3e',dateTemplateString:'\x3ctd class\x3d"dijitReset" role\x3d"gridcell" data-dojo-attach-point\x3d"dateCells"\x3e\x3cspan class\x3d"dijitCalendarDateLabel" data-dojo-attach-point\x3d"dateLabels"\x3e\x3c/span\x3e\x3c/td\x3e',
weekTemplateString:'\x3ctr class\x3d"dijitReset dijitCalendarWeekTemplate" role\x3d"row"\x3e${d}${d}${d}${d}${d}${d}${d}\x3c/tr\x3e',value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",dayOffset:-1,currentFocus:new Date,_setSummaryAttr:"gridNode",baseClass:"dijitCalendar dijitCalendarLite",_isValidDate:function(a){return a&&!isNaN(a)&&"object"==typeof a&&a.toString()!=this.constructor.prototype.value.toString()},_getValueAttr:function(){var a=this._get("value");if(a&&!isNaN(a)){var b=
new this.dateClassObj(a);b.setHours(0,0,0,0);b.getDate()<a.getDate()&&(b=this.dateModule.add(b,"hour",1));return b}return null},_setValueAttr:function(a,b){"string"==typeof a&&(a=d.fromISOString(a));a=this._patchDate(a);if(this._isValidDate(a)&&!this.isDisabledDate(a,this.lang)){if(this._set("value",a),this.set("currentFocus",a),this._markSelectedDates([a]),this._created&&(b||"undefined"==typeof b))this.onChange(this.get("value"))}else this._set("value",null),this._markSelectedDates([])},_patchDate:function(a){a&&
(a=new this.dateClassObj(a),a.setHours(1,0,0,0));return a},_setText:function(a,b){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(a.ownerDocument.createTextNode(b))},_populateGrid:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);var a=this._patchDate(a),b=a.getDay(),c=this.dateModule.getDaysInMonth(a),d=this.dateModule.getDaysInMonth(this.dateModule.add(a,"month",-1)),f=new this.dateClassObj,e=0<=this.dayOffset?this.dayOffset:q.getFirstDayOfWeek(this.lang);e>b&&
(e-=7);if(!this.summary){var g=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.gridNode.setAttribute("summary",g[a.getMonth()])}this._date2cell={};l.forEach(this.dateCells,function(g,k){var h=k+e,m=new this.dateClassObj(a),l="dijitCalendar",r=0;h<b?(h=d-b+h+1,r=-1,l+="Previous"):h>=b+c?(h=h-b-c+1,r=1,l+="Next"):(h=h-b+1,l+="Current");r&&(m=this.dateModule.add(m,"month",r));m.setDate(h);this.dateModule.compare(m,f,"date")||(l="dijitCalendarCurrentDate "+l);this.isDisabledDate(m,
this.lang)?(l="dijitCalendarDisabledDate "+l,g.setAttribute("aria-disabled","true")):(l="dijitCalendarEnabledDate "+l,g.removeAttribute("aria-disabled"),g.setAttribute("aria-selected","false"));(r=this.getClassForDate(m,this.lang))&&(l=r+" "+l);g.className=l+"Month dijitCalendarDateTemplate";l=m.valueOf();this._date2cell[l]=g;g.dijitDateValue=l;this._setText(this.dateLabels[k],m.getDateLocalized?m.getDateLocalized(this.lang):m.getDate())},this)},_populateControls:function(){var a=new this.dateClassObj(this.currentFocus);
a.setDate(1);this.monthWidget.set("month",a);var b=a.getFullYear()-1,c=new this.dateClassObj;l.forEach(["previous","current","next"],function(a){c.setFullYear(b++);this._setText(this[a+"YearLabelNode"],this.dateLocaleModule.format(c,{selector:"year",locale:this.lang}))},this)},goToToday:function(){this.set("value",new this.dateClassObj)},constructor:function(a){this.dateModule=a.datePackage?c.getObject(a.datePackage,!1):p;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=a.datePackage?
c.getObject(a.datePackage+".locale",!1):h},_createMonthWidget:function(){return k._MonthWidget({id:this.id+"_mddb",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},buildRendering:function(){var a=this.dowTemplateString,b=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),c=0<=this.dayOffset?this.dayOffset:q.getFirstDayOfWeek(this.lang);this.dayCellsHtml=s.substitute([a,a,a,a,a,a,a].join(""),{d:""},function(){return b[c++%7]});a=s.substitute(this.weekTemplateString,
{d:this.dateTemplateString});this.dateRowsHtml=[a,a,a,a,a,a].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);g.setSelectable(this.domNode,!1);a=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();this.set("currentFocus",a,!1)},postCreate:function(){this.inherited(arguments);this._connectControls()},_connectControls:function(){var a=c.hitch(this,function(a,b,d){this[a].dojoClick=!0;return m(this[a],"click",c.hitch(this,function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,
b,d))}))});this.own(a("incrementMonth","month",1),a("decrementMonth","month",-1),a("nextYearLabelNode","year",1),a("previousYearLabelNode","year",-1))},_setCurrentFocusAttr:function(a,b){var c=this.currentFocus,d=this._getNodeByDate(c);a=this._patchDate(a);this._set("currentFocus",a);if(!this._date2cell||0!=this.dateModule.difference(c,a,"month"))this._populateGrid(),this._populateControls(),this._markSelectedDates([this.value]);c=this._getNodeByDate(a);c.setAttribute("tabIndex",this.tabIndex);(this.focused||
b)&&c.focus();d&&d!=c&&(f("webkit")?d.setAttribute("tabIndex","-1"):d.removeAttribute("tabIndex"))},focus:function(){this._setCurrentFocusAttr(this.currentFocus,!0)},_onDayClick:function(a){a.stopPropagation();a.preventDefault();for(a=a.target;a&&!a.dijitDateValue;a=a.parentNode);a&&!e.contains(a,"dijitCalendarDisabledDate")&&this.set("value",a.dijitDateValue)},_getNodeByDate:function(a){return(a=this._patchDate(a))&&this._date2cell?this._date2cell[a.valueOf()]:null},_markSelectedDates:function(a){function b(a,
c){e.toggle(c,"dijitCalendarSelectedDate",a);c.setAttribute("aria-selected",a?"true":"false")}l.forEach(this._selectedCells||[],c.partial(b,!1));this._selectedCells=l.filter(l.map(a,this._getNodeByDate,this),function(a){return a});l.forEach(this._selectedCells,c.partial(b,!0))},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});k._MonthWidget=n("dijit.CalendarLite._MonthWidget",t,{_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",
this.lang,a),c=6==f("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+l.map(b,function(a){return"\x3cdiv\x3e"+a+"\x3c/div\x3e"}).join("")+"\x3c/div\x3e";this.domNode.innerHTML=c+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+b[a.getMonth()]+"\x3c/div\x3e"}});return k})},"dijit/form/_DateTimeTextBox":function(){define("dojo/date dojo/date/locale dojo/date/stamp dojo/_base/declare dojo/_base/lang ./RangeBoundTextBox ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),
function(l,n,q,p,h,d,g,e){new Date("X");return p("dijit.form._DateTimeTextBox",[d,g],{templateString:e,hasDownArrow:!0,cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_unboundedConstraints:{},pattern:n.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},compare:function(c,d){var f=this._isInvalidDate(c),e=this._isInvalidDate(d);if(f||e)return f&&e?0:!f?1:-1;var f=this.format(c,this._unboundedConstraints),e=this.format(d,this._unboundedConstraints),
g=this.parse(f,this._unboundedConstraints),b=this.parse(e,this._unboundedConstraints);return f==e?0:l.compare(g,b,this._selector)},autoWidth:!0,format:function(c,d){return!c?"":this.dateLocaleModule.format(c,d)},parse:function(c,d){return this.dateLocaleModule.parse(c,d)||(this._isEmpty(c)?null:void 0)},serialize:function(c,d){c.toGregorian&&(c=c.toGregorian());return q.toISOString(c,d)},dropDownDefaultValue:new Date,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(c){c=
c||{};this.dateModule=c.datePackage?h.getObject(c.datePackage,!1):l;this.dateClassObj=this.dateModule.Date||Date;this.dateClassObj instanceof Date||(this.value=new this.dateClassObj(this.value));this.dateLocaleModule=c.datePackage?h.getObject(c.datePackage+".locale",!1):n;this._set("pattern",this.dateLocaleModule.regexp);this._invalidDate=this.constructor.prototype.value.toString()},buildRendering:function(){this.inherited(arguments);this.hasDownArrow||(this._buttonNode.style.display="none");this.hasDownArrow||
(this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick")},_setConstraintsAttr:function(c){c.selector=this._selector;c.fullYear=!0;var d=q.fromISOString;"string"==typeof c.min&&(c.min=d(c.min),this.dateClassObj instanceof Date||(c.min=new this.dateClassObj(c.min)));"string"==typeof c.max&&(c.max=d(c.max),this.dateClassObj instanceof Date||(c.max=new this.dateClassObj(c.max)));this.inherited(arguments);this._unboundedConstraints=h.mixin({},this.constraints,{min:null,max:null})},_isInvalidDate:function(c){return!c||
isNaN(c)||"object"!=typeof c||c.toString()==this._invalidDate},_setValueAttr:function(c,d,f){void 0!==c&&("string"==typeof c&&(c=q.fromISOString(c)),this._isInvalidDate(c)&&(c=null),c instanceof Date&&!(this.dateClassObj instanceof Date)&&(c=new this.dateClassObj(c)));this.inherited(arguments,[c,d,f]);this.value instanceof Date&&(this.filterString="");!1!==d&&this.dropDown&&this.dropDown.set("value",c,!1)},_set:function(c,d){if("value"==c){d instanceof Date&&!(this.dateClassObj instanceof Date)&&
(d=new this.dateClassObj(d));var f=this._get("value");if(f instanceof this.dateClassObj&&0==this.compare(d,f))return}this.inherited(arguments)},_setDropDownDefaultValueAttr:function(c){this._isInvalidDate(c)&&(c=new this.dateClassObj);this._set("dropDownDefaultValue",c)},openDropDown:function(c){this.dropDown&&this.dropDown.destroy();var d=h.isString(this.popupClass)?h.getObject(this.popupClass,!1):this.popupClass,f=this,e=this.get("value");this.dropDown=new d({onChange:function(c){f.set("value",
c,!0)},id:this.id+"_popup",dir:f.dir,lang:f.lang,value:e,textDir:f.textDir,currentFocus:!this._isInvalidDate(e)?e:this.dropDownDefaultValue,constraints:f.constraints,filterString:f.filterString,datePackage:f.datePackage,isDisabledDate:function(c){return!f.rangeCheck(c,f.constraints)}});this.inherited(arguments)},_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(c,d){this._setValueAttr(this.parse(c,this.constraints),d,c)}})})},"jimu/dijit/_FilterSet":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_FilterSet.html dijit/registry dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/aspect dojo/query ./_SingleFilter".split(" "),
function(l,n,q,p,h,d,g,e,c,m,f,s,t){return l([n,q,p],{templateString:h,baseClass:"jimu-filter-set",nls:null,url:null,layerInfo:null,stringFieldType:"",dateFieldType:"",numberFieldTypes:[],partsObj:null,OPERATORS:null,enableAskForValues:!1,isHosted:!1,postMixInProperties:function(){this.nls=window.jimuNls.filterBuilder;var b=this.nls.matchMsgSet.split("${any_or_all}");this.nls.strMatchMsgPart1=b[0]||"";this.nls.strMatchMsgPart2=b[1]||"";this.inherited(arguments)},postCreate:function(){this.inherited(arguments);
this._initSelf()},toJson:function(){var b=s(".jimu-single-filter",this.allExpsBox),b=c.map(b,g.hitch(this,function(b){return d.byNode(b).toJson()}));return c.every(b,g.hitch(this,function(b){return!!b}))&&0<b.length?{logicalOperator:this.allAnySelect.value,parts:b}:null},showDelteIcon:function(){e.setStyle(this.btnDelete,"display","block")},hideDeleteIcon:function(){e.setStyle(this.btnDelete,"display","none")},_initSelf:function(){this.own(m(this.btnAdd,"click",g.hitch(this,this._addSingleFilter)));
if(this.partsObj){this.allAnySelect.value=this.partsObj.logicalOperator;var b=this.partsObj.parts||[];0===b.length?(this._addSingleFilter(),this._addSingleFilter()):1===b.length?(this._addSingleFilter(b[0]),this._addSingleFilter()):c.forEach(b,g.hitch(this,function(b){this._addSingleFilter(b)}))}else this._addSingleFilter(),this._addSingleFilter()},_addSingleFilter:function(b){b=new t({url:this.url,layerInfo:this.layerInfo,stringFieldType:this.stringFieldType,dateFieldType:this.dateFieldType,numberFieldTypes:this.numberFieldTypes,
part:b,OPERATORS:this.OPERATORS,enableAskForValues:this.enableAskForValues,isHosted:this.isHosted,style:{margin:"15px auto 0 auto",border:0,background:"inherit"}});b.placeAt(this.allExpsBox);b.startup();this.own(f.after(b,"_destroySelf",g.hitch(this,this._checkFilterNumbers)));this._checkFilterNumbers()},_checkFilterNumbers:function(){var b=s(".jimu-single-filter",this.allExpsBox),f=2<b.length;c.forEach(b,g.hitch(this,function(b){b=d.byNode(b);f?b.showDelteIcon():b.hideDeleteIcon()}))},_destroySelf:function(){this.destroy()}})})},
"jimu/dijit/SymbolPicker":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dijit/TooltipDialog dijit/popup dijit/registry jimu/dijit/SymbolChooser jimu/symbolUtils".split(" "),function(l,n,q,p,h,d,g,e,c,m,f,s,t,b){return l([n,q,p],{baseClass:"jimu-symbol-picker",declaredClass:"jimu.dijit.SymbolPicker",templateString:'\x3cdiv\x3e\x3cdiv data-dojo-attach-point\x3d"symbolNode" class\x3d"symbol-node jimu-float-leading"\x3e\x3c/div\x3e\x3cdiv class\x3d"separator jimu-float-leading"\x3e\x3c/div\x3e\x3cdiv class\x3d"jimu-icon jimu-icon-down-arrow-8 jimu-float-leading"\x3e\x3c/div\x3e\x3c/div\x3e',
tooltipDialog:null,_isTooltipDialogOpened:!1,symbol:null,type:null,postCreate:function(){this.inherited(arguments);this._createTooltipDialog();this._hideTooltipDialog();var b=this.symbolChooser.getSymbol();b&&this._drawSymbol(b)},destroy:function(){this._hideTooltipDialog();this.symbolChooser&&this.symbolChooser.destroy();this.symbolChooser=null;this.inherited(arguments)},_createTooltipDialog:function(){var b=d.create("div");this.tooltipDialog=new m({content:b});this.symbolChooser=new t({symbol:this.symbol,
type:this.type});this.symbolChooser.placeAt(b);this.symbolChooser.startup();this.own(e(this.symbolChooser,"change",h.hitch(this,function(b){this._drawSymbol(b);this.emit("change",b)})));this.own(e(this.domNode,"click",h.hitch(this,function(b){b.stopPropagation();b.preventDefault();this._isTooltipDialogOpened?this._hideTooltipDialog():this._showTooltipDialog()})));this.own(e(document.body,"click",h.hitch(this,function(b){var a=b.target||b.srcElement;b=this._getColorPickers();0<b.length&&g.some(b,function(b){return b.isPartOfPopup(a)})||
(b=this.tooltipDialog.domNode,a===b||d.isDescendant(a,b)||this._hideTooltipDialog())})));this.own(e(this.symbolChooser,"resize",h.hitch(this,function(){this._isTooltipDialogOpened&&(this._hideTooltipDialog(),this._showTooltipDialog())})))},_getColorPickers:function(){var b=c(".jimu-color-picker",this.symbolChooser.domNode);return g.map(b,h.hitch(this,function(b){return s.byNode(b)}))},reset:function(){this.symbol=this.type=null;d.empty(this.symbolNode);this.symbolChooser.reset()},showBySymbol:function(b){this.reset();
b&&(this._drawSymbol(b),this.symbolChooser.showBySymbol(b))},showByType:function(b){this.reset();this.symbolChooser.showByType(b);(b=this.symbolChooser.getSymbol())&&this._drawSymbol(b)},getSymbol:function(){return this.symbolChooser.getSymbol()},_drawSymbol:function(c){d.empty(this.symbolNode);c&&(c=b.createSymbolNode(c,{width:16,height:16}))&&d.place(c,this.symbolNode)},_showTooltipDialog:function(){this.tooltipDialog&&(f.open({parent:this.getParent(),popup:this.tooltipDialog,around:this.domNode}),
this._isTooltipDialogOpened=!0)},_hideTooltipDialog:function(){this.tooltipDialog&&(f.close(this.tooltipDialog),this._isTooltipDialogOpened=!1)}})})},"jimu/dijit/ImageChooser":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/_base/lang dojo/_base/html dojo/on dojo/text!./templates/ImageChooser.html dojo/sniff dojo/request esri/lang ../utils ./_CropImage jimu/dijit/Popup jimu/dijit/Message jimu/dijit/LoadingShelter".split(" "),function(l,n,q,p,h,d,g,e,c,m,f,s,t,b,
r){var k=0;l=l([n,q],{templateString:g,declaredClass:"jimu.dijit.ImageChooser",cropImage:!0,displayImg:null,defaultSelfSrc:null,showSelfImg:!1,label:null,showTip:!0,goldenWidth:400,goldenHeight:400,maxSize:1024,format:null,imageData:null,postMixInProperties:function(){this.inherited(arguments);this.nls=window.jimuNls.imageChooser;this.nls.common=window.jimuNls.common;this.nls.readError=this.nls.readError||"Failed to read the file."},postCreate:function(){this._initial();!f.file.supportHTML5()&&(!e("safari")&&
f.file.isEnabledFlash())&&f.file.loadFileAPI().then(p.hitch(this,function(){h.setStyle(this.mask,"zIndex",1)}))},setImageSize:function(a){this.goldenWidth=a.width;this.goldenHeight=a.height},disableChooseImage:function(){h.setStyle(this.fileForm,"display","none");this.label&&"string"===typeof this.label&&h.addClass(this.displayText,"disable-label");h.removeAttr(this.domNode,"title")},enableChooseImage:function(){h.setStyle(this.fileForm,"display","block");this.label&&"string"===typeof this.label&&
h.removeClass(this.displayText,"disable-label");this._addTip()},setDefaultSelfSrc:function(a){this.defaultSelfSrc=a;this.imageData=this.selfImg.src=a},getImageData:function(){return this.imageData},_initial:function(){this._processProperties();this._porcessMaskClick();this._setupFileInput();this._addTip()},_processProperties:function(){this.label&&"string"===typeof this.label&&(this.displayText.innerHTML=this.label,h.setStyle(this.hintText,"display","block"));this.showSelfImg&&h.setStyle(this.hintImage,
"display","block");this.defaultSelfSrc&&(this.imageData=this.selfImg.src=this.defaultSelfSrc);if(this.format){var a="image/*";"string"===typeof this.format&&/^image\/./.test(this.format)?a=this.format:"[object Array]"===Object.prototype.toString.call(this.format)&&0<this.format.length&&(a=this.format.join(","));h.setAttr(this.fileInput,"accept",a)}!f.file.supportHTML5()&&(!e("safari")&&f.file.isEnabledFlash())&&h.setStyle(this.fileInput,{width:"100%",height:"100%",position:"absolute",left:0,top:0,
opacity:0,zIndex:9})},_porcessMaskClick:function(){h.setAttr(this.fileInput,"id","imageChooser_"+k);h.setAttr(this.mask,"for","imageChooser_"+k);k++;this.maskHandle=d(this.mask,"click",p.hitch(this,function(a){a.stopPropagation();if(e("safari")&&7>e("safari"))new b({message:this.nls.unsupportReaderAPI}),a.preventDefault();else{if(!f.file.supportHTML5()){if(!f.file.isEnabledFlash()){var c=h.create("a",{href:"http://helpx.adobe.com/flash-player.html",innerHTML:this.nls.enableFlash,target:"_blank"});
new b({message:c});a.preventDefault();return}if(!f.file.supportFileAPI()){new b({message:this.nls.unsupportReaderAPI});a.preventDefault();return}}h.setStyle(this.fileInput,"display","none");setTimeout(p.hitch(this,function(){h.setStyle(this.fileInput,"display","block")}),200)}}))},_addTip:function(){if(this.showTip){var a=m.substitute({width:this.goldenWidth||40,height:this.goldenHeight||40},this.nls.toolTip);h.setAttr(this.domNode,"title",a)}else h.setAttr(this.domNode,"title","")},_setupFileInput:function(){if(9>=
e("ie"))this.own(d(this.fileInput,"change",p.hitch(this,this._onFileInputChange)));else d.once(this.fileInput,"change",p.hitch(this,this._onFileInputChange))},_onFileInputChange:function(a){var c=a.target.files&&a.target.files[0]||a.files&&a.files[0];if(this.format&&-1===this.format.indexOf(c.type))new b({message:this.nls.invalidType}),(!e("ie")||9<e("ie"))&&this._recreateFileForm();else{var d=9>e("ie")?23552:1024*this.maxSize;f.file.readFile(a,"image/*",d,p.hitch(this,function(a,f,g){a?(f=this.nls[a.errCode],
"exceed"===a.errCode&&(f=f.replace("1024",d/1024)),new b({message:f})):window.isXT&&this.cropImage&&"image/gif"!==c.type?this._cropImageByUser(g):this._readFileData(g);(!e("ie")||9<e("ie"))&&this._recreateFileForm()}))}},_recreateFileForm:function(){var a=p.clone(this.mask),b=p.clone(this.fileInput);h.destroy(this.mask);h.destroy(this.fileInput);var c=p.clone(this.fileForm);h.place(a,c);h.place(b,c);h.place(c,this.fileForm,"replace");this.maskHandle.remove();this.mask=a;this.fileInput=b;h.destroy(this.fileForm);
this.fileForm=c;this._porcessMaskClick();this._setupFileInput()},_readFileData:function(a){this.onImageChange(a);this.displayImg&&h.setAttr(this.displayImg,"src",a);this.showSelfImg&&(this.selfImg?h.setAttr(this.selfImg,"src",a):this.selfImg.src=a)},_cropImageByUser:function(a){var d=new s({imageSrc:a,nls:p.clone(this.nls),realWidth:this.goldenWidth,realHeight:this.goldenHeight}),f=new r({hidden:!0}),e=new t({titleLabel:this.nls.cropImage,content:d,width:500,height:480,buttons:[{label:this.nls.common.ok,
onClick:p.hitch(this,function(){var g=d.getImageSize(),k=d.getCropSize();f.show();c("/webappbuilder/rest/cropimage",{data:{imageData:a,imageDisplaySize:g.w+","+g.h,cropRectangle:k.w+","+k.h+","+k.t+","+k.l},method:"POST",handleAs:"json",headers:{"X-Requested-With":null}}).then(p.hitch(this,function(a){a.success?(this._readFileData(a.imageData),e.close()):(new b({message:this.nls.unknowError}),f.hide())}),p.hitch(this,function(a){console.error(a);new b({message:this.nls.unknowError});f.hide()}))})}]});
f.placeAt(e.domNode);d.startup();h.addClass(e.domNode,"image-chooser-crop-popup")},onImageChange:function(a){this.imageData=a}});l.GIF="image/gif";l.JPEG="image/jpeg";l.PNG="image/png";return l})},"jimu/dijit/_CropImage":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/on dojo/query dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_CropImage.html jimu/dijit/Message esri/lang dojo/NodeList-dom".split(" "),function(l,n,q,p,h,d,g,e,c,m){return l([d,g],{templateString:e,
inDrag:!1,inSlider:!1,realWidth:30,realHeight:30,ratio:null,imageSrc:null,_currentX:null,_currentY:null,_currentTop:0,_currentLeft:0,postCreate:function(){this._dragingHandlers=[];this.setImageSrc(this.imageSrc);this.own(p(this.ownerDocument,"mousemove",q.hitch(this,"_onMouseMove")));this.own(p(this.ownerDocument,"mouseup",q.hitch(this,"_onMouseUp")));this.loadingImg.src=require.toUrl("jimu")+"/images/loading.gif";this.own(p(this.baseImage,"load",q.hitch(this,function(){this._init();n.setStyle(this.loadingImg,
"display","none")})))},setImageSrc:function(c){n.setAttr(this.viewerImage,"src",c);n.setAttr(this.baseImage,"src",c)},getImageSize:function(){return{w:this._currentImageWidth,h:this._currentImageHeight}},getCropSize:function(){return{l:-this._currentLeft,t:-this._currentTop,w:this.idealWidth,h:this.idealHeight}},_init:function(){var d=this._getComputedStyle(this.cropSection),e=n.getContentBox(this.cropSection),g=this._getComputedStyle(this.baseImage),b=parseFloat(g.width)||this.baseImage.offsetWidth,
g=parseFloat(g.height)||this.baseImage.offsetHeight,l=b/g;this._maxImageWidth=b;this._maxImageHeight=g;if(g<this.realHeight&&b<this.realWidth)d=m.substitute({width:this.realWidth,height:this.realHeight},this.nls.cropWaining),setTimeout(q.hitch(this,function(){this.popup.close()}),50),new c({message:d});else{this.idealWidth=this.realWidth;this.idealHeight=this.realHeight;var k=this.ratio=this.ratio?this.ratio:this.realWidth/this.realHeight;1<=this.ratio?e.h*this.ratio<=e.w?(this.idealHeight=e.h,this.idealWidth=
e.h*this.ratio):(this.idealHeight=this._findProperlyValue(0,e.h,e.w-5,function(a){return a*k}),this.idealWidth=this.idealHeight*this.ratio):e.w/this.ratio<=e.h?(this.idealWidth=e.w,this.idealHeight=e.w/this.ratio):(this.idealWidth=this._findProperlyValue(0,e.w,e.h-5,function(a){return a/k}),this.idealHeight=this.idealWidth/this.ratio);n.setStyle(this.viewerBox,{width:this.idealWidth+"px",height:this.idealHeight+"px"});d=Math.abs((parseFloat(d.height)-this.idealHeight)/2);n.setStyle(this.cropSection,
{paddingTop:d+"px",paddingBottom:d+"px"});1<=l?this.idealHeight*l>=this.idealWidth?(n.setStyle(this.viewerImage,"height",this.idealHeight+"px"),n.setStyle(this.baseImage,"height",this.idealHeight+"px")):(d=this._findProperlyValue(0,this.idealWidth,this.idealWidth,function(a){return a*l}),n.setStyle(this.viewerImage,"height",d+"px"),n.setStyle(this.baseImage,"height",d+"px")):this.idealWidth/l>=this.idealHeight?(n.setStyle(this.viewerImage,"width",this.idealWidth+"px"),n.setStyle(this.baseImage,"width",
this.idealWidth+"px")):(d=this._findProperlyValue(0,this.idealHeight,this.idealHeight,function(a){return a/l}),n.setStyle(this.viewerImage,"width",d+"px"),n.setStyle(this.baseImage,"width",d+"px"));h(".hide-status",this.domNode).removeClass("hide-status");g=this._getComputedStyle(this.baseImage);b=parseFloat(g.width)||this.baseImage.offsetWidth;g=parseFloat(g.height)||this.baseImage.offsetHeight;this._minImageWidth=b;this._minImageHeight=g;this._currentImageWidth=b;this._currentImageHeight=g;this._currentTop=
-(g-this.idealHeight)/2;this._currentLeft=-(b-this.idealWidth)/2;n.setStyle(this.baseImage,{top:this._currentTop+"px",left:this._currentLeft+"px"});n.setStyle(this.viewerImage,{top:this._currentTop+"px",left:this._currentLeft+"px"});this._zoomRatio=this._maxImageWidth/this._minImageWidth;1>=this._zoomRatio&&n.addClass(this.zoomInBtn,"disable-zoom");n.addClass(this.zoomOutBtn,"disable-zoom");this._latestPercentage=window.isRTL?100:0}},_findProperlyValue:function(c,d,e,b,g){g=isFinite(g)?parseFloat(g):
1;e=0>e-g||0>e+g?g:e;var k=(c+d)/2,a=b(k);if(a<=e+g&&a>=e-g)return k;if(a>e)return this._findProperlyValue(c,k,e,b);if(a<e)return this._findProperlyValue(k,d,e,b)},_getComputedStyle:function(c){c=n.getMarginBox(c);return{width:c.w,height:c.h,left:c.l,top:c.t}},_onViewerMouseDown:function(c){var d=this._getComputedStyle(this.baseImage),e=this._getComputedStyle(this.viewerContent);this._maxOffsetLeft=parseFloat(e.width)-parseFloat(d.width);this._maxOffsetTop=parseFloat(e.height)-parseFloat(d.height);
this._maxOffsetLeft=0<this._maxOffsetLeft?0:this._maxOffsetLeft;this._maxOffsetTop=0<this._maxOffsetTop?0:this._maxOffsetTop;this.inDrag=!0;this._currentX=c.clientX;this._currentY=c.clientY;this._stopSelect()},_stopSelect:function(){this._dragingHandlers=this._dragingHandlers.concat([p(this.ownerDocument,"dragstart",function(c){c.stopPropagation();c.preventDefault()}),p(this.ownerDocumentBody,"selectstart",function(c){c.stopPropagation();c.preventDefault()})])},_removeStopSelect:function(){for(var c=
this._dragingHandlers.pop();c;)c.remove(),c=this._dragingHandlers.pop()},_onViewerMouseUp:function(c){this.inDrag&&(this.inDrag=!1,this._resetImagePosition(c.clientX,c.clientY),this._removeStopSelect(),c.stopPropagation())},_onSliderMouseDown:function(c){if(!(1>=this._zoomRatio)){this.inSlider=!0;this._currentX=c.clientX;this._currentY=c.clientY;var d=n.position(this.sliderNode);this._startSliderLeft=d.x;this._sliderWidth=d.w;this._stopSelect();c.stopPropagation()}},_onSliderMouseUp:function(c){if(!(1>=
this._zoomRatio)&&this.inSlider){this.inSlider=!1;this._resetSliderButtonPosition(c.clientX);var d=this._getComputedStyle(this.baseImage);this._currentLeft=parseFloat(d.left);this._currentTop=parseFloat(d.top);this._latestPercentage=100*((c.clientX-this._startSliderLeft)/this._sliderWidth);this._latestPercentage=this._normalizePercentage(this._latestPercentage);this._removeStopSelect();c.stopPropagation()}},_onMouseMove:function(c){this.inDrag&&this._resetImagePosition(c.clientX,c.clientY);this.inSlider&&
!(1>=this._zoomRatio)&&this._resetSliderButtonPosition(c.clientX,c.clientY)},_onMouseUp:function(c){this.inDrag&&this._onViewerMouseUp(c);this.inSlider&&this._onSliderMouseUp(c)},_onZoomOutClick:function(){1>=this._zoomRatio||this._zoomImage("out")},_onZoomInClick:function(){1>=this._zoomRatio||this._zoomImage("in")},_zoomImage:function(c){var d=0;this._latestPercentage=this._normalizePercentage(this._latestPercentage);"in"===c?d=window.isRTL?this._latestPercentage-20:this._latestPercentage+20:"out"===
c&&(d=window.isRTL?this._latestPercentage+20:this._latestPercentage-20);c=this._normalizePercentage(d);this._moveSliderButton(c,this._latestPercentage);this._latestPercentage=c;c=this._getComputedStyle(this.baseImage);this._currentLeft=parseFloat(c.left);this._currentTop=parseFloat(c.top)},_resetImagePosition:function(c,d){var e=c-this._currentX,b=d-this._currentY;0<=this._currentTop+b?(n.setStyle(this.baseImage,"top",0),n.setStyle(this.viewerImage,"top",0),this._currentY=d,this._currentTop=0):this._currentTop+
b<=this._maxOffsetTop?(n.setStyle(this.baseImage,"top",this._maxOffsetTop+"px"),n.setStyle(this.viewerImage,"top",this._maxOffsetTop+"px"),this._currentY=d,this._currentTop=this._maxOffsetTop):(n.setStyle(this.baseImage,"top",this._currentTop+b+"px"),n.setStyle(this.viewerImage,"top",this._currentTop+b+"px"),this._currentY=d,this._currentTop+=b);0<=this._currentLeft+e?(n.setStyle(this.baseImage,"left",0),n.setStyle(this.viewerImage,"left",0),this._currentX=c,this._currentLeft=0):this._currentLeft+
e<=this._maxOffsetLeft?(n.setStyle(this.baseImage,"left",this._maxOffsetLeft+"px"),n.setStyle(this.viewerImage,"left",this._maxOffsetLeft+"px"),this._currentX=c,this._currentLeft=this._maxOffsetLeft):(n.setStyle(this.baseImage,"left",this._currentLeft+e+"px"),n.setStyle(this.viewerImage,"left",this._currentLeft+e+"px"),this._currentX=c,this._currentLeft+=e)},_normalizePercentage:function(c){c=0>c?0:c;return 100<c?100:c},_resetSliderButtonPosition:function(c){c=100*((c-this._startSliderLeft)/this._sliderWidth);
c=this._normalizePercentage(c);this._moveSliderButton(c,this._latestPercentage)},_moveSliderButton:function(c,d){0>=c?n.addClass(this.zoomOutBtn,"disable-zoom"):n.removeClass(this.zoomOutBtn,"disable-zoom");100<=c?n.addClass(this.zoomInBtn,"disable-zoom"):n.removeClass(this.zoomInBtn,"disable-zoom");n.setStyle(this.sliderButton,"left",c+"%");window.isRTL&&(c=100-c,d=100-d);var e=this._minImageWidth*(this._zoomRatio-1)*c/100,b=this._minImageHeight*(this._zoomRatio-1)*c/100,g=this._getComputedStyle(this.baseImage);
this._currentLeft=parseFloat(g.left);this._currentTop=parseFloat(g.top);var g=(Math.abs(this._currentLeft)+this.idealWidth/2)*((this._minImageWidth+e)/this._currentImageWidth-1),k=(Math.abs(this._currentTop)+this.idealHeight/2)*((this._minImageWidth+e)/this._currentImageWidth-1);n.setStyle(this.baseImage,{width:this._minImageWidth+e+"px",height:this._minImageHeight+b+"px"});n.setStyle(this.viewerImage,{width:this._minImageWidth+e+"px",height:this._minImageHeight+b+"px"});this._currentImageWidth=this._minImageWidth+
e;this._currentImageHeight=this._minImageHeight+b;if(0<=c-d)n.setStyle(this.baseImage,{top:this._currentTop-k+"px",left:this._currentLeft-g+"px"}),n.setStyle(this.viewerImage,{top:this._currentTop-k+"px",left:this._currentLeft-g+"px"});else{var a=0,h=0,a=0<=this._currentTop-k?0:this._currentTop-k+this._minImageHeight+b<=this.idealHeight?this.idealHeight-this._minImageHeight-b:this._currentTop-k,h=0<=this._currentLeft-g?0:this._currentLeft-g+this._minImageWidth+e<=this.idealWidth?this.idealWidth-this._minImageWidth-
e:this._currentLeft-g;n.setStyle(this.baseImage,{top:a+"px",left:h+"px"});n.setStyle(this.viewerImage,{top:a+"px",left:h+"px"})}this._latestPercentage=c}})})},"widgets/Query/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:jimu/dijit/templates/QueryableLayerSource.html":'\x3cdiv\x3e\r\n\t\x3ctable class\x3d"radio-table" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd class\x3d"map-td" nowrap\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"mapRadio" type\x3d"radio" data-dojo-attach-event\x3d"onclick: _onRadioClicked" checked /\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"mapLabel"\x3e${nls.selectFromMap}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"portal-td" nowrap\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"portalRadio" type\x3d"radio" data-dojo-attach-event\x3d"onclick: _onRadioClicked" /\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalLabel"\x3e${nls.selectFromPortal}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"url-td" nowrap\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"urlRadio" type\x3d"radio" data-dojo-attach-event\x3d"onclick: _onRadioClicked" /\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"urlLabel"\x3e${nls.addServiceUrl}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"source-content"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"operationTip" class\x3d"operation-tip"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"mapDijitContainer" class\x3d"dijit-container map-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"portalDijitContainer" class\x3d"dijit-container portal-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"urlDijitContainer" class\x3d"dijit-container url-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"contentNode" class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\r\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\r\n\t\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\r\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:jimu/dijit/templates/QueryableServiceChooserFromPortal.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"selector-container" data-dojo-attach-point\x3d"selectorContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"footer"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel" data-dojo-attach-point\x3d"btnCancel" data-dojo-attach-event\x3d"onclick:_onBtnCancelClicked"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing next jimu-state-disabled" data-dojo-attach-point\x3d"btnNext" data-dojo-attach-event\x3d"onclick:_onBtnNextClicked"\x3e${nls.next}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing ok jimu-state-disabled" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClicked"\x3e${nls.ok}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing back" data-dojo-attach-point\x3d"btnBack" data-dojo-attach-event\x3d"onclick:_onBtnBackClicked"\x3e${nls.back}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/ItemSelector.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"setting-tab-container"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"tabNode"\x3e\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content mycontent-tab" data-dojo-attach-point\x3d"mycontentTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main mycontent-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onMyContentSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content organization-tab" data-dojo-attach-point\x3d"organizationTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main organization-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onOrganizationSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content group-tab" data-dojo-attach-point\x3d"groupTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main group-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"groups-section" style\x3d"position:absolute;width:100%;top:50px;" data-dojo-attach-point\x3d"groupsSection"\x3e\r\n\t\t\t\t\t\x3cspan\x3e${nls.groups}:\x3c/span\x3e\r\n\t\t\t\t\t\x3cselect class\x3d"groups-select" data-dojo-attach-point\x3d"groupsSelect"\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"nodata"\x3e${nls.noneGroups}\x3c/option\x3e\r\n\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onGroupSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:85px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content public-tab" data-dojo-attach-point\x3d"publicTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main public-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onPublicSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"public-search-radios"\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"portalPublicRaido" type\x3d"radio" name\x3d"publicSearchRadio" class\x3d"jimu-float-leading portal-public-radio" /\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalPublicLabel" class\x3d"jimu-float-leading portal-public-label"\x3ePortal\x3c/label\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"onlinePublicRaido" type\x3d"radio" name\x3d"publicSearchRadio" class\x3d"jimu-float-leading online-public-radio" /\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"onlinePublicLabel" class\x3d"jimu-float-leading online-public-label"\x3eArcGIS Online\x3c/label\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicItemSection" class\x3d"public-item-section"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicPortalItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicOnlineItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"signin-section" data-dojo-attach-point\x3d"signinSection" style\x3d"display:none;"\x3e\r\n\t\t\x3cdiv class\x3d"signin-tip"\x3e${nls.signInTip}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_ItemTable.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"items-section all-items-section" data-dojo-attach-point\x3d"allItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"allItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onAllItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"allItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"allItemTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"allItemsShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"items-section filtered-items-section" data-dojo-attach-point\x3d"filteredItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"filteredItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onFilteredItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"filteredItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"filteredItemsTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"search-none-tip-section" data-dojo-attach-point\x3d"searchNoneTipSection" style\x3d"display:none;"\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-icon jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-tip jimu-state-error-text"\x3e${nls.searchNone}\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"filteredItemShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_BasicServiceChooserContent.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"content-section"\x3e\r\n\t\t\x3ctable class\x3d"layout"\x3e\r\n\t\t\t\x3ccolgroup\x3e\r\n\t\t\t\t\x3ccol width\x3d"80px" align\x3d"right"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"170px"\x3e\x3c/col\x3e\r\n\t\t\t\x3c/colgroup\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3eURL:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"urlInput" data-dojo-type\x3d"jimu/dijit/URLInput" style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"jimu-btn jimu-state-disabled validate-btn jimu-float-trailing" data-dojo-attach-point\x3d"btnValidate" data-dojo-attach-event\x3d"onclick:_onBtnValidateClick"\x3e${nls.validate}\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3ctr data-dojo-attach-point\x3d"exampleTr" class\x3d"example-tr"\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td" style\x3d"padding-top:5px;"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3e${nls.example}:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd data-dojo-attach-point\x3d"exampleTd" colspan\x3d"2" style\x3d"padding-top:5px;font-style:italic;color:#ccc;"\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\r\n\t\t\t\x3cdiv class\x3d"error-section" data-dojo-attach-point\x3d"errorSection"\x3e\r\n\t\t\t\t\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"error-message" data-dojo-attach-point\x3d"errorNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"operations"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel" data-dojo-attach-event\x3d"onclick:_onBtnCancelClick"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-state-disabled ok" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClick"\x3e${nls.ok}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Query/setting/SingleQuerySetting.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"filterDiv" style\x3d"height:1px;visibility:hidden;overflow:hidden;"\x3e\x3c/div\x3e\r\n\t\x3ctable data-dojo-attach-point\x3d"generalTable" class\x3d"general" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd class\x3d"first-td"\x3e${nls.querySource}\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"second-td"\x3e\r\n\t\t\t\t\t\x3ctable cellpadding\x3d"0" cellspacing\x3d"0" style\x3d"width:100%;border-collapse:collapse;"\x3e\r\n\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:auto;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"urlTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d\'required:true,trim:true,disabled:true\' style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:40px;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cdiv class\x3d"setting-btn jimu-float-trailing" data-dojo-attach-event\x3d"onclick:_onBtnSetSourceClicked" title\x3d"${nls.setSource}"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3cdiv class\x3d"jimu-icon jimu-icon-setting"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"detailSection" class\x3d"detail"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"infoTabNode"\x3e\r\n\t\t\t\x3ctable class\x3d"general" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e${jimuNls.common.title}\x3c/td\x3e\r\n\t\t\t\t\t\t\x3ctd class\x3d"second-td"\x3e\r\n\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"queryNameTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d\'required:true,trim:true\' style\x3d"width:100%;" data-dojo-attach-event\x3d"change:_onQueryNameChanged"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e${nls.icon}\x3c/td\x3e\r\n\t\t\t\t\t\t\x3ctd class\x3d"second-td"\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"click-picker" data-dojo-attach-event\x3d"click:_onImageChooserDivClicked"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/ImageChooser" data-dojo-attach-point\x3d"imageChooser" data-dojo-props\x3d"cropImage:true,showSelfImg:true,goldenWidth:16,goldenHeight:16,format:[\'image/gif\',\'image/png\',\'image/jpeg\']" class\x3d"jimu-float-leading" style\x3d"width:16px;height:16px;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"separator jimu-float-leading"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"jimu-icon jimu-icon-down-arrow-8 jimu-float-leading"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"definitionTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"attribute-filter-section"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"stress"\x3e${nls.attributeCriteira}\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"attribute-filter-content"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"jimu-widget-note" style\x3d"margin-top:5px;"\x3e${nls.defineWhereClause}\x3c/div\x3e\r\n\t\t\t\t\t\x3ctable style\x3d"width:100%;margin-top:4px;"\x3e\r\n\t\t\t\t\t\t\x3ccolgroup\x3e\r\n\t\t\t\t\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\t\t\t\t\x3ccol width\x3d"40"\x3e\x3c/col\x3e\r\n\t\t\t\t\t\t\x3c/colgroup\x3e\r\n\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cdiv class\x3d"attribute-sql jimu-widget-note" data-dojo-attach-point\x3d"sqlDiv" style\x3d"border:1px solid #ccc;padding:7px 8px;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cdiv class\x3d"setting-btn jimu-float-trailing" data-dojo-attach-event\x3d"onclick:_onBtnFilterClicked" title\x3d"${nls.setSource}"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3cdiv class\x3d"jimu-icon jimu-icon-setting"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\t\x3cdiv style\x3d"margin-top:13px;" data-dojo-attach-point\x3d"showSQLSection"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"spatial-filter-section" data-dojo-attach-point\x3d"spatialFilterDiv"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"resultsTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"popup-section"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"stress"\x3e${nls.content}\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"popupContainer"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"symbolSection" class\x3d"symbol-section" style\x3d"margin-top:14px;"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"stress" style\x3d"margin-bottom:15px;"\x3e${nls.symbol}\x3c/div\x3e\r\n\t\t\t\t\x3cdiv style\x3d"margin-top:5px;"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"radio-label-container"\x3e\r\n\t\t\t\t\t\t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"radioServiceSymbol" /\x3e\r\n\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"labelServiceSymbol"\x3e${nls.serviceSymbolTip}\x3c/label\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"radio-label-container" style\x3d"margin-top:8px;"\x3e\r\n\t\t\t\t\t\t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"radioCustomSymbol" checked /\x3e\r\n\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"labelCustomSymbol"\x3e${nls.setSymbol}\x3c/label\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"layerSymbolPicker" data-dojo-type\x3d"jimu/dijit/SymbolPicker"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"optionsTabNode"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"cbxKeepResultsDiv" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"export-section" data-dojo-attach-point\x3d"exportSection"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"create-layer-section"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"stress"\x3e${nls.createLayerForTaskTip}\x3c/div\x3e\r\n\t\t\t\t\x3cdiv style\x3d"margin-top:15px;"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"radio-label-container"\x3e\r\n\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"radioOneLayerPerTask" type\x3d"radio" checked /\x3e\r\n\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"labelOneLayerPerTask"\x3e${nls.oneLayerForTaskTip}\x3c/label\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"radio-label-container" style\x3d"margin-top:15px;"\x3e\r\n\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"radioMultipleLayerPerTask" type\x3d"radio" /\x3e\r\n\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"labelMultipleLayerPerTask"\x3e${nls.multipleLayerForTaskTip}\x3c/label\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Query/setting/PopupConfig.html":'\x3cdiv\x3e\r\n\t\x3cdiv style\x3d"margin-top:15px;margin-bottom:10px;"\x3e\r\n\t\t\x3cdiv class\x3d"radio-label-container radio-div portal-radio-div"\x3e\r\n\t\t\t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"portalRadio" /\x3e\r\n\t\t\t\x3clabel data-dojo-attach-point\x3d"portalLabel"\x3e${nls.webMapPopupTip}\x3c/label\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"radio-label-container radio-div custom-radio-div" style\x3d"margin-top:15px;"\x3e\r\n\t\t\t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"customRadio" /\x3e\r\n\t\t\t\x3clabel data-dojo-attach-point\x3d"customLabel" checked\x3e${nls.customPopupTip}\x3c/label\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3ctable class\x3d"title-sorting-table"\x3e\r\n\t\t\x3ccolgroup\x3e\r\n\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\x3ccol width\x3d"38px"\x3e\x3c/col\x3e\r\n\t\t\x3c/colgroup\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr class\x3d"indent-tr"\x3e\r\n\t\t\t\t\x3ctd colspan\x3d"2" class\x3d"indent-td" style\x3d"padding-bottom:4px;"\x3e\r\n\t\t\t\t\t\x3cspan class\x3d"light-stress"\x3e${nls.resultItemTitle}:\x3c/span\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr class\x3d"indent-tr"\x3e\r\n\t\t\t\t\x3ctd class\x3d"indent-td"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"titleTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n\t\t\t\t\tdata-dojo-props\x3d\'required:true,trim:true\' style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnAddFields" data-dojo-attach-event\x3d"onclick:_onAddClicked" class\x3d"setting-btn btn-add-fields jimu-float-trailing"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"jimu-icon jimu-icon-add"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr class\x3d"indent-tr"\x3e\r\n\t\t\t\t\x3ctd colspan\x3d"2" class\x3d"indent-td" style\x3d"padding-top:10px;padding-bottom:4px;"\x3e\r\n\t\t\t\t\t\x3cspan class\x3d"light-stress"\x3e${nls.resultItemContent}:\x3c/span\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr class\x3d"indent-tr"\x3e\r\n\t\t\t\t\x3ctd class\x3d"indent-td"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"displayFieldsTextBox" class\x3d"display-fields-textbox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n\t\t\t\t\tdata-dojo-props\x3d\'required:true,trim:true,disabled:true\' style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnSetDisplayFields" class\x3d"setting-btn btn-display-fields jimu-float-trailing" data-dojo-attach-event\x3d"onclick:_onBtnSetDisplayFieldsClicked"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"jimu-icon jimu-icon-edit"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd colspan\x3d"2" style\x3d"padding-top:15px;padding-bottom:7px;"\x3e\r\n\t\t\t\t\t\x3cspan class\x3d"light-stress"\x3e${nls.sortingFields}:\x3c/span\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd data-dojo-attach-point\x3d"tdSortFields"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"sortFieldsDiv" class\x3d"sort-fields-div jimu-ellipsis"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnSortFields" class\x3d"setting-btn btn-sort-fields jimu-float-trailing" data-dojo-attach-event\x3d"onclick:_onBtnSortFieldsClicked"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"jimu-icon jimu-icon-edit" data-dojo-attach-point\x3d"sortFieldsIcon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"displayFieldsSection" style\x3d"display:none;"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"displayFieldsDiv"\x3e\r\n\t\t\t\x3cdiv style\x3d"margin-top:7px;margin-bottom:8px;font-size:12px;"\x3e${nls.fieldsSetTip}\x3c/div\x3e\r\n\t\t  \x3cdiv data-dojo-attach-point\x3d"fieldsContainer"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Query/setting/SortFields.html":'\x3cdiv\x3e\r\n\t\x3cdiv\x3e${nls.configureFieldsTip}\x3c/div\x3e\r\n\t\x3cdiv class\x3d"add-with-icon" data-dojo-attach-event\x3d"onclick:_onAddNewClicked"\x3e\r\n\t\t\x3cspan class\x3d"jimu-icon jimu-icon-add"\x3e\x3c/span\x3e\r\n\t\t\x3cspan class\x3d"add-label"\x3e${nls.addNew}\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"tableDiv"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"url:widgets/Query/setting/SpatialFilterConfig.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"stress"\x3e${nls.spatialFilter}\x3c/div\x3e\r\n\t\x3cdiv class\x3d"spatial-filter-content"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-widget-note" style\x3d"margin-top:5px;"\x3e${nls.spatialFilterTip}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"spatial-filter-items" style\x3d"margin-top:5px;"\x3e\r\n\t\t\t\x3cdiv class\x3d"spatial-filter-item" data-dojo-attach-point\x3d"mapExtentSection"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"spatial-filter-item-head"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"checkbox-container" data-dojo-attach-point\x3d"cbxMapExtentDiv"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"icon-placeholder"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"make-default" data-dojo-attach-event\x3d"onclick:_onBtnMakeDefaultClicked"\x3e${nls.makeDefault}\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"default-text"\x3e${nls.defaultOption}\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"spatial-filter-item" data-dojo-attach-point\x3d"drawGraphicSection"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"spatial-filter-item-head"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"checkbox-container cbx-draw-graphic-div" data-dojo-attach-point\x3d"cbxDrawGraphicDiv"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"icon-placeholder arrow-icon" data-dojo-attach-point\x3d"arrowIconDrawGraphic" data-dojo-attach-event\x3d"onclick:_onDrawGraphicArrowIconClicked"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"make-default" data-dojo-attach-event\x3d"onclick:_onBtnMakeDefaultClicked"\x3e${nls.makeDefault}\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"default-text"\x3e${nls.defaultOption}\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"drawGraphicSettting" class\x3d"draw-graphic-setting hidden-setting leading-padding20"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"drawing-tools-section"\x3e\r\n\t\t\t\t\t\t\x3cdiv style\x3d"font-weight:bold;"\x3e${nls.drawingTools}\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"drawingToolsContainer" class\x3d"drawing-tools-container" data-dojo-attach-event\x3d"onclick:_onDrawingToolsContainerClicked"\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item point" data-geotype\x3d"POINT"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item-icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item line" data-geotype\x3d"LINE"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item-icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item polyline" data-geotype\x3d"POLYLINE"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item-icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item freehand-polyline" data-geotype\x3d"FREEHAND_POLYLINE"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item-icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item triangle" data-geotype\x3d"TRIANGLE"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item-icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item extent" data-geotype\x3d"EXTENT"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item-icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item circle" data-geotype\x3d"CIRCLE"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item-icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item ellipse" data-geotype\x3d"ELLIPSE"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item-icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item polygon" data-geotype\x3d"POLYGON"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item-icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item freehand-polygon" data-geotype\x3d"FREEHAND_POLYGON"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item-icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"search-distance-section" \x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"drawBufferSettingCbxDiv"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"search-distance-div" data-dojo-attach-point\x3d"drawingSearchDistanceDiv" style\x3d"margin-top:5px;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"spatial-filter-item" data-dojo-attach-point\x3d"useFeaturesSection"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"spatial-filter-item-head"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"checkbox-container cbx-use-features-div" data-dojo-attach-point\x3d"cbxUseFeaturesDiv"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"icon-placeholder arrow-icon" data-dojo-attach-point\x3d"arrowIconFeatures" data-dojo-attach-event\x3d"onclick:_onFeaturesArrowIconClicked"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"make-default" data-dojo-attach-event\x3d"onclick:_onBtnMakeDefaultClicked"\x3e${nls.makeDefault}\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"default-text"\x3e${nls.defaultOption}\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"featuresSetting" class\x3d"features-setting hidden-setting leading-padding20"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"relationships-section" style\x3d"margin-top:10px;"\x3e\r\n\t\t\t\t\t\t\x3cdiv style\x3d"font-weight:bold;"\x3e${nls.availableSpatialRelationships}\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"relationships-selector-div"\x3e\r\n\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"relationshipTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d\'required:true,trim:true,disabled:true\'\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"setting-btn jimu-float-trailing" data-dojo-attach-event\x3d"onclick:_onBtnRelationshipClicked"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"jimu-icon jimu-icon-setting"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"search-distance-section" style\x3d"margin-top:10px;"\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"featureBufferSettingCbxDiv"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"search-distance-div" data-dojo-attach-point\x3d"featuresSearchDistanceDiv" style\x3d"margin-top:5px;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"spatial-filter-item" data-dojo-attach-point\x3d"layerExtentSection"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"spatial-filter-item-head"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"checkbox-container" data-dojo-attach-point\x3d"cbxLayerExtentDiv"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"icon-placeholder"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"make-default" data-dojo-attach-event\x3d"onclick:_onBtnMakeDefaultClicked"\x3e${nls.makeDefault}\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"default-text"\x3e${nls.defaultOption}\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Query/setting/SearchDistance.html":'\x3cdiv\x3e\r\n\t\x3ctable style\x3d"table-layout:fixed;"\x3e\r\n\t\t\x3ccolgroup\x3e\r\n\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\x3ccol width\x3d"15px"\x3e\x3c/col\x3e\r\n\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\x3c/colgroup\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd style\x3d"padding-bottom:5px;"\x3e${nls.defaultDistance}\x3c/td\x3e\r\n\t\t\t\t\x3ctd\x3e\x3c/td\x3e\r\n\t\t\t\t\x3ctd\x3e${nls.defaultUnit}\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"numberTextBox" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n\t\t\t\t\t data-dojo-props\x3d\'"required":true,intermediateChanges:true,constraints:{min:0,pattern:"#####0.##########"}\'\r\n\t\t\t\t\t style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd\x3e\x3c/td\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cselect data-dojo-type\x3d"dijit/form/Select" class\x3d"restrict-select-width" data-dojo-attach-point\x3d"defaultUnitSelect" style\x3d"width:100%;"\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"MILES" selected\x3e${nls.miles}\x3c/option\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"KILOMETERS"\x3e${nls.kilometers}\x3c/option\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"FEET"\x3e${nls.feet}\x3c/option\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"METERS"\x3e${nls.meters}\x3c/option\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"YARDS"\x3e${nls.yards}\x3c/option\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"NAUTICAL_MILES"\x3e${nls.nauticalMiles}\x3c/option\x3e\r\n\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/Filter.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"contentSection" class\x3d"content-section"\x3e\r\n\t\t\x3cdiv class\x3d"add-btn-section"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnAddExp" data-dojo-attach-event\x3d"click:_onBtnAddExpClick"\r\n\t\t\t class\x3d"add-with-icon jimu-state-disabled add-expression jimu-float-leading"\x3e\r\n\t\t\t\t\x3cspan data-dojo-attach-point\x3d"iconAddExp" class\x3d"jimu-icon jimu-icon-add jimu-state-disabled"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"add-label"\x3e${nls.addAnotherExpression}\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnAddSet" data-dojo-attach-event\x3d"click:_onBtnAddSetClick"\r\n\t\t\t class\x3d"add-with-icon jimu-state-disabled add-set jimu-float-leading"\x3e\r\n\t\t\t\t\x3cspan data-dojo-attach-point\x3d"iconAddSet" class\x3d"jimu-icon jimu-icon-add jimu-state-disabled"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"add-label"\x3e${nls.addSet}\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"matchMsg" style\x3d"margin-top:11px;margin-bottom:11px;display:none;"\x3e\r\n\t\t\t\x3cspan\x3e${nls.strMatchMsgPart1}\x3c/span\x3e\r\n\t\t\t\x3cselect data-dojo-attach-point\x3d"allAnySelect"\x3e\r\n\t\t\t\t\x3coption value\x3d"AND" selected\x3e${nls.all}\x3c/option\x3e\r\n\t\t\t\t\x3coption value\x3d"OR"\x3e${nls.any}\x3c/option\x3e\r\n\t\t\t\x3c/select\x3e\r\n\t\t\t\x3cspan\x3e${nls.strMatchMsgPart2}\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\t\x3cdiv class\x3d"allExpsBox" data-dojo-attach-point\x3d"allExpsBox"\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"errorSection" style\x3d"display:none;"\x3e\r\n\t\t\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"errorTip" class\x3d"error-tip"\x3e\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"noFilterTipSection" class\x3d"no-filter-tip" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_SingleFilter.html":'\x3cdiv\x3e\r\n\t\x3ctable class\x3d"setting-table" cellpadding\x3d"0" cellspacing\x3d"0" cellpadding\x3d"10px" style\x3d"table-layout:fixed;"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd class\x3d"fields-td" nowrap\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"fieldsSelect" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-attach-event\x3d"change:_onFieldsSelectChange"  data-dojo-props\x3d\'searchAttr:"displayName",required:true,intermediateChanges:true\' class\x3d"dijit-form-FilteringSelect" style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"operators-td" nowrap\x3e\r\n\t\t\t\t\t\x3cselect data-dojo-attach-point\x3d"operatorsSelect" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-event\x3d"change:_onOperatorsSelectChange" style\x3d"width:100%;" class\x3d"dijit-form-Select restrict-select-width"\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"none"\x3e${nls.none}\x3c/option\x3e\r\n\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"value-td" nowrap\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"attributeValueContainer" class\x3d"value-container"\x3e\r\n\t\t\t\t\t\t\x3cdiv\x3e\r\n\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"allValueBoxContainer" style\x3d"width:100%;"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"stringTextBoxContainer" style\x3d"width:100%;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"stringTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true" style\x3d"width:100%;" class\x3d"dijit-form-ValidationTextBox" /\x3e\r\n\r\n\t\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"stringCodedValuesFS" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-props\x3d\'searchAttr:"name",required:true,intermediateChanges:true\' class\x3d"dijit-form-FilteringSelect" style\x3d"display:none;width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"numberTextBoxContainer" style\x3d"display:none;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"numberTextBox" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d\'"required":true,intermediateChanges:true,constraints: {pattern: "#####0.##########"}\' class\x3d"dijit-form-NumberTextBox" style\x3d"width:100%;" /\x3e\r\n\r\n\t\t\t\t\t\t\t\t\t\x3ctable data-dojo-attach-point\x3d"numberRangeTable" style\x3d"display:none;width:100%;border-collapse:collapse;table-layout:fixed;" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:40%;"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"numberTextBox1" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-event\x3d"blur:_onRangeNumberBlur" data-dojo-props\x3d\'"required":true,intermediateChanges:true,constraints: {pattern: "#####0.##########"}\' class\x3d"dijit-form-NumberTextBox" style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:20%;text-align:center;"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cspan\x3e${nls.and}\x3c/span\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:40%;"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"numberTextBox2" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-event\x3d"blur:_onRangeNumberBlur" data-dojo-props\x3d\'"required":true,intermediateChanges:true,constraints: {pattern: "#####0.##########"}\' class\x3d"dijit-form-NumberTextBox" style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/table\x3e\r\n\r\n\t\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"numberCodedValuesFS" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-props\x3d\'searchAttr:"name",required:true,intermediateChanges:true\' class\x3d"dijit-form-FilteringSelect" style\x3d"display:none;width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"dateTextBoxContainer" style\x3d"display:none;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"dateTextBox" data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-props\x3d\'value:new Date(),required:true,trim:true\' class\x3d"dijit-form-DateTextBox" style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\t\t\t\t\t\x3ctable data-dojo-attach-point\x3d"dateRangeTable" style\x3d"display:none;width:100%;border-collapse:collapse;table-layout:fixed;" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:40%;"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"dateTextBox1" data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-attach-event\x3d"change:_onRangeDateBlur" data-dojo-props\x3d\'value:new Date(),required:true,trim:true\' class\x3d"dijit-form-DateTextBox" style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:20%;text-align:center;"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cspan\x3e${nls.and}\x3c/span\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"dateTextBox2" data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-attach-event\x3d"change:_onRangeDateBlur" data-dojo-props\x3d\'value:new Date(),required:true,trim:true\' class\x3d"dijit-form-DateTextBox" style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"fieldsSelect2" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-props\x3d\'searchAttr:"name"\' class\x3d"dijit-form-FilteringSelect" style\x3d"display:none;width:100%;"\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"uniqueValuesSelect" data-dojo-type\x3d"dijit/form/FilteringSelect"  data-dojo-props\x3d\'searchAttr:"label"\' class\x3d"dijit-form-FilteringSelect" style\x3d"display:none;width:100%;"\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\t\t\x3cdiv class\x3d"radio-table-container"\x3e\r\n\t\t\t\t\t\t\t\x3ctable class\x3d"radio-table" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"valueRadio" checked\x3d"true" disabled  title\x3d"${nls.valueTooltip}" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"valueLabel" title\x3d"${nls.valueTooltip}"\x3e${nls.value}\x3c/label\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"fieldRadio" disabled title\x3d"${nls.fieldTooltip}" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"fieldLabel" title\x3d"${nls.fieldTooltip}"\x3e${nls.field}\x3c/label\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctd data-dojo-attach-point\x3d"uniqueTd"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"uniqueRadio" disabled title\x3d"${nls.uniqueValueTooltip}" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"uniqueLabel" title\x3d"${nls.uniqueValueTooltip}"\x3e${nls.unique}\x3c/label\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"delete-td" nowrap\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"jimu-icon jimu-icon-delete" data-dojo-attach-point\x3d"btnDelete"\r\n\t\t\t\t\t data-dojo-attach-event\x3d"click:_destroySelf"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"askvalues"\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"cbxAskValues" label\x3d"${nls.askForValues}" class\x3d"jimu-trailing-margin6"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"cbxCaseSensitive" label\x3d"${nls.caseSensitive}" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"promptSection" class\x3d"prompt"\x3e\r\n\t\t\x3ctable data-dojo-attach-point\x3d"promptTable" cellpadding\x3d"0" cellspacing\x3d"0" class\x3d"prompt-table"\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3e${nls.prompt}\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"second-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"promptTB" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true" style\x3d"width:100%;" class\x3d"dijit-form-ValidationTextBox" \x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3e${nls.hint}\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"second-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"hintTB" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"trim:true" style\x3d"width:100%;" class\x3d"dijit-form-ValidationTextBox" \x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/Calendar.html":'\x3cdiv class\x3d"dijitCalendarContainer dijitInline" role\x3d"presentation" aria-labelledby\x3d"${id}_mddb ${id}_year"\x3e\r\n\t\x3cdiv class\x3d"dijitReset dijitCalendarMonthContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d\'dijitReset dijitCalendarArrow dijitCalendarDecrementArrow\' data-dojo-attach-point\x3d"decrementMonth"\x3e\r\n\t\t\t\x3cimg src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitCalendarIncrementControl dijitCalendarDecrease" role\x3d"presentation"/\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"decreaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e-\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d\'dijitReset dijitCalendarArrow dijitCalendarIncrementArrow\' data-dojo-attach-point\x3d"incrementMonth"\x3e\r\n\t\t\t\x3cimg src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitCalendarIncrementControl dijitCalendarIncrease" role\x3d"presentation"/\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"increaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e+\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"monthNode" class\x3d"dijitInline"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3ctable cellspacing\x3d"0" cellpadding\x3d"0" role\x3d"grid" data-dojo-attach-point\x3d"gridNode"\x3e\r\n\t\t\x3cthead\x3e\r\n\t\t\t\x3ctr role\x3d"row"\x3e\r\n\t\t\t\t${!dayCellsHtml}\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/thead\x3e\r\n\t\t\x3ctbody data-dojo-attach-point\x3d"dateRowsNode" data-dojo-attach-event\x3d"ondijitclick: _onDayClick" class\x3d"dijitReset dijitCalendarBodyContainer"\x3e\r\n\t\t\t\t${!dateRowsHtml}\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"dijitReset dijitCalendarYearContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d"dijitCalendarYearLabel"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"previousYearLabelNode" class\x3d"dijitInline dijitCalendarPreviousYear" role\x3d"button"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"currentYearLabelNode" class\x3d"dijitInline dijitCalendarSelectedYear" role\x3d"button" id\x3d"${id}_year"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"nextYearLabelNode" class\x3d"dijitInline dijitCalendarNextYear" role\x3d"button"\x3e\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:jimu/dijit/templates/_FilterSet.html":'\x3cdiv\x3e\r\n\t\x3ctable class\x3d"header-table" cellspacing\x3d"0" cellpadding\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cdiv\x3e\r\n\t\t\t\t\t\t\x3cspan\x3e${nls.strMatchMsgPart1}\x3c/span\x3e\r\n\t\t\t\t\t\t\x3cselect data-dojo-attach-point\x3d"allAnySelect"\x3e\r\n\t\t\t\t\t\t\t\x3coption value\x3d"AND" selected\x3e${nls.all}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\x3coption value\x3d"OR"\x3e${nls.any}\x3c/option\x3e\r\n\t\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\t\t\x3cspan\x3e${nls.strMatchMsgPart2}\x3c/span\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:15px;padding-right:10px;"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnDelete" data-dojo-attach-event\x3d"onclick:_destroySelf"\r\n\t\t\t\t\t class\x3d"jimu-icon jimu-icon-delete"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:15px;padding-right:14px;"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnAdd" class\x3d"jimu-icon jimu-icon-add"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"allExpsBox"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/ImageChooser.html":'\x3cdiv class\x3d"jimu-image-chooser js-fileapi-wrapper"\x3e\r\n  \x3cdiv class\x3d"hint" data-dojo-attach-point\x3d"hintText"\x3e\r\n\t\t\x3cspan class\x3d"display-text" data-dojo-attach-point\x3d"displayText"\x3e\x3c/span\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"hint" data-dojo-attach-point\x3d"hintImage"\x3e\r\n\t\t\x3cimg class\x3d"display-image" data-dojo-attach-point\x3d"selfImg"\x3e\r\n  \x3c/div\x3e\r\n  \x3cform data-dojo-attach-point\x3d"fileForm"\x3e\r\n    \x3clabel data-dojo-attach-point\x3d"mask"\x3e\x3c/label\x3e\r\n    \x3cinput type\x3d"file" data-dojo-attach-point\x3d"fileInput"\x3e\r\n  \x3c/form\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_CropImage.html":'\x3cdiv class\x3d"jimu-crop-image"\x3e\r\n\t\x3cdiv class\x3d"crop-section" data-dojo-attach-point\x3d"cropSection"\x3e\r\n\t\t\x3cdiv class\x3d"viewer-box hide-status" data-dojo-attach-point\x3d"viewerBox"\x3e\r\n\t\t\t\x3cdiv class\x3d"viewer-content" data-dojo-attach-point\x3d"viewerContent"\x3e\r\n\t\t\t\t\x3cimg class\x3d"viewer-image hide-status" data-dojo-attach-point\x3d"viewerImage" src\x3d""\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cimg class\x3d"base-image hide-status" data-dojo-attach-point\x3d"baseImage" data-dojo-attach-event\x3d"mousedown:_onViewerMouseDown,mouseup:_onViewerMouseUp"\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cimg class\x3d"loading-image" data-dojo-attach-point\x3d"loadingImg" src\x3d""\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"controller hide-status" data-dojo-attach-point\x3d"zoomController"\x3e\r\n\t\t\x3cdiv class\x3d"zoom-out" data-dojo-attach-point\x3d"zoomOutBtn" data-dojo-attach-event\x3d"click:_onZoomOutClick"\x3e-\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"slider" data-dojo-attach-point\x3d"sliderNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"button" data-dojo-attach-point\x3d"sliderButton" data-dojo-attach-event\x3d"mousedown:_onSliderMouseDown,mouseup:_onSliderMouseUp"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"horizontal"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"zoom-in" data-dojo-attach-point\x3d"zoomInBtn" data-dojo-attach-event\x3d"click:_onZoomInClick"\x3e+\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/Query/setting/Setting.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"add-task-tip"\x3e${nls.addTaskTip}\x3c/div\x3e\r\n\t\x3cdiv class\x3d"content"\x3e\r\n\t\t\x3cdiv class\x3d"items-list jimu-not-selectable"\x3e\r\n\t\t\t\x3cdiv class\x3d"add-btn" data-dojo-attach-event\x3d"click:_onBtnAddItemClicked"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"tip"\x3e${nls.newQuery}\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"items-list-content" data-dojo-attach-point\x3d"listContent" data-dojo-attach-event\x3d"click:_onListContentClicked"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"separator not-visible" data-dojo-attach-point\x3d"separator"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"single-setting-content" data-dojo-attach-point\x3d"singleSettingContent"\x3e\r\n\t\t\t\x3cdiv class\x3d"no-query-tip" data-dojo-attach-point\x3d"noQueryTip"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Query/setting/css/style.css":'.jimu-widget-query-setting{width: 100%; height: 100%; font-size: 12px;}.jimu-widget-query-setting .add-task-tip{font-size: 12px;}.jimu-widget-query-setting .not-visible{display: none;}.jimu-widget-query-setting .content{position: absolute; left: 0; right: 0; top: 40px; bottom: 0;}.jimu-widget-query-setting .content \x3e div{position: absolute; top: 0; bottom: 0; height: 100%;}.jimu-widget-query-setting .items-list{left: 0; width: 300px;}.jimu-widget-query-setting \x3e .content \x3e .separator{left: 320px; width: 1px; background-color: #ccc;}.jimu-widget-query-setting .single-setting-content{right: 0; width: 625px;}.jimu-rtl .jimu-widget-query-setting .items-list{left: auto; right: 0;}.jimu-rtl .jimu-widget-query-setting \x3e .content \x3e .separator{left: auto; right: 320px;}.jimu-rtl .jimu-widget-query-setting .single-setting-content{right: auto; left: 0;}.jimu-widget-query-setting .items-list-content{position: absolute; left: 0; right: 0; top: 50px; bottom: 0; overflow: auto;}.jimu-widget-query-setting .items-list-content .item{position: relative; width: 100%; height: 40px; border-top: 1px solid #F3F3F3; cursor: pointer;}.jimu-widget-query-setting .items-list-content .item:hover{background-color: #F9F9F9;}.jimu-widget-query-setting .items-list-content .item.selected{background-color: #F3F3F3 !important; border-left: 4px solid #24B5CC;}.jimu-rtl .jimu-widget-query-setting .items-list-content .item.selected{border-left: 0; border-right: 4px solid #24B5CC;}.jimu-widget-query-setting .items-list-content .item \x3e *{cursor: pointer;}.jimu-widget-query-setting .items-list-content .item:first-child{border-top: 0;}.jimu-widget-query-setting .items-list-content .item .label{position: absolute; left: 8px; right: 8px; top: 0; bottom: 0; line-height: 40px; font-size: 12px; color: #353535;}.jimu-widget-query-setting .items-list-content .item.selected .label{font-weight: bold; color: #000;}.jimu-widget-query-setting .items-list-content .item .actions{position: relative; display: none; height: 100%; overflow: hidden; background-color: #F9F9F9;}.jimu-widget-query-setting .items-list-content .item:hover .actions{display: block;}.jimu-widget-query-setting .items-list-content .item.selected .actions{background-color: #F3F3F3 !important;}.jimu-widget-query-setting .items-list-content .item .action{width: 12px; height: 12px; background-repeat: no-repeat; background-position: center center; position: relative; top: 14px; cursor: pointer; margin: 0 5px;}.jimu-widget-query-setting .items-list-content .item .action.up{background-image: url("images/up_normal.png");}.jimu-widget-query-setting .items-list-content .item .action.up:hover{background-image: url("images/up_hover.png");}.jimu-widget-query-setting .items-list-content .item .action.down{background-image: url("images/down_normal.png");}.jimu-widget-query-setting .items-list-content .item .action.down:hover{background-image: url("images/down_hover.png");}.jimu-widget-query-setting .items-list-content .item .action.delete{background-image: url("images/delete_normal.png");}.jimu-widget-query-setting .items-list-content .item .action.delete:hover{background-image: url("images/delete_hover.png");}.jimu-widget-query-setting .items-list-content .item:first-child .action.up{display: none;}.jimu-widget-query-setting .items-list-content .item:last-child .action.down{display: none;}.jimu-widget-query-setting .add-btn{display: inline-block; width: 100%; height: 32px; background-color: #24B5CC; color: #ffffff; text-align: center; cursor: pointer;}.jimu-widget-query-setting .add-btn:hover{background-color: #0090A7;}.jimu-widget-query-setting .add-btn \x3e div{display: inline-block; cursor: pointer; height: 32px; line-height: 32px; font-size: 12px;}.jimu-widget-query-setting .add-btn .icon{position: relative; top: 1px; width: 12px; height: 12px; background: url("images/add.png") center center no-repeat; background-size: contain;}.jimu-widget-query-setting .add-btn .tip{margin-left: 8px;}.jimu-rtl .jimu-widget-query-setting .add-btn .tip{margin-left: 0; margin-right: 8px;}.jimu-widget-query-setting .stress{font-size: 14px; font-weight: bold; color: #000;}.jimu-widget-query-setting .light-stress{font-family: \'Avenir Medium\'; font-size: 12px; color: #353535;}.jimu-widget-query-setting .jimu-checkbox .label.light-stress{position: relative; top: 2px;}.jimu-widget-query-setting .radio-label-container \x3e *{vertical-align: middle;}.jimu-widget-query-setting .radio-label-container input{margin-left: 2px; vertical-align: middle;}.jimu-rtl .jimu-widget-query-setting .radio-label-container input{margin-left: 0; margin-right: 2px;}.jimu-widget-query-setting .jimu-checkbox.buffer-checkbox .label{font-size: 12px; font-weight: bold;}.jimu-widget-query-setting .leading-padding20{padding-left: 20px;}.jimu-rtl .jimu-widget-query-setting .leading-padding20{padding-left: 0; padding-right: 20px;}.jimu-widget-query-setting .single-setting-content .no-query-tip{position: relative; top: 50%; margin-top: -10px;}.jimu-widget-query-setting .single-setting-content .no-query-tip span{font-weight: bold;}.jimu-widget-single-query-setting{position: relative; width: 100%; height: 100%;}.jimu-widget-single-query-setting .click-picker{display: inline-block; border: 1px solid #D7D7D7; height: 24px; overflow: hidden; padding: 0 4px; cursor: pointer;}.jimu-widget-single-query-setting .click-picker .jimu-image-chooser{position: relative; top: 4px;}.jimu-widget-single-query-setting .click-picker .separator{position: relative; top: 4px; width: 1px; height: 16px; background-color: #D7D7D7; margin: 0 5px;}.jimu-widget-single-query-setting .click-picker .jimu-icon{position: relative; top: 8px;}.jimu-widget-single-query-setting .setting-btn{width: 30px; height: 30px; border: 1px solid #D7D7D7; cursor: pointer;}.jimu-widget-single-query-setting .setting-btn .jimu-icon{position: relative; left: 7px; top: 7px;}.jimu-rtl .jimu-widget-single-query-setting .setting-btn .jimu-icon{left: auto; right: 7px;}.jimu-widget-single-query-setting table.general{width: 100%; border-collapse: collapse;}.jimu-widget-single-query-setting table.general\x3etbody\x3etr\x3etd{height: 40px;}.jimu-widget-single-query-setting table.general\x3etbody\x3etr\x3e.first-td{width: 100px;}.jimu-widget-single-query-setting table.general\x3etbody\x3etr\x3e.second-td{width: auto;}.jimu-widget-single-query-setting .detail{position: absolute; width: 100%; left: 0; right: 0; top: 55px; bottom: 0;}.jimu-widget-single-query-setting .detail .jimu-tab3{height: 100%;}.jimu-widget-single-query-setting .detail .jimu-tab3 \x3e .jimu-viewstack{position: absolute; width: 100%; left: 0; right: 0; top: 55px; bottom: 0;}.jimu-widget-single-query-setting .detail .jimu-tab3 \x3e .jimu-viewstack \x3e .view{overflow: auto;}.jimu-widget-single-query-setting .tab-item-div{height: 30px; line-height: 30px;}.jimu-widget-single-query-setting .title-sorting-table{table-layout:fixed; width:100%;}.jimu-widget-single-query-setting .spatial-filter-section{margin-top: 20px;}.jimu-widget-single-query-setting .draw-graphic-setting .search-distance-section{margin-top: 7px;}.jimu-widget-single-query-setting .create-layer-section{margin-top: 22px;}.jimu-widget-single-query-setting .cbx-at-div{margin-top: 15px;}.jimu-widget-single-query-setting .cbx-rt-div{margin-top: 15px;}.jimu-query-setting-spatialfilter-config .spatial-filter-item{margin-top: 10px;}.jimu-query-setting-spatialfilter-config .spatial-filter-item{overflow: hidden;}.jimu-query-setting-spatialfilter-config .spatial-filter-item-head{position: relative; overflow: hidden;}.jimu-query-setting-spatialfilter-config .spatial-filter-item .checkbox-container{width: 485px; float: left;}.jimu-rtl .jimu-query-setting-spatialfilter-config .spatial-filter-item .checkbox-container{float: right;}.jimu-query-setting-spatialfilter-config .spatial-filter-item .default-text{float: right; color: green; cursor: pointer; display: none;}.jimu-rtl .jimu-query-setting-spatialfilter-config .spatial-filter-item .default-text{float: left;}.jimu-query-setting-spatialfilter-config .spatial-filter-item.default .default-text{display: block; color: #9B9B9B; background-color: #F3F3F3; font-size: 12px; padding: 2px 6px;}.jimu-query-setting-spatialfilter-config .spatial-filter-item .make-default{position: absolute; right: 23px; cursor: pointer; display: none; font-size: 12px; background-color: #24B5CC; color: #ffffff; padding: 2px 6px;}.jimu-rtl .jimu-query-setting-spatialfilter-config .spatial-filter-item .make-default{right: auto; left: 23px;}.jimu-query-setting-spatialfilter-config .spatial-filter-item:hover .make-default{display: block;}.jimu-query-setting-spatialfilter-config .spatial-filter-item.default:hover .make-default{display: none;}.jimu-query-setting-spatialfilter-config .spatial-filter-item .icon-placeholder{position: relative; top: 2px; width: 13px; height: 13px; float: right; cursor: pointer; margin-left: 10px;}.jimu-rtl .jimu-query-setting-spatialfilter-config .spatial-filter-item .icon-placeholder{float: left; margin-left: 0; margin-right: 10px;}.jimu-query-setting-spatialfilter-config .spatial-filter-item .arrow-icon{background: url(images/arrow-right.png) center center no-repeat;}.jimu-rtl .jimu-query-setting-spatialfilter-config .spatial-filter-item .arrow-icon{background: url(images/arrow-left.png) center center no-repeat;}.jimu-query-setting-spatialfilter-config .spatial-filter-item .arrow-icon.opened{background-color: green; background: url(images/arrow-down.png) center center no-repeat !important;}.jimu-query-setting-spatialfilter-config .hidden-setting{display: none;}.jimu-query-setting-spatialfilter-config .draw-graphic-setting .drawing-tools-section{margin-top:10px;}.jimu-query-setting-spatialfilter-config .drawing-tools-container{margin-top:5px; overflow: hidden;}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item{float: left; width: 48px; height: 48px; cursor: pointer; background-repeat: no-repeat; background-position: center center; margin-left: 5px; position: relative; border: 1px solid #DBDBDB; border-radius: 1px;}.jimu-rtl .jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item{float: right; margin-left: 0; margin-right: 5px;}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item:first-child{margin-left: 0 !important; margin-right: 0 !important;}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item .draw-item-icon{position: absolute; left: 2px; top: 2px; width: 16px; height: 16px; display: none; background: url(images/checked.png) center center no-repeat; background-color: #fff;}.jimu-rtl .jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item .draw-item-icon{left: auto; right: 2px;}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.selected .draw-item-icon{display: block;}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.point{background-image: url(../../../../jimu.js/css/images/draw_point.png);}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.line{background-image: url(../../../../jimu.js/css/images/draw_line.png);}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.polyline{background-image: url(../../../../jimu.js/css/images/draw_polyline.png);}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.freehand-polyline{background-image: url(../../../../jimu.js/css/images/draw_freehand_polyline.png);}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.triangle{background-image: url(../../../../jimu.js/css/images/draw_triangle.png);}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.extent{background-image: url(../../../../jimu.js/css/images/draw_extent.png);}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.circle{background-image: url(../../../../jimu.js/css/images/draw_circle.png);}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.ellipse{background-image: url(../../../../jimu.js/css/images/draw_ellipse.png);}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.polygon{background-image: url(../../../../jimu.js/css/images/draw_polygon.png);}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.freehand-polygon{background-image: url(../../../../jimu.js/css/images/draw_freehand_polygon.png);}.jimu-query-setting-spatialfilter-config .cbx-draw-graphic-div .jimu-checkbox .label,.jimu-query-setting-spatialfilter-config .cbx-use-features-div .jimu-checkbox .label{width: 457px;}.jimu-query-setting-spatialfilter-config .relationships-selector-div{position: relative; overflow:hidden; margin-top:5px;}.jimu-query-setting-spatialfilter-config .relationships-selector-div \x3e .dijitTextBox{position: absolute; width: auto; left: 0; right: 50px;}.jimu-rtl .jimu-query-setting-spatialfilter-config .relationships-selector-div \x3e .dijitTextBox{left: 50px; right: 0;}.jimu-query-setting-searchdistance \x3e table{table-layout: fixed; width: 100%; border-collapse: collapse;}.jimu-query-setting-popup-config .dijitTextBox .dijitInputInner{font-size: 12px !important;}.jimu-query-setting-popup-config .custom-radio-div{margin-top: 5px;}.jimu-query-setting-popup-config.portal-radio-selected .indent-tr{display: none;}.jimu-query-setting-popup-config .indent-td{padding-left: 18px;}.jimu-rtl .jimu-query-setting-popup-config .indent-td{padding-left: 0; padding-right: 18px;}.jimu-query-setting-popup-config .sort-fields-div{width: 100%; height: 30px; line-height: 30px; border: 1px solid #d2dae2; background-color: #e3ecf2; color: #7989a0; font-size: 14px;}.jimu-query-setting-popup-config .sort-fields-div span{float: left; display: inline-block; height: 30px; line-height: 30px;}.jimu-query-setting-popup-config .sort-arrow{width: 13px;}.jimu-query-setting-popup-config .sort-arrow.asc{background: center center no-repeat url(images/up_arrow.png);}.jimu-query-setting-popup-config .sort-arrow.desc{background: center center no-repeat url(images/down_arrow.png);}.jimu-query-setting-sort-fields .add-with-icon{margin-top: 4px;}.jimu-query-setting-sort-fields .sort-tip{display: inline-block;}',
"*now":function(l){l(['dojo/i18n!*preload*widgets/Query/setting/nls/Setting*["ar","cs","da","de","en","el","es","et","fi","fr","he","hr","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sr","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])}}});
define("dojo/on dojo/sniff dojo/query dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/_base/array dijit/_WidgetsInTemplateMixin jimu/BaseWidgetSetting jimu/dijit/_QueryableLayerSourcePopup jimu/utils jimu/filterUtils ../utils ./SingleQuerySetting jimu/dijit/TabContainer".split(" "),function(l,n,q,p,h,d,g,e,c,m,f,s,t,b){return p([c,e],{baseClass:"jimu-widget-query-setting",singleSetting:null,noQueryNls:"",postMixInProperties:function(){this.inherited(arguments);this.config&&(this.config=t.getConfigWithValidDataSource(this.config),
this._updateConfig());this.noQueryNls=this.nls.noTasksTip;var b='"${newQuery}""';0>this.noQueryNls.indexOf(b)&&(b='"${newQuery}"');this.noQueryNls=this.noQueryNls.replace(b,"\x3cspan\x3e"+this.nls.newQuery+"\x3c/span\x3e")},_updateConfig:function(){this.config&&(this.config.queries&&0<this.config.queries.length)&&g.forEach(this.config.queries,h.hitch(this,function(b){this._rebuildFilter(b.url,b.filter)}))},_rebuildFilter:function(b,c){try{if(c){delete c.expr;var a=new s;a.isHosted=f.isHostedService(b);
a.getExprByFilterObj(c)}}catch(d){console.log(d)}},postCreate:function(){this.inherited(arguments);this.noQueryTip.innerHTML=this.noQueryNls;this.config&&this.setConfig(this.config);n("mac")?d.addClass(this.domNode,"mac"):d.addClass(this.domNode,"not-mac")},_onBtnAddItemClicked:function(){if(this.singleSetting)if(this.singleSetting.getConfig())this.singleSetting.destroy(),this.singleSetting=null;else return;var b=new m({titleLabel:this.nls.setDataSource,dijitArgs:{multiple:!1,createMapResponse:this.map.webMapResponse,
portalUrl:this.appConfig.portalUrl,style:{height:"100%"}}});this.own(l(b,"ok",h.hitch(this,function(c){var a=b.getSelectedRadioType();b.close();b=null;this.singleSetting&&(this.singleSetting.destroy(),this.singleSetting=null);var d=this._createTarget();this._createSingleSetting(d,null);this.singleSetting.setNewLayerDefinition(c,a,c.name||"")})));this.own(l(b,"cancel",h.hitch(this,function(){b.close();b=null})));b.startup()},_createSingleSetting:function(c){q(".item",this.listContent).removeClass("selected");
this.singleSetting&&this.singleSetting.destroy();this.singleSetting=null;this.singleSetting=new b({map:this.map,nls:this.nls,target:c,_layerDefinition:c._layerDefinition,appConfig:this.appConfig,folderUrl:this.folderUrl});this.singleSetting.placeAt(this.singleSettingContent);this.own(l(this.singleSetting,"loading",h.hitch(this,function(){this.shelter.show()})));this.own(l(this.singleSetting,"unloading",h.hitch(this,function(){this.shelter.hide()})));this.own(l(this.singleSetting,"before-destroy",
h.hitch(this,function(){d.addClass(this.separator,"not-visible")})));d.addClass(c,"selected");c.singleConfig&&this.singleSetting.setConfig(c.singleConfig);d.removeClass(this.separator,"not-visible");d.addClass(this.noQueryTip,"not-visible")},_createTarget:function(b){b=b||"";return d.create("div",{"class":"item",innerHTML:'\x3cdiv class\x3d"label jimu-ellipsis" title\x3d"'+b+'"\x3e'+b+'\x3c/div\x3e\x3cdiv class\x3d"actions jimu-float-trailing"\x3e\x3cdiv class\x3d"delete action jimu-float-trailing"\x3e\x3c/div\x3e\x3cdiv class\x3d"down action jimu-float-trailing"\x3e\x3c/div\x3e\x3cdiv class\x3d"up action jimu-float-trailing"\x3e\x3c/div\x3e\x3c/div\x3e'},
this.listContent)},_onListContentClicked:function(b){b=b.target||b.srcElement;var c=f.getAncestorDom(b,function(a){return d.hasClass(a,"item")},3);c&&(d.hasClass(b,"action")?d.hasClass(b,"up")?c.previousElementSibling&&d.place(c,c.previousElementSibling,"before"):d.hasClass(b,"down")?c.nextElementSibling&&d.place(c,c.nextElementSibling,"after"):d.hasClass(b,"delete")&&(this.singleSetting&&this.singleSetting.target===c&&(this.singleSetting.destroy(),this.singleSetting=null),d.destroy(c),b=q(".item",
this.listContent),0<b.length&&this._createSingleSetting(b[0]),this._updateNoQueryTip()):this.singleSetting?this.singleSetting.target!==c&&this.singleSetting.getConfig()&&(this.singleSetting.destroy(),this.singleSetting=null,this._createSingleSetting(c)):this._createSingleSetting(c))},_updateNoQueryTip:function(){0<q(".item",this.listContent).length?d.addClass(this.noQueryTip,"not-visible"):d.removeClass(this.noQueryTip,"not-visible")},setConfig:function(b){var c=null;g.forEach(b.queries,h.hitch(this,
function(a,b){var d=this._createTarget(a.name);d.singleConfig=a;0===b&&(c=d)}));c&&this._createSingleSetting(c);this._updateNoQueryTip()},getConfig:function(){if(this.singleSetting&&!this.singleSetting.getConfig())return!1;var b=q(".item",this.listContent),c={queries:[]};c.queries=g.map(b,h.hitch(this,function(a){return a.singleConfig}));return c},destroy:function(){this.singleSetting&&this.singleSetting.destroy();this.singleSetting=null;this.inherited(arguments)}})});